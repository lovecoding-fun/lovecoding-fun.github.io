{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/img/icon_wechat.png","path":"img/icon_wechat.png","modified":0,"renderable":0},{"_id":"themes/huweihuang/source/css/archive.styl","path":"css/archive.styl","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/beantech.css","path":"css/beantech.css","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/beantech.min.css","path":"css/beantech.min.css","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/donate.css","path":"css/donate.css","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/highlight.styl","path":"css/highlight.styl","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/signature.styl","path":"css/signature.styl","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/hux-blog.min.css","path":"css/hux-blog.min.css","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/rocket.styl","path":"css/rocket.styl","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/widget.styl","path":"css/widget.styl","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/toc.styl","path":"css/toc.styl","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.eot","path":"fonts/glyphicons-halflings-regular.eot","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.ttf","path":"fonts/glyphicons-halflings-regular.ttf","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.woff","path":"fonts/glyphicons-halflings-regular.woff","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.woff2","path":"fonts/glyphicons-halflings-regular.woff2","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/hux-blog.js","path":"js/hux-blog.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/hux-blog.min.js","path":"js/hux-blog.min.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/bootstrap.min.js","path":"js/bootstrap.min.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/jquery.nav.js","path":"js/jquery.nav.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/toc.js","path":"js/toc.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/totop.js","path":"js/totop.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/jquery.tagcloud.js","path":"js/jquery.tagcloud.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/bootstrap.min.css","path":"css/bootstrap.min.css","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.svg","path":"fonts/glyphicons-halflings-regular.svg","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/bootstrap.js","path":"js/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"source/img/signature/BeanTechSign-white.png","path":"img/signature/BeanTechSign-white.png","modified":0,"renderable":0},{"_id":"themes/huweihuang/source/css/bootstrap.css","path":"css/bootstrap.css","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/images/ironman.png","path":"css/images/ironman.png","modified":0,"renderable":1},{"_id":"themes/huweihuang/source/css/images/rocket.png","path":"css/images/rocket.png","modified":0,"renderable":1},{"_id":"source/img/avatar/we.png","path":"img/avatar/we.png","modified":0,"renderable":0},{"_id":"source/img/header_img/home.jpg","path":"img/header_img/home.jpg","modified":0,"renderable":0},{"_id":"source/img/signature/BeanTechSign-black.png","path":"img/signature/BeanTechSign-black.png","modified":0,"renderable":0},{"_id":"themes/huweihuang/source/js/jquery.js","path":"js/jquery.js","modified":0,"renderable":1},{"_id":"source/img/article_header/article_bg.jpg","path":"img/article_header/article_bg.jpg","modified":0,"renderable":0},{"_id":"source/img/header_img/404.jpg","path":"img/header_img/404.jpg","modified":0,"renderable":0},{"_id":"source/img/header_img/tag.jpg","path":"img/header_img/tag.jpg","modified":0,"renderable":0},{"_id":"source/img/header_img/about.jpg","path":"img/header_img/about.jpg","modified":0,"renderable":0},{"_id":"source/img/blog.jpg","path":"img/blog.jpg","modified":0,"renderable":0},{"_id":"source/img/article_header/article_header.png","path":"img/article_header/article_header.png","modified":0,"renderable":0},{"_id":"source/img/header_img/archive.jpg","path":"img/header_img/archive.jpg","modified":0,"renderable":0},{"_id":"source/img/avatar/we.jpg","path":"img/avatar/we.jpg","modified":0,"renderable":0}],"Cache":[{"_id":"source/404.md","hash":"8b9e17605b69cf3d2b0cbf8ddc5c7357d538ccd9","modified":1575788116882},{"_id":"source/CNAME","hash":"60a9ce3696e7262df3d5ba09815b15082353176e","modified":1575788116882},{"_id":"themes/huweihuang/_config.yml","hash":"f29811ef62e8d1bec51d14eac30eae0d345b130a","modified":1575795257635},{"_id":"themes/huweihuang/LICENSE","hash":"c48eaae47a703282e0ffe7b91d69366452046214","modified":1575788117127},{"_id":"source/about/index.md","hash":"563abf8b0f19e4b3476e8ed0669b56bafc32a2dc","modified":1575797945824},{"_id":"source/_posts/FE-Resources-Collection.md","hash":"acb9e4788a40b167929134af6829fcf56ea36d65","modified":1578363938350},{"_id":"source/_posts/FrontEnd-Daily-Learning.md","hash":"3c1367fa0e9c88023090bbb44435c18edc8327a3","modified":1575793973615},{"_id":"source/_posts/FrontEnd-Notes-2019-12.md","hash":"666482d88a364d1d7ccd828ef4bfa1ae96fb900c","modified":1577930268925},{"_id":"source/_posts/FrontEnd-Notes-2020-01.md","hash":"579f66af28169dd7573bf4ff0cd8b2314d7b0908","modified":1578797219170},{"_id":"source/_posts/We Are Graduated!.md","hash":"c75b86faa55caae69d57ef2ccf0138e0be0b419d","modified":1575788116892},{"_id":"source/_posts/Resources.md","hash":"a0b0f179d0e2cb4802b3b64ef5934660b518b75f","modified":1577930452567},{"_id":"source/_posts/ä¸€äº›å·¥ä½œä¸­æ¶‰åŠåˆ°çš„æŠ€æœ¯æ–‡æ¡£é›†åˆ.md","hash":"946feb8512a809eace7f930e20ecb23d83bf002c","modified":1578534030731},{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick.md","hash":"d78fd9ad10ac89959082577441ed07ae172e7420","modified":1575907751836},{"_id":"source/archive/index.md","hash":"87e995582a1fedab64a901410a1a9d7390f75b94","modified":1575788116926},{"_id":"source/tags/index.md","hash":"9a417cb743a80a4ea6e78e833c13d5faeba2508c","modified":1575798133019},{"_id":"source/img/icon_wechat.png","hash":"4188058026609de06c6cac88b349a2da831a1783","modified":1575790252732},{"_id":"themes/huweihuang/layout/404.ejs","hash":"2e8d719fab50014b7963d3c2f4ee34c23e749d7b","modified":1575788117137},{"_id":"themes/huweihuang/layout/about.ejs","hash":"96c08fc3580b842ad9d8f37f2cdf02e6fa57d7bc","modified":1575788117144},{"_id":"themes/huweihuang/layout/archive.ejs","hash":"62781e8b0ce4de9c3db6042fedeaf13c26d138f8","modified":1575788117145},{"_id":"themes/huweihuang/layout/index.ejs","hash":"f293cefe4bf9f9c6848dff08b6dac4aeb7948892","modified":1575788117145},{"_id":"themes/huweihuang/layout/layout.ejs","hash":"389fc11a45676f94b77ebd2cb0d658a0358979c8","modified":1575788117146},{"_id":"themes/huweihuang/layout/keynote.ejs","hash":"e177b9e4a159f40b512f4ae1bfd928be4ab60840","modified":1575788117146},{"_id":"themes/huweihuang/layout/page.ejs","hash":"f77a9eb0e09931eac85e8244027eb5678c7b0705","modified":1575788117147},{"_id":"themes/huweihuang/layout/tags.ejs","hash":"63911a99e6daf9968bfdd7d69f0d3d697039902e","modified":1575788117148},{"_id":"themes/huweihuang/languages_to_be_added/de.yml","hash":"02a98ba2b93e30a00ae7979fbe90b767a27290f0","modified":1575788117129},{"_id":"themes/huweihuang/languages_to_be_added/default.yml","hash":"3cd0873b310cbf2fe022ee18d55a6113b347ea09","modified":1575788117130},{"_id":"themes/huweihuang/layout/post.ejs","hash":"1d5e2e84ed5d8e7679612ae07660128b02f8e954","modified":1575793973615},{"_id":"themes/huweihuang/languages_to_be_added/en.yml","hash":"3cd0873b310cbf2fe022ee18d55a6113b347ea09","modified":1575788117130},{"_id":"themes/huweihuang/languages_to_be_added/es.yml","hash":"fb089145368422ac47da9eb00fed05b15c904aa2","modified":1575788117131},{"_id":"themes/huweihuang/languages_to_be_added/no.yml","hash":"5ce3a1043ff85cecf83f3b5b0cdad2df44fa0192","modified":1575788117132},{"_id":"themes/huweihuang/languages_to_be_added/pl.yml","hash":"6dc5d1b2aa75ae4c527089a770f43bafb91d80f4","modified":1575788117132},{"_id":"themes/huweihuang/languages_to_be_added/ru.yml","hash":"2cfaf93704ea4ac3f374c69bab89ca31916faa33","modified":1575788117134},{"_id":"themes/huweihuang/languages_to_be_added/zh-CN.yml","hash":"6d712d9eb6ba12213dcd76b532cd86e9da83cfa3","modified":1575788117135},{"_id":"themes/huweihuang/languages_to_be_added/zh-TW.yml","hash":"45c84384a05fdb7e32a3e2d498ea180be7dccfa9","modified":1575788117136},{"_id":"source/_posts/FrontEnd-Daily-Learning/FE_20190809.png","hash":"8e381370d624b8863b6eb44fd2fa8e55c4ce5296","modified":1575788116888},{"_id":"source/_posts/FrontEnd-Daily-Learning/FE_20190806.png","hash":"cf1e11f4935faca118ffa5ec422350393827b54b","modified":1575788116886},{"_id":"source/_posts/FrontEnd-Daily-Learning/FE_20190808.png","hash":"bca41264a7be4e31f610710c569b14e04e0e68a8","modified":1575788116887},{"_id":"themes/huweihuang/layout/_partial/footer.ejs","hash":"f3619af90437b15c757b2fdd37907cc6a7484e7d","modified":1575788117138},{"_id":"themes/huweihuang/layout/_partial/head.ejs","hash":"07e23da21331914b971bb0317f545ea677484180","modified":1575788117139},{"_id":"themes/huweihuang/layout/_partial/pagination.ejs","hash":"cd61e4dbbf6020ad094c8e66ec06e8c38ebcd122","modified":1575788117141},{"_id":"themes/huweihuang/layout/_partial/nav.ejs","hash":"e65bfec3d14a9eb9f1e09b592bb34023e6bf6e83","modified":1575788117140},{"_id":"themes/huweihuang/layout/_partial/header.ejs","hash":"10d5e0966895f86373b0652e9ad2df69d742bfe4","modified":1575788117140},{"_id":"themes/huweihuang/layout/_partial/sidebar.ejs","hash":"bc7834dd769eeac94a76ffd9cfbb13a622861b62","modified":1575788117141},{"_id":"themes/huweihuang/layout/_partial/toc.ejs","hash":"aa41fc56f2fa03559aa266fc062772e9e3bbebbf","modified":1575788117141},{"_id":"themes/huweihuang/layout/_widget/archive.ejs","hash":"ad9fb0073d40fe90bfe3a1e3246e0b07e12b3ecf","modified":1575788117142},{"_id":"themes/huweihuang/layout/_widget/featured-tags.ejs","hash":"e29431fa78c81d7c521bb1f7be356651fcde959c","modified":1575788117142},{"_id":"themes/huweihuang/layout/_widget/friends-blog.ejs","hash":"b185fcffb0d181ddd9eb2259af38cf7d82fb2846","modified":1575788117143},{"_id":"themes/huweihuang/layout/_widget/recent-posts.ejs","hash":"814dd716083a8a75eb31f9d2d6ab28150b01c533","modified":1575788117143},{"_id":"themes/huweihuang/layout/_widget/category.ejs","hash":"c32e6fb8f3a07c5cbaffcebf93c357237c18b009","modified":1575788117142},{"_id":"themes/huweihuang/layout/_widget/short-about.ejs","hash":"bc918e897eead442ca3b6e5a11824402a8aeb18d","modified":1575788117144},{"_id":"themes/huweihuang/source/css/archive.styl","hash":"bcb216ef65804c97b1a5dbe5f519fc171a13aaf1","modified":1575788117149},{"_id":"themes/huweihuang/source/css/beantech.css","hash":"5e9bee0a553da83a3efd4e9bc975a0ebd13b1b7d","modified":1575788117149},{"_id":"themes/huweihuang/source/css/beantech.min.css","hash":"05a06230b1a9eca0b30cece54a397008cb77dc50","modified":1575788117150},{"_id":"themes/huweihuang/source/css/donate.css","hash":"948c148076e7e0e0f78225f753813012938f5022","modified":1575788117153},{"_id":"themes/huweihuang/source/css/highlight.styl","hash":"831f8195f3577ba5bea374f2e24b90054d445055","modified":1575788117154},{"_id":"themes/huweihuang/source/css/signature.styl","hash":"63ae8051f59d5e69544647cc4173eabc81d99aae","modified":1575788117155},{"_id":"themes/huweihuang/source/css/hux-blog.min.css","hash":"1baef04de262aeb7023d835429b49a805ac4ab40","modified":1575788117154},{"_id":"themes/huweihuang/source/css/rocket.styl","hash":"0abbccdbcd6cce70e8a0bab7152c38adc0b708f1","modified":1575788117155},{"_id":"themes/huweihuang/source/css/widget.styl","hash":"f996466e299c68274145ba5afaca9b6d1dd83114","modified":1575788117157},{"_id":"themes/huweihuang/source/css/toc.styl","hash":"e197d57dc5312b20974193b6991c779e266fadca","modified":1575788117156},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1575788117157},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1575788117159},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1575788117160},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1575788117161},{"_id":"themes/huweihuang/source/js/hux-blog.js","hash":"3d3c93e42a9990b2a2e6df5a08e9816f9a221e0f","modified":1575788117165},{"_id":"themes/huweihuang/source/js/hux-blog.min.js","hash":"ee99af17a1a69ac8d85a695fed0349ba202789ae","modified":1575788117166},{"_id":"themes/huweihuang/source/js/bootstrap.min.js","hash":"313da686ebbe387064f2d1899c64ea562b81eb40","modified":1575788117164},{"_id":"themes/huweihuang/source/js/jquery.nav.js","hash":"bc6383fa2aa8f437978cf044a3b6f10a65114398","modified":1575788117173},{"_id":"themes/huweihuang/source/js/toc.js","hash":"4ffe95b7755b035ee1b41664fa72b0ebea29c3f8","modified":1575788117174},{"_id":"themes/huweihuang/source/js/totop.js","hash":"f796b09b4f6177c3674a8c1542a8c92e8590cb5c","modified":1575788117175},{"_id":"source/_posts/Reinforcement-Learning-Post-1-Basic-Knowledge-and-Background/LDS-GNN.png","hash":"5fcbe43d5637218a0a05b5938af037d262ebd53e","modified":1575788116891},{"_id":"themes/huweihuang/source/js/jquery.tagcloud.js","hash":"448017ff32f75f444ed7985d10a21b3ad92ab100","modified":1575788117174},{"_id":"themes/huweihuang/source/css/bootstrap.min.css","hash":"1818a346630e7133a1f194669f613f613fcfa97c","modified":1575788117153},{"_id":"themes/huweihuang/source/fonts/glyphicons-halflings-regular.svg","hash":"4dcf0ab896f5417047f881de91bad10dcbda48c6","modified":1575788117158},{"_id":"themes/huweihuang/source/js/bootstrap.js","hash":"5d69034fb6eded2e5961ea54dd47129a88cd5182","modified":1575788117163},{"_id":"themes/huweihuang/source/js/jquery.min.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1575788117172},{"_id":"source/img/signature/BeanTechSign-white.png","hash":"34289ed41cf9ddac2d56be46fbb1515b7d5913cd","modified":1575788117125},{"_id":"themes/huweihuang/source/css/bootstrap.css","hash":"d1a24afac31222d70b4e001e0361ef045aa42043","modified":1575788117151},{"_id":"themes/huweihuang/source/css/images/ironman.png","hash":"2f0db0ab15d466c4065d9f6102fdf829726d9e3f","modified":1575788117155},{"_id":"themes/huweihuang/source/css/images/rocket.png","hash":"6dee0406955aa9b7a261161d30f2538a671e806b","modified":1575788117155},{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick/re-paramerise.png","hash":"44fd0e604c5419e1aa8bc710b9696ed860f891cb","modified":1575788116906},{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick/gumbel2.png","hash":"723753b396f4b0490ef5c831db3be60c3f0aff75","modified":1575788116902},{"_id":"source/img/avatar/we.png","hash":"bcb66101bf0be4147664ad308baf85904e7054d5","modified":1575788117008},{"_id":"source/img/header_img/home.jpg","hash":"67be147e02ddb76ea40a3c07e0f7e41805b52354","modified":1575817320311},{"_id":"source/img/signature/BeanTechSign-black.png","hash":"94b7102e819fd6ee082d3fb0166f4de7458c22ff","modified":1575788117121},{"_id":"themes/huweihuang/source/js/jquery.js","hash":"4bb763dc96da604aed08ac024a1a3f5de73eea39","modified":1575788117170},{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick/gumbel1.png","hash":"f4553c67e4b451a8461cfccd9ec7ebf767631b52","modified":1575788116897},{"_id":"source/img/article_header/article_bg.jpg","hash":"acc16e8a1e024239415bed316e09f481651c342d","modified":1575796664058},{"_id":"source/img/header_img/404.jpg","hash":"5313a0db2c29e6ea1c48e952e48ffc59f931d169","modified":1575816281673},{"_id":"source/img/header_img/tag.jpg","hash":"f16f692e9fd31cba89b2df25d23079260a8fe8ec","modified":1575816045471},{"_id":"source/img/header_img/about.jpg","hash":"eee9ab1704c5220d629cc552611954c8f1420137","modified":1575815839059},{"_id":"source/img/blog.jpg","hash":"a76af0b98dbe92ca2d21babcef13f094e409554b","modified":1575790252731},{"_id":"source/img/article_header/article_header.png","hash":"d9fa12f1e40924a0db57761d09d52dce450b4f7b","modified":1575788116952},{"_id":"source/img/header_img/archive.jpg","hash":"78ab7bc8c864c0e1922cd5229ff115edf80f999d","modified":1575815899943},{"_id":"source/_posts/hexo-theme-huweihuang/Demo.png","hash":"d9fa12f1e40924a0db57761d09d52dce450b4f7b","modified":1575790252725},{"_id":"source/img/avatar/we.jpg","hash":"86b6728028a68a6ba9cbf1302ee08daa73e95d65","modified":1575788117005}],"Category":[],"Data":[],"Page":[{"layout":"404","description":"ä½ æ¥åˆ°äº†æ²¡æœ‰çŸ¥è¯†çš„è’åŸ","header-img":"/img/header_img/404.png","_content":"","source":"404.md","raw":"---\nlayout: 404\ndescription: \"ä½ æ¥åˆ°äº†æ²¡æœ‰çŸ¥è¯†çš„è’åŸ\"\nheader-img: \"/img/header_img/404.png\"\n---\n","date":"2019-12-08T06:55:16.882Z","updated":"2019-12-08T06:55:16.882Z","path":"404.html","title":"","comments":1,"_id":"ck5393iqu0000icueop2xnqrp","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"about","title":"About","date":"2017-10-03T02:48:33.000Z","description":"Enjoy Coding, Enjoy Life","header-img":"/img/header_img/about.jpg","aplayer":false,"fixed":false,"_content":"\n### Who Are We?\n\nWe are lovers:couple_with_heart: graduated from [School of Data and Computer Science](http://sdcs.sysu.edu.cn/) in [Sun Yat-Sen university](http://www.sysu.edu.cn/2012/en/index.htm). \n\n### What This Blog for?\n\nWe build this site to track our life and thoughts.\n\n### What Are in This Blog?\n\nWe are interested in Front-end technologies, Machine Learning & Deep Learning Algorithms.  \nWe also track our life moments here.\n","source":"about/index.md","raw":"---\nlayout: \"about\"\ntitle: \"About\"\ndate: 2017-10-03 10:48:33\ndescription: \"Enjoy Coding, Enjoy Life\"\nheader-img: \"/img/header_img/about.jpg\"\naplayer: false\nfixed: false\n---\n\n### Who Are We?\n\nWe are lovers:couple_with_heart: graduated from [School of Data and Computer Science](http://sdcs.sysu.edu.cn/) in [Sun Yat-Sen university](http://www.sysu.edu.cn/2012/en/index.htm). \n\n### What This Blog for?\n\nWe build this site to track our life and thoughts.\n\n### What Are in This Blog?\n\nWe are interested in Front-end technologies, Machine Learning & Deep Learning Algorithms.  \nWe also track our life moments here.\n","updated":"2019-12-08T09:39:05.824Z","path":"about/index.html","comments":1,"_id":"ck5393irt0002icuemyjo2ksw","content":"<h3 id=\"who-are-we\">Who Are We?</h3>\n<p>We are lovers:couple_with_heart: graduated from <a href=\"http://sdcs.sysu.edu.cn/\" target=\"_blank\" rel=\"noopener\">School of Data and Computer Science</a> in <a href=\"http://www.sysu.edu.cn/2012/en/index.htm\" target=\"_blank\" rel=\"noopener\">Sun Yat-Sen university</a>.</p>\n<h3 id=\"what-this-blog-for\">What This Blog for?</h3>\n<p>We build this site to track our life and thoughts.</p>\n<h3 id=\"what-are-in-this-blog\">What Are in This Blog?</h3>\n<p>We are interested in Front-end technologies, Machine Learning &amp; Deep Learning Algorithms.<br>\nWe also track our life moments here.</p>\n","site":{"data":{}},"excerpt":"","more":"<h3>Who Are We?</h3>\n<p>We are lovers:couple_with_heart: graduated from <a href=\"http://sdcs.sysu.edu.cn/\" target=\"_blank\" rel=\"noopener\">School of Data and Computer Science</a> in <a href=\"http://www.sysu.edu.cn/2012/en/index.htm\" target=\"_blank\" rel=\"noopener\">Sun Yat-Sen university</a>.</p>\n<h3>What This Blog for?</h3>\n<p>We build this site to track our life and thoughts.</p>\n<h3>What Are in This Blog?</h3>\n<p>We are interested in Front-end technologies, Machine Learning &amp; Deep Learning Algorithms.<br>\nWe also track our life moments here.</p>\n"},{"layout":"archive","title":"Archives","header-img":"/img/header_img/archive.jpg","comments":0,"date":"2017-09-20T12:49:56.000Z","description":"Hey, this is archives","_content":"","source":"archive/index.md","raw":"---\nlayout: \"archive\"\ntitle: \"Archives\"\nheader-img: \"/img/header_img/archive.jpg\"\ncomments: false\ndate: 2017-09-20 20:49:56\ndescription: \"Hey, this is archives\"\n---\n","updated":"2019-12-08T06:55:16.926Z","path":"archive/index.html","_id":"ck5393irw0004icuekux89w6t","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"tags","title":"Tags","description":"Hey, this is Tags.","header-img":"/img/header_img/tag.jpg","_content":"","source":"tags/index.md","raw":"---\nlayout: \"tags\"\ntitle: \"Tags\"\ndescription: \"Hey, this is Tags.\"\nheader-img: \"/img/header_img/tag.jpg\"\n---\n","date":"2019-12-08T09:42:13.019Z","updated":"2019-12-08T09:42:13.019Z","path":"tags/index.html","comments":1,"_id":"ck5393it0000oicuexwch1xr1","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"FE Resources Collection","catalog":true,"date":"2020-01-02T02:23:08.000Z","subtitle":null,"header-img":null,"_content":"ğŸ‘·ğŸš§\n\n### åšå®¢/ç¤¾åŒº/è®ºå›\n- [Dev Community](https://dev.to/)\n- [Github](https://github.com/)\n- [Medium](https://medium.com/)\n- [Reddit](https://www.reddit.com/)\n- [è…¾è®¯ IMWeb å›¢é˜Ÿå‰ç«¯ç¤¾åŒº](https://imweb.io/topic/tab/all)\n- [è…¾è®¯ AlloyTeam å…¨ç«¯åšå®¢](http://www.alloyteam.com/page/0/)\n- [React å›¢é˜Ÿæˆå‘˜ Dan Abramov ä¸ªäººåšå®¢](https://overreacted.io/)\n\n### èµ„è®¯ç±»\n- [æ¯æ—¥æ—¶æŠ¥](https://github.com/wubaiqing/zaobao)\n- [å‰ç«¯é¢è¯•æ¯æ—¥ä¸‰é—®](https://github.com/haizlin/fe-interview)\n- [Github Daily](https://github.com/GitHubDaily/GitHubDaily)\n\n### æŠ€èƒ½å›¾è°±/æŠ€æœ¯æ¸…å•\n- [Frontend Developer](https://roadmap.sh/frontend)\n- [React Developer Roadmap](https://github.com/adam-golab/react-developer-roadmap)\n- [å‰ç«¯æŠ€æœ¯æ¸…å•](https://alienzhou.github.io/frontend-tech-list/)\n\n### é¢è¯•å®å…¸\n- [å¤§å‰ç«¯é¢è¯•å®å…¸ - å›¾è§£å‰ç«¯](https://lucifer.ren/fe-interview/#/)\n\n","source":"_posts/FE-Resources-Collection.md","raw":"---\ntitle: FE Resources Collection\ncatalog: true\ndate: 2020-01-02 10:23:08\nsubtitle:\nheader-img:\ntags: FE \n---\nğŸ‘·ğŸš§\n\n### åšå®¢/ç¤¾åŒº/è®ºå›\n- [Dev Community](https://dev.to/)\n- [Github](https://github.com/)\n- [Medium](https://medium.com/)\n- [Reddit](https://www.reddit.com/)\n- [è…¾è®¯ IMWeb å›¢é˜Ÿå‰ç«¯ç¤¾åŒº](https://imweb.io/topic/tab/all)\n- [è…¾è®¯ AlloyTeam å…¨ç«¯åšå®¢](http://www.alloyteam.com/page/0/)\n- [React å›¢é˜Ÿæˆå‘˜ Dan Abramov ä¸ªäººåšå®¢](https://overreacted.io/)\n\n### èµ„è®¯ç±»\n- [æ¯æ—¥æ—¶æŠ¥](https://github.com/wubaiqing/zaobao)\n- [å‰ç«¯é¢è¯•æ¯æ—¥ä¸‰é—®](https://github.com/haizlin/fe-interview)\n- [Github Daily](https://github.com/GitHubDaily/GitHubDaily)\n\n### æŠ€èƒ½å›¾è°±/æŠ€æœ¯æ¸…å•\n- [Frontend Developer](https://roadmap.sh/frontend)\n- [React Developer Roadmap](https://github.com/adam-golab/react-developer-roadmap)\n- [å‰ç«¯æŠ€æœ¯æ¸…å•](https://alienzhou.github.io/frontend-tech-list/)\n\n### é¢è¯•å®å…¸\n- [å¤§å‰ç«¯é¢è¯•å®å…¸ - å›¾è§£å‰ç«¯](https://lucifer.ren/fe-interview/#/)\n\n","slug":"FE-Resources-Collection","published":1,"updated":"2020-01-07T02:25:38.350Z","_id":"ck5393irp0001icue4956j72g","comments":1,"layout":"post","photos":[],"link":"","content":"<p>ğŸ‘·ğŸš§</p>\n<h3 id=\"åšå®¢ç¤¾åŒºè®ºå›\"><a href=\"#åšå®¢-ç¤¾åŒº-è®ºå›\" class=\"headerlink\" title=\"åšå®¢/ç¤¾åŒº/è®ºå›\"></a>åšå®¢/ç¤¾åŒº/è®ºå›</h3><ul>\n<li><a href=\"https://dev.to/\" target=\"_blank\" rel=\"noopener\">Dev Community</a></li>\n<li><a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener\">Github</a></li>\n<li><a href=\"https://medium.com/\" target=\"_blank\" rel=\"noopener\">Medium</a></li>\n<li><a href=\"https://www.reddit.com/\" target=\"_blank\" rel=\"noopener\">Reddit</a></li>\n<li><a href=\"https://imweb.io/topic/tab/all\" target=\"_blank\" rel=\"noopener\">è…¾è®¯ IMWeb å›¢é˜Ÿå‰ç«¯ç¤¾åŒº</a></li>\n<li><a href=\"http://www.alloyteam.com/page/0/\" target=\"_blank\" rel=\"noopener\">è…¾è®¯ AlloyTeam å…¨ç«¯åšå®¢</a></li>\n<li><a href=\"https://overreacted.io/\" target=\"_blank\" rel=\"noopener\">React å›¢é˜Ÿæˆå‘˜ Dan Abramov ä¸ªäººåšå®¢</a></li>\n</ul>\n<h3 id=\"èµ„è®¯ç±»\"><a href=\"#èµ„è®¯ç±»\" class=\"headerlink\" title=\"èµ„è®¯ç±»\"></a>èµ„è®¯ç±»</h3><ul>\n<li><a href=\"https://github.com/wubaiqing/zaobao\" target=\"_blank\" rel=\"noopener\">æ¯æ—¥æ—¶æŠ¥</a></li>\n<li><a href=\"https://github.com/haizlin/fe-interview\" target=\"_blank\" rel=\"noopener\">å‰ç«¯é¢è¯•æ¯æ—¥ä¸‰é—®</a></li>\n<li><a href=\"https://github.com/GitHubDaily/GitHubDaily\" target=\"_blank\" rel=\"noopener\">Github Daily</a></li>\n</ul>\n<h3 id=\"æŠ€èƒ½å›¾è°±æŠ€æœ¯æ¸…å•\"><a href=\"#æŠ€èƒ½å›¾è°±-æŠ€æœ¯æ¸…å•\" class=\"headerlink\" title=\"æŠ€èƒ½å›¾è°±/æŠ€æœ¯æ¸…å•\"></a>æŠ€èƒ½å›¾è°±/æŠ€æœ¯æ¸…å•</h3><ul>\n<li><a href=\"https://roadmap.sh/frontend\" target=\"_blank\" rel=\"noopener\">Frontend Developer</a></li>\n<li><a href=\"https://github.com/adam-golab/react-developer-roadmap\" target=\"_blank\" rel=\"noopener\">React Developer Roadmap</a></li>\n<li><a href=\"https://alienzhou.github.io/frontend-tech-list/\" target=\"_blank\" rel=\"noopener\">å‰ç«¯æŠ€æœ¯æ¸…å•</a></li>\n</ul>\n<h3 id=\"é¢è¯•å®å…¸\"><a href=\"#é¢è¯•å®å…¸\" class=\"headerlink\" title=\"é¢è¯•å®å…¸\"></a>é¢è¯•å®å…¸</h3><ul>\n<li><a href=\"https://lucifer.ren/fe-interview/#/\" target=\"_blank\" rel=\"noopener\">å¤§å‰ç«¯é¢è¯•å®å…¸ - å›¾è§£å‰ç«¯</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>ğŸ‘·ğŸš§</p>\n<h3 id=\"åšå®¢-ç¤¾åŒº-è®ºå›\"><a href=\"#åšå®¢-ç¤¾åŒº-è®ºå›\" class=\"headerlink\" title=\"åšå®¢/ç¤¾åŒº/è®ºå›\"></a>åšå®¢/ç¤¾åŒº/è®ºå›</h3><ul>\n<li><a href=\"https://dev.to/\" target=\"_blank\" rel=\"noopener\">Dev Community</a></li>\n<li><a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener\">Github</a></li>\n<li><a href=\"https://medium.com/\" target=\"_blank\" rel=\"noopener\">Medium</a></li>\n<li><a href=\"https://www.reddit.com/\" target=\"_blank\" rel=\"noopener\">Reddit</a></li>\n<li><a href=\"https://imweb.io/topic/tab/all\" target=\"_blank\" rel=\"noopener\">è…¾è®¯ IMWeb å›¢é˜Ÿå‰ç«¯ç¤¾åŒº</a></li>\n<li><a href=\"http://www.alloyteam.com/page/0/\" target=\"_blank\" rel=\"noopener\">è…¾è®¯ AlloyTeam å…¨ç«¯åšå®¢</a></li>\n<li><a href=\"https://overreacted.io/\" target=\"_blank\" rel=\"noopener\">React å›¢é˜Ÿæˆå‘˜ Dan Abramov ä¸ªäººåšå®¢</a></li>\n</ul>\n<h3 id=\"èµ„è®¯ç±»\"><a href=\"#èµ„è®¯ç±»\" class=\"headerlink\" title=\"èµ„è®¯ç±»\"></a>èµ„è®¯ç±»</h3><ul>\n<li><a href=\"https://github.com/wubaiqing/zaobao\" target=\"_blank\" rel=\"noopener\">æ¯æ—¥æ—¶æŠ¥</a></li>\n<li><a href=\"https://github.com/haizlin/fe-interview\" target=\"_blank\" rel=\"noopener\">å‰ç«¯é¢è¯•æ¯æ—¥ä¸‰é—®</a></li>\n<li><a href=\"https://github.com/GitHubDaily/GitHubDaily\" target=\"_blank\" rel=\"noopener\">Github Daily</a></li>\n</ul>\n<h3 id=\"æŠ€èƒ½å›¾è°±-æŠ€æœ¯æ¸…å•\"><a href=\"#æŠ€èƒ½å›¾è°±-æŠ€æœ¯æ¸…å•\" class=\"headerlink\" title=\"æŠ€èƒ½å›¾è°±/æŠ€æœ¯æ¸…å•\"></a>æŠ€èƒ½å›¾è°±/æŠ€æœ¯æ¸…å•</h3><ul>\n<li><a href=\"https://roadmap.sh/frontend\" target=\"_blank\" rel=\"noopener\">Frontend Developer</a></li>\n<li><a href=\"https://github.com/adam-golab/react-developer-roadmap\" target=\"_blank\" rel=\"noopener\">React Developer Roadmap</a></li>\n<li><a href=\"https://alienzhou.github.io/frontend-tech-list/\" target=\"_blank\" rel=\"noopener\">å‰ç«¯æŠ€æœ¯æ¸…å•</a></li>\n</ul>\n<h3 id=\"é¢è¯•å®å…¸\"><a href=\"#é¢è¯•å®å…¸\" class=\"headerlink\" title=\"é¢è¯•å®å…¸\"></a>é¢è¯•å®å…¸</h3><ul>\n<li><a href=\"https://lucifer.ren/fe-interview/#/\" target=\"_blank\" rel=\"noopener\">å¤§å‰ç«¯é¢è¯•å®å…¸ - å›¾è§£å‰ç«¯</a></li>\n</ul>\n"},{"title":"FrontEnd Notes [2019.12]","catalog":true,"date":"2019-12-09T15:33:36.000Z","subtitle":null,"header-img":null,"_content":"\n#### About\n\nğŸ“… 2019 å¹´ 12 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚\n\n#### 2019/12/26\nä»Šæ—¥é˜…è¯»ï¼š[When to useMemo and useCallback](https://kentcdodds.com/blog/usememo-and-usecallback)\nèµ·å› æ˜¯åˆ· reddit æ—¶çœ‹åˆ°äº†è¿™ç¯‡ [å¸–å­](https://www.reddit.com/r/reactjs/comments/efjgfc/should_i_use_usecallback_in_every_function/)ï¼Œæé—®è€…çš„é—®é¢˜æ˜¯ \"Should I use useCallback in every function declared inside a functional component?\"ï¼Œè¯„è®ºä¸­æœ‰äººè´´å‡ºäº†è¿™ä¸ªé“¾æ¥ï¼Œæ›´æ­£äº†æˆ‘å¯¹æ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›é”™è¯¯è®¤çŸ¥ã€‚\nä½œè€…åœ¨æ–‡ç« ä¸­ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œåœ¨æŸä¸ªå‡½æ•°ç»„ä»¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š\n```\nconst dispense = candy => {\n  setCandies(allCandies => allCandies.filter(c => c !== candy))\n}\n```\né—®é¢˜ï¼šå¦‚æœç”¨ `useCallback` åŒ…è£¹ï¼Œé‚£ä¹ˆæ€§èƒ½ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿ\n```\nconst dispense = React.useCallback(candy => {\n  setCandies(allCandies => allCandies.filter(c => c !== candy))\n}, [])\n```\næˆ‘åˆšå¼€å§‹çš„ç­”æ¡ˆæ˜¯ä½¿ç”¨ `useCallback` ä¼šæ›´å¥½ï¼Œæ¯«æ— ç–‘é—®æ˜¯é”™çš„ã€‚ä¸Šé¢çš„å‡½æ•°ä¹Ÿå¯è¢«å†™æˆï¼š\n```\nconst dispense = candy => {\n    setCandies(allCandies => allCandies.filter(c => c !== candy))\n  }\n+ const dispenseCallback = React.useCallback(dispense, [])\n```\ndiff ä¹‹åä¼šå‘ç°åªæ˜¯å¤šäº†ä¸€è¡Œï¼Œè¯¥æœ‰çš„å£°æ˜è¿˜æ˜¯æœ‰ï¼Œè¿˜éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚ç°åœ¨ä¸ä»…ä»…è¦å®šä¹‰å‡½æ•°ï¼Œè¿˜è¦å®šä¹‰ä¾èµ–æ•°ç»„ï¼Œè°ƒç”¨ `useCallback` è¿›è¡Œèµ‹å€¼åˆ†é…ç­‰å·¥ä½œã€‚ä¹‹å‰æˆ‘ä¸€ç›´è¯¯ä»¥ä¸ºï¼Œä½¿ç”¨ `useCallback` åï¼Œå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å®šä¹‰å¹¶èµ‹å€¼ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“ä¸ä¼šåšé¢å¤–çš„æ“ä½œã€‚å…¶å®ä¸æ˜¯çš„ï¼Œè¿™é‡Œçš„ç›¸ç­‰å¯ä»¥ç†è§£ä¸ºæ˜¯ â€œæŒ‡å‘çš„ä½ç½®â€ ç›¸ç­‰ï¼Œç±»ä¼¼ `ref` å’Œ `ref.current`ï¼Œé‡æ–°æ¸²æŸ“æ—¶å°±ç›¸å½“äºæ‰§è¡Œ `ref.current = newVal` ã€‚\né‚£ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨åˆ° `useCallback` å‘¢ï¼Ÿå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„ï¼š\n> This is useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders (e.g. shouldComponentUpdate).\n\næœ€ç®€å•ç²—æš´çš„ç»éªŒï¼Œæ˜¯å½“ä½ éœ€è¦å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `useCallback` æ¥é¿å…å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆå­ç»„ä»¶ä½¿ç”¨ `useMemo`ï¼‰ï¼›æ›´å‡†ç¡®çš„è¯´æ³•ï¼Œæ˜¯å½“ä½ éœ€è¦ä¾èµ–å¼•ç”¨ç›¸ç­‰æ€§æ—¶ï¼Œå°±åº”ä½¿ç”¨ `useCallback` ã€‚  \n\n#### 2019/12/17\nä¿ç•™å››ä½æœ‰æ•ˆæ•°å­—ï¼š\n```\nx.toPrecise(4) // return string\n```\n\n#### 2019/12/9\n\nä½¿ç”¨åŸç”Ÿæ–¹æ³•å®ç°æ–‡ä»¶ç‚¹å‡»/æ‹–æ‹½ä¸Šä¼ ï¼Œå¹¶é™åˆ¶åªèƒ½ä¸Šä¼ å•ä¸ª JSON æ–‡ä»¶ï¼š\nä¸»è¦æ€æƒ³æ˜¯ç›‘å¬ `onClick` å’Œ `onDrop` äº‹ä»¶ï¼Œæ³¨æ„åœ¨ React ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ³¨å†Œæ•è·é˜¶æ®µçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™åº”ä¸ºäº‹ä»¶åæ·»åŠ  `Capture`ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¤„ç†æ•è·é˜¶æ®µçš„ç‚¹å‡»äº‹ä»¶ `onClickCapture`ï¼Œè€Œä¸æ˜¯ `onClick`ã€‚è¯¦æƒ…å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ [Supported Events](https://reactjs.org/docs/events.html#supported-events) ã€‚\n\n```\n// upload.tsx\n  ...\n  const handleUploadClick = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json,application/json\";\n    input.onchange = ev => {\n      // double-checked\n      if (\n        input.files &&\n        input.files.length === 1 &&\n        input.files[0].type === \"application/json\"\n      ) {\n        // deal with input.files\n      }\n    };\n    input.click();\n  };\n\n  const handleUploadDrop = (ev:       React.DragEvent<HTMLDivElement>) => {\n    if (ev.dataTransfer.files.length > 1) {\n      console.error(\"åªå…è®¸ä¸Šä¼ å•ä¸ªæ–‡ä»¶\");\n    } else if (ev.dataTransfer.files[0].type !== \"application/json\") {\n      console.error(\"åªå…è®¸ä¸Šä¼ jsonæ–‡ä»¶\");\n    } else {\n      // deal with ev.dataTransfer.files[0]\n    }\n  };\n\n  ...\n\n  render() {\n    return (\n      <div\n        onClickCapture={ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n          handleUploadClick();\n        }}\n        onDropCapture={ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n          handleUploadDrop(ev);\n        }}\n      >\n        Click or drag file to this area to upload\n      </div>\n    )\n  }\n\n```\n","source":"_posts/FrontEnd-Notes-2019-12.md","raw":"---\ntitle: \"FrontEnd Notes [2019.12]\"\ncatalog: true\ndate: 2019-12-09 23:33:36\nsubtitle:\nheader-img:\ntags: FE\n---\n\n#### About\n\nğŸ“… 2019 å¹´ 12 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚\n\n#### 2019/12/26\nä»Šæ—¥é˜…è¯»ï¼š[When to useMemo and useCallback](https://kentcdodds.com/blog/usememo-and-usecallback)\nèµ·å› æ˜¯åˆ· reddit æ—¶çœ‹åˆ°äº†è¿™ç¯‡ [å¸–å­](https://www.reddit.com/r/reactjs/comments/efjgfc/should_i_use_usecallback_in_every_function/)ï¼Œæé—®è€…çš„é—®é¢˜æ˜¯ \"Should I use useCallback in every function declared inside a functional component?\"ï¼Œè¯„è®ºä¸­æœ‰äººè´´å‡ºäº†è¿™ä¸ªé“¾æ¥ï¼Œæ›´æ­£äº†æˆ‘å¯¹æ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›é”™è¯¯è®¤çŸ¥ã€‚\nä½œè€…åœ¨æ–‡ç« ä¸­ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œåœ¨æŸä¸ªå‡½æ•°ç»„ä»¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š\n```\nconst dispense = candy => {\n  setCandies(allCandies => allCandies.filter(c => c !== candy))\n}\n```\né—®é¢˜ï¼šå¦‚æœç”¨ `useCallback` åŒ…è£¹ï¼Œé‚£ä¹ˆæ€§èƒ½ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿ\n```\nconst dispense = React.useCallback(candy => {\n  setCandies(allCandies => allCandies.filter(c => c !== candy))\n}, [])\n```\næˆ‘åˆšå¼€å§‹çš„ç­”æ¡ˆæ˜¯ä½¿ç”¨ `useCallback` ä¼šæ›´å¥½ï¼Œæ¯«æ— ç–‘é—®æ˜¯é”™çš„ã€‚ä¸Šé¢çš„å‡½æ•°ä¹Ÿå¯è¢«å†™æˆï¼š\n```\nconst dispense = candy => {\n    setCandies(allCandies => allCandies.filter(c => c !== candy))\n  }\n+ const dispenseCallback = React.useCallback(dispense, [])\n```\ndiff ä¹‹åä¼šå‘ç°åªæ˜¯å¤šäº†ä¸€è¡Œï¼Œè¯¥æœ‰çš„å£°æ˜è¿˜æ˜¯æœ‰ï¼Œè¿˜éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚ç°åœ¨ä¸ä»…ä»…è¦å®šä¹‰å‡½æ•°ï¼Œè¿˜è¦å®šä¹‰ä¾èµ–æ•°ç»„ï¼Œè°ƒç”¨ `useCallback` è¿›è¡Œèµ‹å€¼åˆ†é…ç­‰å·¥ä½œã€‚ä¹‹å‰æˆ‘ä¸€ç›´è¯¯ä»¥ä¸ºï¼Œä½¿ç”¨ `useCallback` åï¼Œå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å®šä¹‰å¹¶èµ‹å€¼ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“ä¸ä¼šåšé¢å¤–çš„æ“ä½œã€‚å…¶å®ä¸æ˜¯çš„ï¼Œè¿™é‡Œçš„ç›¸ç­‰å¯ä»¥ç†è§£ä¸ºæ˜¯ â€œæŒ‡å‘çš„ä½ç½®â€ ç›¸ç­‰ï¼Œç±»ä¼¼ `ref` å’Œ `ref.current`ï¼Œé‡æ–°æ¸²æŸ“æ—¶å°±ç›¸å½“äºæ‰§è¡Œ `ref.current = newVal` ã€‚\né‚£ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨åˆ° `useCallback` å‘¢ï¼Ÿå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„ï¼š\n> This is useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders (e.g. shouldComponentUpdate).\n\næœ€ç®€å•ç²—æš´çš„ç»éªŒï¼Œæ˜¯å½“ä½ éœ€è¦å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `useCallback` æ¥é¿å…å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆå­ç»„ä»¶ä½¿ç”¨ `useMemo`ï¼‰ï¼›æ›´å‡†ç¡®çš„è¯´æ³•ï¼Œæ˜¯å½“ä½ éœ€è¦ä¾èµ–å¼•ç”¨ç›¸ç­‰æ€§æ—¶ï¼Œå°±åº”ä½¿ç”¨ `useCallback` ã€‚  \n\n#### 2019/12/17\nä¿ç•™å››ä½æœ‰æ•ˆæ•°å­—ï¼š\n```\nx.toPrecise(4) // return string\n```\n\n#### 2019/12/9\n\nä½¿ç”¨åŸç”Ÿæ–¹æ³•å®ç°æ–‡ä»¶ç‚¹å‡»/æ‹–æ‹½ä¸Šä¼ ï¼Œå¹¶é™åˆ¶åªèƒ½ä¸Šä¼ å•ä¸ª JSON æ–‡ä»¶ï¼š\nä¸»è¦æ€æƒ³æ˜¯ç›‘å¬ `onClick` å’Œ `onDrop` äº‹ä»¶ï¼Œæ³¨æ„åœ¨ React ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ³¨å†Œæ•è·é˜¶æ®µçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™åº”ä¸ºäº‹ä»¶åæ·»åŠ  `Capture`ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¤„ç†æ•è·é˜¶æ®µçš„ç‚¹å‡»äº‹ä»¶ `onClickCapture`ï¼Œè€Œä¸æ˜¯ `onClick`ã€‚è¯¦æƒ…å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ [Supported Events](https://reactjs.org/docs/events.html#supported-events) ã€‚\n\n```\n// upload.tsx\n  ...\n  const handleUploadClick = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json,application/json\";\n    input.onchange = ev => {\n      // double-checked\n      if (\n        input.files &&\n        input.files.length === 1 &&\n        input.files[0].type === \"application/json\"\n      ) {\n        // deal with input.files\n      }\n    };\n    input.click();\n  };\n\n  const handleUploadDrop = (ev:       React.DragEvent<HTMLDivElement>) => {\n    if (ev.dataTransfer.files.length > 1) {\n      console.error(\"åªå…è®¸ä¸Šä¼ å•ä¸ªæ–‡ä»¶\");\n    } else if (ev.dataTransfer.files[0].type !== \"application/json\") {\n      console.error(\"åªå…è®¸ä¸Šä¼ jsonæ–‡ä»¶\");\n    } else {\n      // deal with ev.dataTransfer.files[0]\n    }\n  };\n\n  ...\n\n  render() {\n    return (\n      <div\n        onClickCapture={ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n          handleUploadClick();\n        }}\n        onDropCapture={ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n          handleUploadDrop(ev);\n        }}\n      >\n        Click or drag file to this area to upload\n      </div>\n    )\n  }\n\n```\n","slug":"FrontEnd-Notes-2019-12","published":1,"updated":"2020-01-02T01:57:48.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck5393iru0003icuef84ro4rr","content":"<h4 id=\"about\">About</h4>\n<p>ğŸ“… 2019 å¹´ 12 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚</p>\n<h4 id=\"20191226\">2019/12/26</h4>\n<p>ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://kentcdodds.com/blog/usememo-and-usecallback\" target=\"_blank\" rel=\"noopener\">When to useMemo and useCallback</a><br>\nèµ·å› æ˜¯åˆ· reddit æ—¶çœ‹åˆ°äº†è¿™ç¯‡ <a href=\"https://www.reddit.com/r/reactjs/comments/efjgfc/should_i_use_usecallback_in_every_function/\" target=\"_blank\" rel=\"noopener\">å¸–å­</a>ï¼Œæé—®è€…çš„é—®é¢˜æ˜¯ â€œShould I use useCallback in every function declared inside a functional component?â€ï¼Œè¯„è®ºä¸­æœ‰äººè´´å‡ºäº†è¿™ä¸ªé“¾æ¥ï¼Œæ›´æ­£äº†æˆ‘å¯¹æ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›é”™è¯¯è®¤çŸ¥ã€‚<br>\nä½œè€…åœ¨æ–‡ç« ä¸­ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œåœ¨æŸä¸ªå‡½æ•°ç»„ä»¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const dispense = candy =&gt; &#123;</span><br><span class=\"line\">  setCandies(allCandies =&gt; allCandies.filter(c =&gt; c !== candy))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é—®é¢˜ï¼šå¦‚æœç”¨ <code>useCallback</code> åŒ…è£¹ï¼Œé‚£ä¹ˆæ€§èƒ½ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const dispense = React.useCallback(candy =&gt; &#123;</span><br><span class=\"line\">  setCandies(allCandies =&gt; allCandies.filter(c =&gt; c !== candy))</span><br><span class=\"line\">&#125;, [])</span><br></pre></td></tr></table></figure>\n<p>æˆ‘åˆšå¼€å§‹çš„ç­”æ¡ˆæ˜¯ä½¿ç”¨ <code>useCallback</code> ä¼šæ›´å¥½ï¼Œæ¯«æ— ç–‘é—®æ˜¯é”™çš„ã€‚ä¸Šé¢çš„å‡½æ•°ä¹Ÿå¯è¢«å†™æˆï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const dispense = candy =&gt; &#123;</span><br><span class=\"line\">    setCandies(allCandies =&gt; allCandies.filter(c =&gt; c !== candy))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">+ const dispenseCallback = React.useCallback(dispense, [])</span><br></pre></td></tr></table></figure>\n<p>diff ä¹‹åä¼šå‘ç°åªæ˜¯å¤šäº†ä¸€è¡Œï¼Œè¯¥æœ‰çš„å£°æ˜è¿˜æ˜¯æœ‰ï¼Œè¿˜éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚ç°åœ¨ä¸ä»…ä»…è¦å®šä¹‰å‡½æ•°ï¼Œè¿˜è¦å®šä¹‰ä¾èµ–æ•°ç»„ï¼Œè°ƒç”¨ <code>useCallback</code> è¿›è¡Œèµ‹å€¼åˆ†é…ç­‰å·¥ä½œã€‚ä¹‹å‰æˆ‘ä¸€ç›´è¯¯ä»¥ä¸ºï¼Œä½¿ç”¨ <code>useCallback</code> åï¼Œå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å®šä¹‰å¹¶èµ‹å€¼ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“ä¸ä¼šåšé¢å¤–çš„æ“ä½œã€‚å…¶å®ä¸æ˜¯çš„ï¼Œè¿™é‡Œçš„ç›¸ç­‰å¯ä»¥ç†è§£ä¸ºæ˜¯ â€œæŒ‡å‘çš„ä½ç½®â€ ç›¸ç­‰ï¼Œç±»ä¼¼ <code>ref</code> å’Œ <code>ref.current</code>ï¼Œé‡æ–°æ¸²æŸ“æ—¶å°±ç›¸å½“äºæ‰§è¡Œ <code>ref.current = newVal</code> ã€‚<br>\né‚£ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨åˆ° <code>useCallback</code> å‘¢ï¼Ÿå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„ï¼š</p>\n<blockquote>\n<p>This is useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders (e.g. shouldComponentUpdate).</p>\n</blockquote>\n<p>æœ€ç®€å•ç²—æš´çš„ç»éªŒï¼Œæ˜¯å½“ä½ éœ€è¦å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>useCallback</code> æ¥é¿å…å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆå­ç»„ä»¶ä½¿ç”¨ <code>useMemo</code>ï¼‰ï¼›æ›´å‡†ç¡®çš„è¯´æ³•ï¼Œæ˜¯å½“ä½ éœ€è¦ä¾èµ–å¼•ç”¨ç›¸ç­‰æ€§æ—¶ï¼Œå°±åº”ä½¿ç”¨ <code>useCallback</code> ã€‚</p>\n<h4 id=\"20191217\">2019/12/17</h4>\n<p>ä¿ç•™å››ä½æœ‰æ•ˆæ•°å­—ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x.toPrecise(4) // return string</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019129\">2019/12/9</h4>\n<p>ä½¿ç”¨åŸç”Ÿæ–¹æ³•å®ç°æ–‡ä»¶ç‚¹å‡»/æ‹–æ‹½ä¸Šä¼ ï¼Œå¹¶é™åˆ¶åªèƒ½ä¸Šä¼ å•ä¸ª JSON æ–‡ä»¶ï¼š<br>\nä¸»è¦æ€æƒ³æ˜¯ç›‘å¬ <code>onClick</code> å’Œ <code>onDrop</code> äº‹ä»¶ï¼Œæ³¨æ„åœ¨ React ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ³¨å†Œæ•è·é˜¶æ®µçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™åº”ä¸ºäº‹ä»¶åæ·»åŠ  <code>Capture</code>ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¤„ç†æ•è·é˜¶æ®µçš„ç‚¹å‡»äº‹ä»¶ <code>onClickCapture</code>ï¼Œè€Œä¸æ˜¯ <code>onClick</code>ã€‚è¯¦æƒ…å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a href=\"https://reactjs.org/docs/events.html#supported-events\" target=\"_blank\" rel=\"noopener\">Supported Events</a> ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// upload.tsx</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  const handleUploadClick = () =&gt; &#123;</span><br><span class=\"line\">    const input = document.createElement(&quot;input&quot;);</span><br><span class=\"line\">    input.type = &quot;file&quot;;</span><br><span class=\"line\">    input.accept = &quot;.json,application/json&quot;;</span><br><span class=\"line\">    input.onchange = ev =&gt; &#123;</span><br><span class=\"line\">      // double-checked</span><br><span class=\"line\">      if (</span><br><span class=\"line\">        input.files &amp;&amp;</span><br><span class=\"line\">        input.files.length === 1 &amp;&amp;</span><br><span class=\"line\">        input.files[0].type === &quot;application/json&quot;</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        // deal with input.files</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    input.click();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  const handleUploadDrop = (ev:       React.DragEvent&lt;HTMLDivElement&gt;) =&gt; &#123;</span><br><span class=\"line\">    if (ev.dataTransfer.files.length &gt; 1) &#123;</span><br><span class=\"line\">      console.error(&quot;åªå…è®¸ä¸Šä¼ å•ä¸ªæ–‡ä»¶&quot;);</span><br><span class=\"line\">    &#125; else if (ev.dataTransfer.files[0].type !== &quot;application/json&quot;) &#123;</span><br><span class=\"line\">      console.error(&quot;åªå…è®¸ä¸Šä¼ jsonæ–‡ä»¶&quot;);</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">      // deal with ev.dataTransfer.files[0]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    return (</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        onClickCapture=&#123;ev =&gt; &#123;</span><br><span class=\"line\">          ev.preventDefault();</span><br><span class=\"line\">          ev.stopPropagation();</span><br><span class=\"line\">          handleUploadClick();</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">        onDropCapture=&#123;ev =&gt; &#123;</span><br><span class=\"line\">          ev.preventDefault();</span><br><span class=\"line\">          ev.stopPropagation();</span><br><span class=\"line\">          handleUploadDrop(ev);</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        Click or drag file to this area to upload</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h4>About</h4>\n<p>ğŸ“… 2019 å¹´ 12 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚</p>\n<h4>2019/12/26</h4>\n<p>ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://kentcdodds.com/blog/usememo-and-usecallback\" target=\"_blank\" rel=\"noopener\">When to useMemo and useCallback</a><br>\nèµ·å› æ˜¯åˆ· reddit æ—¶çœ‹åˆ°äº†è¿™ç¯‡ <a href=\"https://www.reddit.com/r/reactjs/comments/efjgfc/should_i_use_usecallback_in_every_function/\" target=\"_blank\" rel=\"noopener\">å¸–å­</a>ï¼Œæé—®è€…çš„é—®é¢˜æ˜¯ â€œShould I use useCallback in every function declared inside a functional component?â€ï¼Œè¯„è®ºä¸­æœ‰äººè´´å‡ºäº†è¿™ä¸ªé“¾æ¥ï¼Œæ›´æ­£äº†æˆ‘å¯¹æ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›é”™è¯¯è®¤çŸ¥ã€‚<br>\nä½œè€…åœ¨æ–‡ç« ä¸­ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œåœ¨æŸä¸ªå‡½æ•°ç»„ä»¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const dispense = candy =&gt; &#123;</span><br><span class=\"line\">  setCandies(allCandies =&gt; allCandies.filter(c =&gt; c !== candy))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é—®é¢˜ï¼šå¦‚æœç”¨ <code>useCallback</code> åŒ…è£¹ï¼Œé‚£ä¹ˆæ€§èƒ½ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const dispense = React.useCallback(candy =&gt; &#123;</span><br><span class=\"line\">  setCandies(allCandies =&gt; allCandies.filter(c =&gt; c !== candy))</span><br><span class=\"line\">&#125;, [])</span><br></pre></td></tr></table></figure>\n<p>æˆ‘åˆšå¼€å§‹çš„ç­”æ¡ˆæ˜¯ä½¿ç”¨ <code>useCallback</code> ä¼šæ›´å¥½ï¼Œæ¯«æ— ç–‘é—®æ˜¯é”™çš„ã€‚ä¸Šé¢çš„å‡½æ•°ä¹Ÿå¯è¢«å†™æˆï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const dispense = candy =&gt; &#123;</span><br><span class=\"line\">    setCandies(allCandies =&gt; allCandies.filter(c =&gt; c !== candy))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">+ const dispenseCallback = React.useCallback(dispense, [])</span><br></pre></td></tr></table></figure>\n<p>diff ä¹‹åä¼šå‘ç°åªæ˜¯å¤šäº†ä¸€è¡Œï¼Œè¯¥æœ‰çš„å£°æ˜è¿˜æ˜¯æœ‰ï¼Œè¿˜éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚ç°åœ¨ä¸ä»…ä»…è¦å®šä¹‰å‡½æ•°ï¼Œè¿˜è¦å®šä¹‰ä¾èµ–æ•°ç»„ï¼Œè°ƒç”¨ <code>useCallback</code> è¿›è¡Œèµ‹å€¼åˆ†é…ç­‰å·¥ä½œã€‚ä¹‹å‰æˆ‘ä¸€ç›´è¯¯ä»¥ä¸ºï¼Œä½¿ç”¨ <code>useCallback</code> åï¼Œå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å®šä¹‰å¹¶èµ‹å€¼ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“ä¸ä¼šåšé¢å¤–çš„æ“ä½œã€‚å…¶å®ä¸æ˜¯çš„ï¼Œè¿™é‡Œçš„ç›¸ç­‰å¯ä»¥ç†è§£ä¸ºæ˜¯ â€œæŒ‡å‘çš„ä½ç½®â€ ç›¸ç­‰ï¼Œç±»ä¼¼ <code>ref</code> å’Œ <code>ref.current</code>ï¼Œé‡æ–°æ¸²æŸ“æ—¶å°±ç›¸å½“äºæ‰§è¡Œ <code>ref.current = newVal</code> ã€‚<br>\né‚£ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨åˆ° <code>useCallback</code> å‘¢ï¼Ÿå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„ï¼š</p>\n<blockquote>\n<p>This is useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders (e.g. shouldComponentUpdate).</p>\n</blockquote>\n<p>æœ€ç®€å•ç²—æš´çš„ç»éªŒï¼Œæ˜¯å½“ä½ éœ€è¦å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>useCallback</code> æ¥é¿å…å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆå­ç»„ä»¶ä½¿ç”¨ <code>useMemo</code>ï¼‰ï¼›æ›´å‡†ç¡®çš„è¯´æ³•ï¼Œæ˜¯å½“ä½ éœ€è¦ä¾èµ–å¼•ç”¨ç›¸ç­‰æ€§æ—¶ï¼Œå°±åº”ä½¿ç”¨ <code>useCallback</code> ã€‚</p>\n<h4>2019/12/17</h4>\n<p>ä¿ç•™å››ä½æœ‰æ•ˆæ•°å­—ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x.toPrecise(4) // return string</span><br></pre></td></tr></table></figure>\n<h4>2019/12/9</h4>\n<p>ä½¿ç”¨åŸç”Ÿæ–¹æ³•å®ç°æ–‡ä»¶ç‚¹å‡»/æ‹–æ‹½ä¸Šä¼ ï¼Œå¹¶é™åˆ¶åªèƒ½ä¸Šä¼ å•ä¸ª JSON æ–‡ä»¶ï¼š<br>\nä¸»è¦æ€æƒ³æ˜¯ç›‘å¬ <code>onClick</code> å’Œ <code>onDrop</code> äº‹ä»¶ï¼Œæ³¨æ„åœ¨ React ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ³¨å†Œæ•è·é˜¶æ®µçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™åº”ä¸ºäº‹ä»¶åæ·»åŠ  <code>Capture</code>ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¤„ç†æ•è·é˜¶æ®µçš„ç‚¹å‡»äº‹ä»¶ <code>onClickCapture</code>ï¼Œè€Œä¸æ˜¯ <code>onClick</code>ã€‚è¯¦æƒ…å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a href=\"https://reactjs.org/docs/events.html#supported-events\" target=\"_blank\" rel=\"noopener\">Supported Events</a> ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// upload.tsx</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  const handleUploadClick = () =&gt; &#123;</span><br><span class=\"line\">    const input = document.createElement(&quot;input&quot;);</span><br><span class=\"line\">    input.type = &quot;file&quot;;</span><br><span class=\"line\">    input.accept = &quot;.json,application/json&quot;;</span><br><span class=\"line\">    input.onchange = ev =&gt; &#123;</span><br><span class=\"line\">      // double-checked</span><br><span class=\"line\">      if (</span><br><span class=\"line\">        input.files &amp;&amp;</span><br><span class=\"line\">        input.files.length === 1 &amp;&amp;</span><br><span class=\"line\">        input.files[0].type === &quot;application/json&quot;</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        // deal with input.files</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    input.click();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  const handleUploadDrop = (ev:       React.DragEvent&lt;HTMLDivElement&gt;) =&gt; &#123;</span><br><span class=\"line\">    if (ev.dataTransfer.files.length &gt; 1) &#123;</span><br><span class=\"line\">      console.error(&quot;åªå…è®¸ä¸Šä¼ å•ä¸ªæ–‡ä»¶&quot;);</span><br><span class=\"line\">    &#125; else if (ev.dataTransfer.files[0].type !== &quot;application/json&quot;) &#123;</span><br><span class=\"line\">      console.error(&quot;åªå…è®¸ä¸Šä¼ jsonæ–‡ä»¶&quot;);</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">      // deal with ev.dataTransfer.files[0]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    return (</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        onClickCapture=&#123;ev =&gt; &#123;</span><br><span class=\"line\">          ev.preventDefault();</span><br><span class=\"line\">          ev.stopPropagation();</span><br><span class=\"line\">          handleUploadClick();</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">        onDropCapture=&#123;ev =&gt; &#123;</span><br><span class=\"line\">          ev.preventDefault();</span><br><span class=\"line\">          ev.stopPropagation();</span><br><span class=\"line\">          handleUploadDrop(ev);</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        Click or drag file to this area to upload</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"FrontEnd Daily Learning","catalog":true,"date":"2019-07-11T11:44:53.000Z","subtitle":null,"header-img":null,"_content":"#### å‰è¨€\nğŸ“ recap and cheat sheet ï¼Œè®°å½•æ¯å¤©å­¦åˆ°çš„çŸ¥è¯†/æƒ³æ³•ã€‚\nğŸ”Š æ¯æ—¥ä¸€é—®ï¼šä»Šå¤©ä½ æ¯”æ˜¨å¤©æ›´åšå­¦äº†å—ï¼Ÿ\n\n\n#### 2019/8/25\nä»Šæ—¥è¸©å‘è®°å½•ï¼š\nå±•å¼€è¯­æ³•ï¼ˆspread syntaxï¼‰åªèƒ½å–åˆ° enumerable propertiesã€‚ä¾‹å¦‚ï¼š\n```\nconst imageData = new ImageData(200, 100);\n// ImageData { width: 200, height: 100, data: Uint8ClampedArray[80000] }\nconst result = {...imageData}\n// result åªä¼šåŒ…å« data ï¼Œä¸èƒ½å–åˆ° width å’Œ height\n```\n\n\n#### 2019/8/24\né¿å…ç»„ä»¶é‡æ–°æŒ‚è½½ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶çš„å½¢å¼ï¼š\n```\nclass BussinessProvider {\n  sp$ = new Subject<{url: string, slic: string}>();\n}\n\nclass Canvas {\n  componentDidMount() {\n     this.props.sp$.pipe(takeUntil(this.unmount$)).subscribe(ev => {\n        if (ev.url === this.url) {\n           this.handleSuperPixelChange(ev.slic)\n        }\n     })\n  }\n}\n```\n\n\n#### 2019/8/24\nä¸€ã€Promise\n```\nnew Promise((resolve,reject) => {\n  // do something...\n})\n\npromise.then(onFulfilled[, onRejected]);\npromise.then(value => {\n  // fulfillment\n}, reason => {\n  // rejection\n});\n\npromise.catch(onRejected);\npromise.catch(function(reason) {\n   // rejection\n});\n```\nç®€å•æ¥è¯´ï¼Œ`reject(value)` å¯ä»¥è¢« `promise.then` ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œä¹Ÿå¯ä»¥è¢« `promise.catch` æ•è·ã€‚å¦‚æœä¸¤è€…åŒæ—¶å­˜åœ¨ï¼Œä¼šè¢« `promise.then` ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œ`promise.catch` æ— è¾“å‡ºã€‚\n\nä¸‹è½½å›¾ç‰‡çš„å…¸å‹ä¾‹å­ï¼š\n```\nfunction loadImage(url) {\n  return new Promise((resolve, reject) => {\n    let img = new Image();\n    // img.onload = () => resolve(img)\n    img.addEventListener('load', e => resolve(img));\n    // img.onerror = () => reject(XXX)\n    img.addEventListener('error', () => {\n      reject(new Error(`Failed to load image's URL: ${url}`));\n    });\n    img.src = url;\n  });\n}\n\nloadImage('http://thecatapi.com/api/images/get?format=src&type=jpg&size=small')\n  .then(img => document.getElementById('image-holder').appendChild(img))\n  .catch(error => console.error(error));\n```\n\näºŒã€await\n`[rv] = await expression`:\n>TL;DR returns the fulfilled value of the promise, \nThe await expression causes async function execution to pause until a Promise is settled, that is fulfilled or rejected, and to resume execution of the async function after fulfillment. When resumed, the value of the await expression is that of the fulfilled Promise.\nIf the Promise is rejected, the await expression throws the rejected value.\nIf the value of the expression following the await operator is not a Promise, it's converted to a resolved Promise.\n\n\n#### 2019/8/23\n`String.prototype.localeCompare()`\n> return a number, indicating whether the reference string comes before, after or is the same as the compareString in sort order. Returns one of three values:\n-1: if the reference string is sorted before the compareString\n 0: if the two strings are equal\n 1: if the reference string is sorted after the compareString\n\n`Array.prototype.sort()`\n>  sorts the elements of an array in place and returns the sorted array. \n\n```\nitems.sort((a,b) => a.localeCompare(b))\n```\n\n\n#### 2019/8/21\nä»Šæ—¥é˜…è¯»ï¼š\n[What is the difference between â€œnpm installâ€ and â€œnpm ciâ€?](https://stackoverflow.com/questions/52499617/what-is-the-difference-between-npm-install-and-npm-ci)\n[Everything You Wanted To Know About package-lock.json But Were Too Afraid To Ask](https://medium.com/coinmonks/everything-you-wanted-to-know-about-package-lock-json-b81911aa8ab8)\n\n\n#### 2019/8/20\næ¨¡ä»¿ react hook `useState` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š\n&emsp;&emsp;å› ä¸ºåœ¨ jest æµ‹è¯•ä¸­æŸä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ `useState` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†™äº†ä¸€ä¸ªæ›¿ä»£ï¼Œä¸è¿‡ä¸ç¡®å®šæ˜¯å¦æœ‰é”™ã€‚ğŸ˜³\n```\n// for example\nconst [str,setStr] = useState<string[]>([]);\n\n// fake setStr\nlet str:string[] = [];\nconst setStr = (val: string[] | ((prev:string[]) => string[])) => {\n  if (typeof val === \"object\") {\n    str = val;\n  } else if (typeof val === \"function\") {\n    str = val(str)\n  }\n}\n```\n\n#### 2019/8/19\nä»Šæ—¥é˜…è¯»ï¼š[What is rel=noopener noreferrer link](https://searchenginelaws.com/seo/what-is-rel-noopener-noreferrer-tag/)\n&emsp;&emsp;ä½¿ç”¨ `a` æ ‡ç­¾ï¼Œä¸”å±æ€§ `target=\"_blank\"` æ—¶ï¼Œéœ€è¦åŠ ä¸Š `rel=\"noopener noreferrer\"` ã€‚å¯ä»¥é˜²æ­¢æ–°çª—å£åˆ©ç”¨ `window.opener` çš„ç‰¹æ€§çªƒå–åŸçª—å£ä¿¡æ¯ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœ window A æ‰“å¼€äº† window Bï¼Œé‚£ä¹ˆ B.opener ä¼šè¿”å› Aã€‚å¦‚æœåŠ ä¸Š `rel=\"noopener\"` ï¼Œä¼šè¿”å› null ã€‚\n\n\n#### 2019/8/12\nä¸€ã€download files using axios\n```\nimport axios from \"axios\"\n\naxios.get(url,{\n  responseType: 'blob', // important\n  headers: {\n    'Authorization': AuthStr \n  }\n}).then(resp => {\n  const {data} = resp;\n  const file = new File([data],\"data.txt\");\n  const objectURL = URL.createObjectURL(file);\n  const a = document.createElement(\"a\");\n  a.href = objectURL;\n  a.download = \"data.txt\";\n  a.click();\n  URL.revokeObjectURL(objectURL);\n})\n```\n&emsp;&emsp;å¦‚æœæ˜¯å•æ¬¡ç‚¹å‡»ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒChrome åªä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—ä¸‹è½½æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥åŠ ä¸Š `setTimeout` ï¼Œè§¦å‘å¤šæ¬¡ä¸‹è½½ï¼Œæˆ–æ˜¯åŠ ä¸Š `a.target = \"_blank\"` ï¼Œæ‰“å¼€å¤šä¸ªæ–°çª—å£ã€‚\näºŒã€curl\næŸ¥çœ‹å‘½ä»¤ï¼š\n`curl --help`\n-H æŒ‡å®šHeaderï¼š\n`curl -H \"Authorization: XXXXXXXX\" URL`\n`curl POST -d data -H \"Authorization: XXXXXXXX\" URL`\n\n\n#### 2019/8/9\nä¸€ã€[useRef vs useState: Should we re-render or not?](https://www.codebeast.dev/usestate-vs-useref-re-render-or-not/)\n![FE_20190808](FE_20190809.png)\näºŒã€Hooks ç›‘å¬é”®ç›˜äº‹ä»¶\nkeyCode: https://keycode.info/\n```\nfunction useKeyPress(targetKey) {\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  }, []);\n\n  return keyPressed;\n}\n```\n\n\n#### 2019/8/8\n&emsp;&emsp;å·¥ç¨‹ä¸­ç»å¸¸ä¼šçœ‹åˆ° CI/CD çš„æ¦‚å¿µã€‚CI æŒ‡çš„æ˜¯æŒç»­é›†æˆï¼Œä¾§é‡äºç®€åŒ–å‘å¸ƒå‡†å¤‡å·¥ä½œçš„å®è·µï¼Œæ¯”å¦‚è‡ªåŠ¨æµ‹è¯•ï¼›CD æŒ‡çš„æ˜¯æŒç»­äº¤ä»˜ï¼Œæ„å‘³ç€ä¸ä»…è®©æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œè®©å‘å¸ƒæµç¨‹ä¹Ÿè‡ªåŠ¨åŒ–äº†ã€‚æ›´å¤šæ¦‚å¿µå¯¹æ¯”å¯ä»¥å‚è€ƒï¼š[Continuous integration VS continuous delivery VS continuous deployment](https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment)\n&emsp;&emsp;ä¸‹é¢è¿™ä¸ªå›¾å¾ˆæ¸…æ™°åœ°æè¿°äº†ä¸‰è€…çš„ä¸åŒï¼š\n![FE_20190808](FE_20190808.png)\n&emsp;&emsp;åœ¨ gitlab ä¸Šçš„å®è·µå¯ä»¥å‚è€ƒï¼š[åŸºäº GitLab CI/CD çš„è‡ªåŠ¨åŒ–æ„å»ºã€å‘å¸ƒå®è·µ](https://mp.weixin.qq.com/s/z2f1i2FgrVGofQR6nKTd1A)\n\n#### 2019/8/7\nTypescript: [Discriminated Unions](https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions) \n&emsp;&emsp;å½“æˆ‘ä»¬æŸä¸ªå‚æ•°å¯èƒ½æœ‰å¤šä¸ªç±»å‹ï¼Œè€Œè¿™äº›ç±»å‹ä¸­åˆæœ‰å…¬å…±çš„å±æ€§æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼çº¦æŸã€‚\n```\n// Each interface has a kind property with a different string literal type. \n// The kind property is called the discriminant or tag. \ninterface Square {\n    kind: \"square\";\n    size: number;\n}\ninterface Rectangle {\n    kind: \"rectangle\";\n    width: number;\n    height: number;\n}\ninterface Circle {\n    kind: \"circle\";\n    radius: number;\n}\n\n// put the interfaces into a union\ntype Shape = Square | Rectangle | Circle;\n\n// use the discriminated union\nfunction area(s: Shape) {\n    switch (s.kind) {\n        case \"square\": return s.size * s.size;\n        case \"rectangle\": return s.height * s.width;\n        case \"circle\": return Math.PI * s.radius ** 2;\n        default: return assertNever(s); // error here if there are missing cases\n    }\n}\n\n// Exhaustiveness checking \nfunction assertNever(x: never): never {\n    throw new Error(\"Unexpected object: \" + x);\n}\n```\n\n\n#### 2019/8/6\nStack Overflow: [useState set method not reflecting change immediately.](https://stackoverflow.com/questions/54069253/usestate-set-method-not-reflecting-change-immediately)\n&emsp;&emsp;ä»Šå¤©åœ¨å®è·µä¸­å‘ç°ï¼Œ`setState` åé©¬ä¸Šæ‰“å°ï¼Œå¹¶ä¸ä¼šå–åˆ°æ›´æ–°åçš„å€¼ã€‚æŸ¥é˜…èµ„æ–™åå‘ç°è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ›´æ–°ï¼Œä½†ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚å¦‚ä¸‹ï¼š\n![FE_20190806](FE_20190806.png)\n\n\n#### 2019/8/1\nä¸€ã€[Fetch API](https://javascript.info/fetch-api)\n&emsp;&emsp;ç”¨ fetch æ¥è¯·æ±‚ç½‘ç»œèµ„æºï¼Œå¯ä»¥é…ç½®ä¸åŒçš„å‚æ•°æ¥è§£å†³ç¼“å­˜ã€è·¨åŸŸç­‰é—®é¢˜ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š\n```\n// ä¸ç¼“å­˜è¯·æ±‚ç»“æœ \n// https://stackoverflow.com/questions/29246444/fetch-how-do-you-make-a-non-cached-request\nconst headers = new Headers();\nheaders.append(\"pragma\", \"no-cache\");\nheaders.append(\"cache-control\", \"no-store\");\n\n// å®Œå…¨å¿½ç•¥ http-cache ï¼Œæ¯æ¬¡éƒ½ä»æœåŠ¡å™¨è¯·æ±‚æ•°æ®\n// https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\nconst cache: RequestCache = \"no-store\";\n\n// è¯·æ±‚æ¨¡å¼ï¼Œè‹¥æœ‰çš„è¯·æ±‚ä¼šå› ä¸º cors è€Œå¤±è´¥ï¼Œå¯ä»¥è®¾ç½®ä¸º \"no-cors\"\n// https://developer.mozilla.org/en-US/docs/Web/API/Request/mode\nconst mode: RequestMode = needCors ? \"cors\" : \"no-cors\";\n\nawait fetch(url. {headers, cache, mode})\n  .then(res => res.blob())\n  .then(blob => {\n    // doSomething with blob\n    const url = URL.createObjectURL(blob)\n    let a = document.createElement('a')\n    a.download = 'example.zip'\n    a.href = url\n    document.body.appendChild(a)\n    a.click()\n    document.body.removeChild(a)\n  })\n  .catch(err => {\n    console.log(err)\n  })\n  .finally(() => {\n    // doSomething\n  })\n```\n&emsp;&emsp;å…³äº `res.blob()` ï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹ä¸Š[è°ˆä¸€è°ˆ Fetch API ä¸­çš„ â€œres.blob()â€](https://zhuanlan.zhihu.com/p/32909043)ï¼›ä¹Ÿå¯ä»¥å‚è€ƒ [fetch documentation](https://github.github.io/fetch/) ï¼Œè¿™ä¸€ç¯‡æ¯”è¾ƒè¯¦ç»†ï¼Œä¹Ÿæä¾›äº†è¾ƒå¤šå…¶ä»–çš„ä¾‹å­ã€‚\nå…³äºæµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼ŒMedium ä¸Šè¿™ç¯‡ [A Web Developerâ€™s Guide to Browser Caching](https://medium.com/@codebyamir/a-web-developers-guide-to-browser-caching-cc41f3b73e7c) å†™å¾—ä¸é”™ã€‚å¦‚æœå­˜åœ¨ä»£ç†æœåŠ¡å™¨ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®äº† `mode: 'no-store'` ï¼Œä»£ç†æœåŠ¡å™¨ä¹Ÿä¼šç¼“å­˜ã€‚ä¸ºäº†é¿å…è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡å‘é€è¯·æ±‚æ—¶æ„é€ æ–°çš„ URL ï¼ŒåŠ ä¸Šæ—¶é—´æˆ³ `?t=Date.now()` ã€‚ğŸ®ğŸº\näºŒã€Jest\n&emsp;&emsp;æˆ‘ä»¬åœ¨ä½¿ç”¨ jest æµ‹è¯•æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å¼•å…¥ä¸€äº›å¤–éƒ¨æ–‡ä»¶/å¤–éƒ¨å˜é‡ï¼Œå¦‚ä» `config.json` æ–‡ä»¶ä¸­å¼•å…¥æŸä¸ªå˜é‡ã€‚ä¸ºäº†åœ¨æµ‹è¯•æ–‡ä»¶ä¸­å¯ä»¥è®¿é—®åˆ°è¯¥å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `jest.config.js` ä¸­é…ç½®å…¨å±€å˜é‡ï¼š\n```\nmodule.exports = {\n  globals: {\n    API_BASE: \"\",\n    DATA_API: \"\",\n    TRACK_API: \"\"\n  },\n  setupFiles: [\"./jestSetup.ts\"]\n}\n```\n&emsp;&emsp;ç”±äº `globals` åªæ”¯æŒ JSON æ ¼å¼çš„å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®šä¹‰å…¨å±€å‡½æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ `setupFiles`ã€‚\n```\n// jestSetup.ts\n(global as any).fn= () => {};\n(global as any).variable = \"XXX\";\n```\n\n\n#### 2019/7/31\n1ï¼‰`position: fixed` å’Œ flex å¸ƒå±€æ˜¯ä¸èƒ½åŒæ—¶èµ·ä½œç”¨çš„ã€‚ç»å¯¹å¸ƒå±€è„±ç¦»æ–‡æ¡£æµï¼Œä¸ä¼šå‚ä¸åˆ° flex layout ä¸­ã€‚å¦‚æœæƒ³å®ç°å·¦ä¾§èœå•æ ï¼Œå³ä¾§å†…å®¹ï¼Œä¸¤è€…ä¸åŒæ—¶æ»šåŠ¨ï¼ˆèœå•æ  fixedï¼‰ï¼Œä½†èœå•æ çš„å¤§å°å¯ä»¥æ”¹å˜ï¼ˆflex çˆ¶å¸ƒå±€ï¼‰ã€‚å¯ä»¥è®©çˆ¶å®¹å™¨æ˜¯ flex å¸ƒå±€ï¼Œå·¦ä¾§èœå•æ å’Œå³ä¾§å†…å®¹åŒºåŸŸéƒ½æ˜¯ flex element ï¼Œ èœå•æ å†…éƒ¨å†æœ‰ä¸€ä¸ª `position: fixed` çš„ div ã€‚\n2ï¼‰å¦‚æœæƒ³è®© `position: fixed` çš„å…ƒç´ ç›¸å¯¹çˆ¶å®¹å™¨å®šä½ï¼Œå¯ä»¥ç»™çˆ¶å®¹å™¨å¢åŠ  CSS å±æ€§ `transform: translate(0,0)` ã€‚å‚è€ƒï¼š[MDN - position](https://developer.mozilla.org/en-US/docs/Web/CSS/position)\n> fixed: It is positioned relative to the initial containing block established by the viewport, except when one of its ancestors has a transform, perspective, or filter property set to something other than none. \n\n\n#### 2019/7/30\n`useEffect` ä¸­çš„å¼‚æ­¥è¯·æ±‚ï¼š\n```\n// é”™è¯¯å†™æ³•ï¼Œ return å¿…é¡»æ˜¯ cleanup function\nuseEffect(async () => {\n  const newVal = await asyncCall();\n  setVal(newVal);\n});\n\n// æ­£ç¡®å†™æ³•\nuseEffect(() => {\n  asyncCall().then(resp => setVal(resp.data));\n});\n```\nå¥½æ–‡å…±äº«ï¼š[How to fetch data with React Hooks?](https://www.robinwieruch.de/react-hooks-fetch-data/)ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```\nuseEffect(() => {\n  async function fetchMyAPI() {\n    let url = 'http://something/' + productId;\n    let config = {};\n    const response = await myFetch(url);\n    console.log(response);\n  }  \n\n  fetchMyAPI();\n}, [productId]);\n```\nå¦‚æœè¦ä¿è¯è¯·æ±‚æŒ‰é¡ºåºå‘å‡ºï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹å†™æ³•ï¼š\n```\nuseEffect(() => {\n  let didCancel = false;\n\n  async function fetchMyAPI() {\n    let url = 'http://something/' + productId;\n    let config = {};\n    const response = await myFetch(url);\n    if (!didCancel) { // Ignore if we started fetching something else\n      console.log(response);\n    } \n  }  \n\n  fetchMyAPI();\n  return () => { didCancel = true; }; // Remember if we start fetching something else\n}, [productId]);\n```\n\n\n#### 2019/7/29\nä¸€ã€[performance.now() vs Date.now()](https://stackoverflow.com/questions/30795525/performance-now-vs-date-now)\n&emsp;&emsp;åœ¨ç¨‹åºä¸­æ‰“å°æ‰§è¡Œæ—¶é—´æ—¶ï¼Œä½¿ç”¨ `performance.now(ï¼‰` æ›´å‡†ç¡®ã€‚\n```\nconst start = performance.now();\ndoSomething();\nconst end = performance.now();\nconsole.log(\"Call to doSomething took \" + (start - end) + \" milliseconds.\");\n```\näºŒã€[Does javascript slice method return a shallow copy?](https://stackoverflow.com/questions/47738344/does-javascript-slice-method-return-a-shallow-copy)\n&emsp;&emsp;mdn ä¸Šå¯¹ `slice()` æ–¹æ³•çš„ä»‹ç»ï¼š\n>The slice() method returns a shallow copy of a portion of an array into a new array object selected from begin to end (end not included) where begin and end represent the index of items in that array. The original array will not be modified.\n\n&emsp;&emsp;æ³¨æ„è¿™é‡Œçš„æµ…å¤åˆ¶æŒ‡çš„æ˜¯å¯¹æ•°ç»„ä¸­å€¼çš„æµ…å¤åˆ¶ï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªæ•°ç»„çš„æµ…å¤åˆ¶ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ™ä¿®æ”¹æ–°æ•°ç»„æ—¶ï¼ŒåŸæ•°ç»„ä¸ä¼šæ”¹å˜ï¼›å¦‚æœæ˜¯å¯¹è±¡æ•°ç»„ï¼Œä¿®æ”¹æ–°æ•°ç»„å¯¹è±¡å€¼æ—¶ï¼ŒåŸæ•°ç»„ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚\n```\nconst animals = [{name: 'ant'}, {name: 'bison'}, {name: 'camel'}];\nconst newAnimals = animals.slice(2);\n\nnewAnimals[0].name = 'aaa';\nconsole.log(newAnimals); // [{name: 'aaa'}]\nconsole.log(animals);    // [{name: 'ant'}, {name: 'bison'}, {name: 'aaa'}]\n```\n&emsp;&emsp;æ³¨æ„å¦‚æœæ˜¯é‡æ–°èµ‹å€¼ï¼Œåˆ™ç­‰äºé‡æ–°åˆ†é…ç©ºé—´ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚\n```\nconst animals = [{name: 'ant'}, {name: 'bison'}, {name: 'camel'}];\nconst newAnimals = animals.slice(2);\n\nnewAnimals[0] = {name: 'aaa'};\nconsole.log(newAnimals); // [{name: 'aaa'}]\nconsole.log(animals);    // [{name: 'ant'}, {name: 'bison'}, {name: 'camel'}]\n```\n\n#### 2019/7/26\n&emsp;&emsp;åº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦è¯·æ±‚å¹¶æ›´æ–°èœå•æ ä¸­ä»»åŠ¡çš„çŠ¶æ€ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚å®Œæˆç«‹é©¬æ›´æ–°ä¼šå¯¼è‡´ React é¢‘ç¹åˆ·æ–°ï¼Œéœ€è¦ç¼“å†²æ‰¹å¤„ç†ï¼š\n```\nimport { runInAction } from \"mobx\";\n\nlet handlers: Array<() => void> = [];\nconst runHandlers = () => {\n  runInAction(() => {\n    handlers.forEach(f => f());\n    handlers = [];\n  });\n};\n\nfor (const task of tasks) {\n  const {data} = await requestFn();\n  \n  handlers.push(() => {\n    // deal with data, update state\n    ...\n  });\n\n  if(handlers.length > 30) {\n    runHandlers();\n  }\n}\n\nrunHandlers();\n```\n&emsp;&emsp;ä¸Šè¿°ä»£ç ä¸»è¦æ˜¯åˆ©ç”¨äº†è‡ªå®šä¹‰çš„ `handlers` æ¥æš‚å­˜çŠ¶æ€æ›´æ–°å‡½æ•°ï¼Œä¹‹åä½¿ç”¨ mobx æä¾›çš„ `runInAction` æ‰§è¡Œå‡½æ•°å¹¶æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çŠ¶æ€éƒ½éœ€è¦ä½¿ç”¨ `action` å‡½æ•°ï¼Œ `runInAction` æ¥å—ä¸€ä¸ªä»£ç å—å¹¶åœ¨ä¸€ä¸ª(åŒ¿å)æ“ä½œä¸­æ‰§è¡Œï¼Œæœ‰åˆ©äºåŠ¨æ€åˆ›å»ºå’Œæ‰§è¡Œæ“ä½œï¼Œ`runInAction(f) = action(f)()`ã€‚æ­¤å¤–ï¼Œå¿…è¦æ—¶è¿˜å¯åŠ ä¸Š `lodash.memoize(func,[resolver])`ï¼Œè®°å½•ä¸»å‡½æ•°è¯·æ±‚ç»“æœã€‚\n> For one-time-actions runInAction(name?, fn) can be used, which is sugar for action(name, fn)()\n\n\n#### 2019/7/18 \nä¸€ã€ç¼–ç¨‹æ¨¡å¼ï¼š\n&emsp;&emsp; é¦–å…ˆå…ˆè®°ä½è¿™å‡ ç§ç¼–ç¨‹æ¨¡å¼çš„ä¸­æ–‡ï¼šImperative Programming æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ï¼ŒDeclarative Programming æ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼ŒReactive Programming æ˜¯å“åº”å¼ç¼–ç¨‹ã€‚ï¼ˆæµä¸‹äº†è‹±æ–‡ä¸å¥½çš„æ³ªæ°´ï¼‰\n1ï¼‰å…ˆçœ‹å‘½ä»¤å¼ç¼–ç¨‹å’Œå£°æ˜å¼ç¼–ç¨‹çš„åŒºåˆ«ï¼Œç›´æ¥ä¸Šä»£ç ï¼š\n```\n// å‘½ä»¤å¼ç¼–ç¨‹ imperative programming\nconst array = [0,1,2,3,4,5];\nconst output = [];\nfor (let i = 0; i < array.length; i++) {\n  const tmp = array[i] * 2;\n  output.push(tmp)\n};\nconsole.log(output) // => [0,2,4,6,8,10]\n```\n```\n// å£°æ˜å¼ç¼–ç¨‹ declarative programming\nconst array = [0,1,2,3,4,5];\nconst output = array.map(item => item * 2);\nconsole.log(output) // => [0,2,3,6,8,10]\n```\n&emsp;&emsp;å¾ˆæ˜æ˜¾å¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº how ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥æ­¥å‘Šè¯‰æœºå™¨æ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Œå‘Šè¯‰ä»–æ€ä¹ˆå»éå†ä¸€ä¸ªæ•°ç»„ï¼Œæ€ä¹ˆå»è¿ç®—å¾—åˆ°æœ€åçš„ç»“æœï¼Œæ€ä¹ˆå»è¾“å‡ºï¼›å£°æ˜å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº what ï¼Œæˆ‘ä»¬åªå…³æ³¨æœ€åçš„ç»“æœï¼Œç”±æœºå™¨è‡ªå·±å»æ‘¸ç´¢è¿‡ç¨‹ï¼Œå¦‚ç›´æ¥è°ƒç”¨ `map` å‡½æ•°ï¼Œåªå‘Šè¯‰ç¨‹åºæˆ‘ä»¬éœ€è¦ä¸€ä¸ª2å€è¾“å‡ºã€‚\n2ï¼‰æ¥ç€çœ‹å£°æ˜å¼ç¼–ç¨‹å’Œå“åº”å¼ç¼–ç¨‹çš„å¯¹æ¯”\n&emsp;&emsp;å¯ä»¥é˜…è¯»ï¼š[Imperative vs Reactive](https://codepen.io/HunorMarton/post/imperative-vs-reactive)ï¼Œè§£é‡Šå¾ˆæ¸…æ™°ï¼Œæ¯”å–»ä¹Ÿå¾ˆå½¢è±¡ï¼Œä½†æˆ‘è§‰å¾—æ–‡ç« é‡Œçš„ Imperative åº”è¯¥æ”¹æˆ Declarative æ¯”è¾ƒå‡†ç¡®ã€‚ç»§ç»­æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œä¿®æ”¹ä¸€ä¸‹å£°æ˜å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š\n```\n// å£°æ˜å¼ç¼–ç¨‹ declarative programming\nconst array = [1,2];\nconst output = array.map(item => item * 2);\noutput.forEach(item => console.log(item)) // => 2 4\narray.push(3);  // => no output \narray.push(4);  // => no output\n```\nå“åº”å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š\n```\nimport { Subject } from `rxjs`;\nlet array = new Subject();\narray.next(1);\narray.next(2);\n\nconst output = array.map(item => item * 2);\noutput.forEach(item => console.log(item)); // => 2 4\n\narray.next(3); // => 6\narray.next(4); // => 8\n```\n&emsp;&emsp;é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹å¼ä¸­çš„ `map` ï¼Œ `forEach` ç­‰å‡½æ•°å¹¶ä¸æ˜¯ä¸€æ ·çš„ï¼Œå†…éƒ¨å®ç°æœºåˆ¶æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°åŒºåˆ«ï¼šåœ¨å£°æ˜å¼ç¼–ç¨‹ä¸­ï¼Œå¦‚æœåœ¨æœ€åå‘åŸæ•°ç»„æ·»åŠ å€¼ï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºæ¥ï¼Œå› ä¸ºè¿™æ˜¯åœ¨ `console.log` è¯­å¥æ‰§è¡Œåå‘ç”Ÿçš„ã€‚ä½†åœ¨å“åº”å¼ç¼–ç¨‹é‡Œï¼Œä»»ä½•å˜åŒ–éƒ½å¯ä»¥è¢«ååº”å‡ºæ¥ï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ª**å¼‚æ­¥æ•°æ®æµ**ï¼ˆasynchronous data streamsï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥éšæ—¶åˆ›å»ºã€æ›´æ”¹æˆ–ç»„åˆè¿™äº›æ•°æ®æµï¼Œæ‰€ä»¥æ‰“å°äº‹ä»¶æ˜¯ä¸€ä¸ª continuous observation caseã€‚\näºŒã€ç±»åº“\n[react-virtualized](https://github.com/bvaughn/react-virtualized) çš„è½»é‡çº§ç‰ˆ [react-window](https://github.com/bvaughn/react-window)ï¼Œç”¨äºé«˜æ•ˆæ¸²æŸ“é•¿åˆ—è¡¨ã€‚\n\n\n#### 2019/7/17 \n&emsp;&emsp;å¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éœ€è¦è¯·æ±‚å¾ˆå¤šå›¾ç‰‡ï¼Œæƒ³è¦å®ç°è¯·æ±‚å‡ºé”™æ—¶ç»§ç»­å‘é€è¯·æ±‚ï¼ŒæˆåŠŸæ—¶è¿”å›æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ `Promise` ï¼š\n```\nfunction fetchURL(url: string):Promise<Blob> {\n  return Axios.get(url, {responeType: \"blob\"})\n              .then( resp => Promise.resolve(resp.data) )\n              .catch( () => fetchURL(url) )\n}\n```\nä¹‹åå¯ä»¥ä½¿ç”¨ `rxjs` ï¼š\n```\nimport { mergeMap, bufferTime, takeUntil } from \"rxjs/operators\";\n\n[url1,...,url10]\n  .pipe(\n    mergeMap( url => fetchURL(url).then( val => val )),\n    bufferTime(10000)\n  )\n  .subscribe({\n    next: resps => {\n      // do sth with resps:Blob[]\n    }\n  })\n```\n&emsp;&emsp;æ¯æ¬¡é‡åˆ° `rxjs` éƒ½å¾ˆå¤´å¤§ï¼Œç°åœ¨ä¹Ÿæ²¡æœ‰å‘ç°ä¸€ä¸ªæ¯”è¾ƒå®Œå–„æ¸…æ™°çš„æ•™ç¨‹ï¼Œä½†å®ƒåˆçœŸçš„å¾ˆå¼ºå¤§ï¼Œåç»­è¦å¼€ä¸“é¢˜å¥½å¥½å­¦ä¹ è®°å½•è¿™ä¸ªä¸œè¥¿ã€‚\n\n\n#### 2019/7/16\nä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š[How to read an often-changing value from useCallback?](https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback)\nç›´æ¥ä¸Šå®˜ç½‘ä»£ç ï¼š\n```\nfunction Form() {\n  const [text, updateText] = useState('');\n  const textRef = useRef();\n\n  useEffect(() => {\n    textRef.current = text; // Write it to the ref\n  });\n\n  const handleSubmit = useCallback(() => {\n    const currentText = textRef.current; // Read it from the ref\n    alert(currentText);\n  }, [textRef]); // Don't recreate handleSubmit like [text] would do\n\n  return (\n    <>\n      <input value={text} onChange={e => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n```\n&emsp;&emsp; ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ `text` çš„å€¼ç»å¸¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³ä½¿ `handleSubmit` ç”¨ `useCallback` åŒ…è£¹äº†ï¼Œè¿˜æ˜¯ä¼šé‡æ–°å£°æ˜ã€‚è§£å†³åŠæ³•æ˜¯ä¼ å…¥ä¸€ä¸ª `ref` å¯¹è±¡ä»£æ›¿åŸå§‹å€¼ã€‚ä¹Ÿå¯ä»¥å†™ä¸€ä¸ª custom hook ï¼š\n1ï¼‰å®˜ç½‘çš„ç‰ˆæœ¬ï¼š\n```\nfunction useEventCallback(fn, dependencies) {\n  const ref = useRef(() => {\n    throw new Error('Cannot call an event handler while rendering.');\n  });\n\n  useEffect(() => {\n    ref.current = fn;\n  }, [fn, ...dependencies]);\n\n  return useCallback(() => {\n    const fn = ref.current;\n    return fn();\n  }, [ref]);\n}\n```\nå®é™…ä½¿ç”¨ï¼š\n```\nfunction Form() {\n  const [text, updateText] = useState('');\n  // Will be memoized even if `text` changes:\n  const handleSubmit = useEventCallback(() => {\n    alert(text);\n  }, [text]);\n\n  return (\n    <>\n      <input value={text} onChange={e => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n```\n2ï¼‰å¯¼å¸ˆçš„ç‰ˆæœ¬ï¼šï¼ˆä»–æ¥äº†ï¼Œä»–å¸¦ç€ä»£ç åˆæ¥äº†ï¼‰\n```\n/**\n * @param callback\n * @param oRefs\n */\nexport function useCallbackWithRefs<\n  Refs,\n  Callback extends (...args: any[]) => void\n>(callback: (refs: Refs) => Callback, oRefs: Refs) {\n  const refs = useRef(oRefs);\n  useEffect(\n    () => {\n      refs.current = oRefs;\n    },\n    [oRefs]\n  );\n\n  return useCallback(\n    (...args: any[]) => callback(refs.current)(...args),\n    []\n  ) as Callback;\n}\n```\nå®é™…ä½¿ç”¨ï¼š\n```\nfunction Form() {\n  const [text, updateText] = useState('');\n  \n  // åŸå…ˆçš„ callback ä¹Ÿå¯ä»¥æœ‰å‚æ•°\n  const handleSubmit = useCallbackWithRefs(\n    refs => (params: any) => {\n      // è¦æ³¨æ„åœ¨å‡½æ•°å†…å¿…é¡»ä½¿ç”¨ `refs.xxx`ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä»»ä½•å˜é‡ `xxx`\n      console.log(refs.text);\n  }, {text});\n\n  return (\n    <>\n      <input value={text} onChange={e => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n```\n&emsp;&emsp;æ€»çš„æ¥è¯´ï¼Œå®˜ç½‘çš„å®ç°æ˜¯å°† `callback` ä½œä¸º `ref` å¯¹è±¡ï¼Œå¹¶ä½œä¸º `useCallback` çš„ä¾èµ–ï¼Œä¸ä¼šé¢‘ç¹æ”¹å˜ï¼›å¦‚æœåœ¨å‡½æ•° `handleSubmit` ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ `text` ï¼Œç›´æ¥ä½¿ç”¨ `test` å³å¯ã€‚ç¬¬äºŒç§å®ç°æ–¹å¼æ˜¯æŠŠç»å¸¸å˜åŒ–çš„å€¼ä½œä¸º `ref` å¯¹è±¡ï¼Œè¿”å›å€¼ `useCallback` ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `refs => callback` ï¼Œä¾èµ–æ˜¯ç©ºæ•°ç»„ï¼›è¿™æ—¶å¦‚æœè¦åœ¨å‡½æ•° `handleSubmit` ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ `text` ï¼Œå¿…é¡»ä½¿ç”¨ `refs.test` ï¼Œå¦åˆ™è®¿é—®çš„åªæ˜¯ `test` çš„åˆå§‹å€¼ã€‚\n&emsp;&emsp;React åšå¤§ç²¾æ·±ï¼Œæ¥ä¸‹æ¥è¦å¥½å¥½ç ”è¯»ä¸€ä¸‹è¿™ä¸ª [FAQ](https://reactjs.org/docs/hooks-faq.html)ã€‚\näºŒã€ä»Šæ—¥ç½‘å€\n&emsp;&emsp;ä¸€ä¸ª [emoji copy](https://www.emojicopy.com/) ç½‘ç«™ï¼Œæˆ‘ä»¬ ğŸ‘§ å°±æ˜¯å–œæ¬¢è¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ã€‚\n\n\n#### 2019/7/15\n&emsp;&emsp;ä»Šå¤©åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ React Hooks åˆè¸©å‘äº†ï¼Œçœ‹æ¥è‡ªå·±å¯¹è¿™éƒ¨åˆ†è¿˜æ˜¯æ²¡æœ‰ç†è§£é€å½»ã€‚åœ¨ä½¿ç”¨ `useCallback` å’Œ `useEffect` æ—¶ï¼Œè¦æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥çš„ `[deps]`ã€‚å¦‚æœä½¿ç”¨ `useCallback(fn,[deps])` ï¼Œ `[deps]` åº”è¯¥åŒ…å«å‡½æ•° `fn` æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼›å¦‚æœä½¿ç”¨ `useEffect(fn,[deps])` ï¼Œ å½“ `deps` çš„å€¼å˜åŒ–æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ `fn`ï¼Œå› æ­¤`[deps]` ä¸ä¸€å®šè¦åŒ…å«å‡½æ•° `fn` æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼Œè€Œæ˜¯åº”è¯¥ä¼ å…¥ä¼šå¼•èµ·è¯¥å‡½æ•°æ‰§è¡Œçš„é‚£äº›å‚æ•°ã€‚\n&emsp;&emsp;ä»Šæ—¥è¸©å‘è®°å½•ï¼šä¸ºäº†ä¼˜åŒ–å­ç»„ä»¶ï¼Œä½œä¸º `props` çš„å‡½æ•°éƒ½ä½¿ç”¨ `useCallback` åŒ…è£¹äº†ï¼Œå¹¶ä¼ å…¥äº†ç©ºæ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ã€‚ä½†æ˜¯å‡½æ•°ä¸­çš„è¿ç®—éœ€è¦ç”¨åˆ°ç»„ä»¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœæ²¡æœ‰å°†è¯¥å˜é‡ä½œä¸º `deps` ï¼Œè¿™ä¸ªå˜é‡å°±ä¼šä¸€ç›´ä¿æŒåˆå§‹å€¼ï¼Œå€¼å¹¶ä¸ä¼šæ”¹å˜ï¼Œè¿è¡Œç»“æœå°±ä¼šä¸é¢„æœŸä¸ç¬¦ã€‚ï¼ˆçœŸçš„å¤ªè ¢äº†ï¼Œç¼“ç¼“èººå€’ï¼‰\n\n\n#### 2019/7/14\nå‘¨æœ«å½“ç„¶æ˜¯çº¦ä¼šå•¦ã€‚ğŸ˜\n\n\n#### 2019/7/13\nä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š[How to compare oldValues and newValues on React Hooks useEffect?](https://stackoverflow.com/questions/53446020/how-to-compare-oldvalues-and-newvalues-on-react-hooks-useeffect)\n&emsp;&emsp; React class ç»„ä»¶æä¾›äº† `ComponentDidUpdate` ä¹‹ç±»çš„æ–¹æ³•æ¥è·å–åˆ°å½“å‰ `props` å’Œå‰ä¸€ä¸ª `props` ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒï¼Œå†³å®šæ˜¯å¦è¿›è¡Œæ›´æ–°ã€‚å‡½æ•°å¼ç»„ä»¶åªæœ‰ `useEffect` å‡½æ•°æ¥æ¨¡ä»¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–ç»„ä»¶å…ˆå‰çš„ `props` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ custom hook ï¼š\n```\nfunction usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n```\n&emsp;&emsp;ä¹‹ååœ¨ `useEffect` ä¸­ä½¿ç”¨ä¸Šé¢çš„å‡½æ•°æ¥æ¨¡æ‹Ÿ `ComponentDidUpdate` ï¼š\n```\nconst Component = (props) => {\n    const {receiveAmount, sendAmount } = props\n    const prevAmount = usePrevious({receiveAmount, sendAmount});\n    useEffect(() => {\n        if(prevAmount.receiveAmount !== receiveAmount) {\n\n         // process here\n        }\n        if(prevAmount.sendAmount !== sendAmount) {\n\n         // process here\n        }\n    }, [receiveAmount, sendAmount])\n}\n```\n&emsp;&emsp;æœ‰æ—¶å€™åœ¨ debug æ—¶ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ç»„ä»¶ä¸ºä»€ä¹ˆä¼šé‡æ–°æ¸²æŸ“ï¼Œæ˜¯é‚£äº› `props` æ›´æ–°äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥è·å– `prevProps`ï¼Œå¹¶åœ¨å‡½æ•°ç»„ä»¶æœ€å¼€å§‹æ—¶å†™ä¸€ä¸ª `useEffect` å°†å‚æ•°éƒ½æ‰“å°å‡ºæ¥ï¼Œä½¿ç”¨ `===` æ¯”è¾ƒã€‚ \n\n\n\n#### 2019/7/12\nä¸€ã€ä»Šæ—¥æŠ€èƒ½\n&emsp;&emsp;é¡¹ç›®ä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ° JSON å­—ç¬¦ä¸²çš„è§£æï¼Œè§£æå‡ºé”™å°±æ‰‘è¡—äº†ï¼Œä¸€èˆ¬æ˜¯ç”¨ `try {...} catch {...}` åŒ…è£¹ã€‚ä»Šå¤©å¯¼å¸ˆåœ¨ code review æ—¶å»ºè®®æˆ‘ä½¿ç”¨å¦‚ä¸‹å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿå¯ä»¥è¦†ç›–ç©ºå­—ç¬¦ä¸²çš„æ£€æµ‹ï¼š\n```\nfunction safeJsonParse<T>(str): { ok: true, value: T } | { ok: false } {\n  try {\n    return {\n      ok: true,\n      value: JSON.parse(str)\n    }\n  } catch {\n    return {\n      ok: false\n    }\n  }\n}\n```\näºŒã€ä»Šæ—¥é˜…è¯»ï¼š[ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†](https://imweb.io/topic/5b72d4ef15554e6d3409f817)ã€‚\n&emsp;&emsp;è¿™ä¸€ç¯‡å¾ˆå¥½åœ°æ¢³ç†äº†è¿›ç¨‹ã€çº¿ç¨‹ã€æµè§ˆå™¨**å¤šè¿›ç¨‹**ã€æµè§ˆå™¨å†…æ ¸**å¤šçº¿ç¨‹**ã€JSå•çº¿ç¨‹ã€JSè¿è¡Œæœºåˆ¶çš„ç›¸å…³çŸ¥è¯†ï¼Œå¾ˆè¿è´¯ï¼Œå»ºè®®æ—¶ä¸æ—¶å›é¡¾ã€‚ç®€å•è®°å½•å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š\n1ï¼‰è¿›ç¨‹æ˜¯CPUèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½ã€‚ï¼ˆæƒ³å½“å¹´è€ƒæ“ä½œç³»ç»Ÿçš„æ—¶å€™è¿˜èƒŒå¾—æ»šç“œçƒ‚ç†Ÿï¼‰\n2ï¼‰**æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„**ï¼ŒåŒ…æ‹¬çš„ä¸»è¦è¿›ç¨‹æœ‰ï¼š\n- Browserè¿›ç¨‹ï¼ˆæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œåªæœ‰ä¸€ä¸ªï¼‰\n- æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼ŒRendererè¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰ï¼šé»˜è®¤æ¯ä¸ªTabä¸€ä¸ªè¿›ç¨‹\n- ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹\n- GPUè¿›ç¨‹ï¼š3Dç»˜åˆ¶\n\n3ï¼‰é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼Œå®ƒæ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸»è¦å¸¸é©»çº¿ç¨‹æœ‰ï¼š\n- GUIæ¸²æŸ“çº¿ç¨‹ï¼šæ¸²æŸ“é¡µé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ï¼Œrepaint å’Œ reflow ç­‰ã€‚\n- JSå¼•æ“çº¿ç¨‹ï¼šå¤„ç†ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸ GUI æ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚\n- äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šæ§åˆ¶äº‹ä»¶å¾ªç¯ï¼ŒæŠŠäº‹ä»¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æœ«å°¾ã€‚\n- å®šæ—¶è§¦å‘çº¿ç¨‹ï¼š`setTimeout` å’Œ `setInterval`ï¼ŒåŒæ ·ä¹Ÿæ˜¯è®¡æ—¶å®Œæ¯•åæ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾ã€‚\n- å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹\n\n4ï¼‰Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ä¹‹é—´æ˜¯éœ€è¦é€šä¿¡çš„\n5ï¼‰æ—¶é—´å¾ªç¯æœºåˆ¶ `Event Loop` ï¼šJSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡éƒ½ä¼šåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼›ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ä¸€ä¸ª**ä»»åŠ¡é˜Ÿåˆ—/äº‹ä»¶é˜Ÿåˆ—**ï¼Œå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œç»“æœä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸­æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°æ‰§è¡Œæ ˆä¸­å¼€å§‹æ‰§è¡Œã€‚ \n6ï¼‰è¿›é˜¶ï¼šmacrotask / task å’Œ microtask/ jobã€‚ES6ä¸­çš„ `Promise` å°±å±äº microtask å¾®ä»»åŠ¡ ï¼Œè€Œä¸»ä»£ç å—ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ—¶é—´å¦‚ `setTimeout` å’Œ `setInterval` å°±å±äº macrotask å®ä»»åŠ¡ã€‚æ€»ç»“çš„è¿è¡Œæœºåˆ¶å°±æ˜¯ï¼š\n- æ‰§è¡Œå®ä»»åŠ¡ã€‚ï¼ˆä»æ‰§è¡Œæ ˆä¸­è·å–ï¼Œå¦‚æœæ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰\n- æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ— Job Queues ä¸­ã€‚ï¼ˆä½œè€…çŒœæµ‹è¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“çº¿ç¨‹ç»´æŠ¤ï¼Œå› ä¸ºæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰\n- å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³ä¾æ¬¡æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰å¾®ä»»åŠ¡ã€‚\n- æ£€æŸ¥æ¸²æŸ“ï¼Œç”± GUI çº¿ç¨‹æ¥ç®¡ã€‚\n- æ¸²æŸ“å®Œæ¯•åï¼Œç”± JS å¼•æ“çº¿ç¨‹æ¥ç®¡ï¼Œä»æ—¶é—´é˜Ÿåˆ—ä¸­è·å–å¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚\n\n7ï¼‰åœ¨ç¬¬å…­ç‚¹ä¸­æåˆ°çš„æ˜¯ä¸€ä¸ªè¿›é˜¶çš„æ¦‚å¿µï¼Œå¯¹åº”ä¸€é“é¢˜ç›®ï¼Œå¦‚æœä»£ç ä¸­ä¾æ¬¡æœ‰ `setTimeout` å’Œ `Promise` ï¼Œæ˜¯ä¼šå…ˆæ‰“å°å‡º `Promise` çš„æ‰§è¡Œç»“æœçš„ã€‚\n\n\n#### 2019/7/11\n&emsp;&emsp; React 16.8 æå‡ºäº† `hook` çš„æ¦‚å¿µï¼Œå‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ã€‚ç°åœ¨çš„å·¥ä½œé¡¹ç›®å·²ç»æ‘’å¼ƒäº† `class` ï¼Œæ”¹ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œæ­£åœ¨æ…¢æ…¢æ‘¸ç´¢ä¸­ã€‚ä»Šå¤©åœ¨è…¾è®¯[IMWebå‰ç«¯åšå®¢](http://imweb.io/)ä¸­çœ‹åˆ°äº†ä¸¤ç¯‡ä»‹ç» `React hook` çš„æ–‡ç« ï¼Œå—ç›ŠåŒªæµ…ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚\n ä¸€ã€[react hookâ€”â€”ä½ å¯èƒ½ä¸æ˜¯â€œæˆ‘â€æ‰€è®¤è¯†çš„useEffect](https://imweb.io/topic/5cd845cadcd62f86299fcd76)\n&emsp;&emsp;è¿™ç¯‡ä»‹ç»äº† `useEffect` è¿™ä¸ªAPIï¼Œç”¨å®ƒæ¨¡æ‹Ÿäº†classç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚`useEffect` ç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼Œç›¸å½“äº `ComponentDidMount` å’Œ `ComponentDidUpdate`ã€‚è¯¥APIæœ‰ä¸¤ä¸ªå‚æ•°å’Œä¸€ä¸ªè¿”å›å€¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯æ¸…é™¤å‡½æ•°ï¼Œç›¸å½“äº `ComponentWillUnmount`ï¼Œæ¯ä¸€æ¬¡ `render` éƒ½ä¼šæ‰§è¡Œå‰¯ä½œç”¨å’Œæ¸…é™¤ä¸Šä¸€æ¬¡å‰¯ä½œç”¨ã€‚**ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥çš„æ˜¯å‰¯ä½œç”¨å‡½æ•°æ‰€éœ€è¦çš„ä¾èµ–ï¼Œå½“ä»»ä¸€ä¾èµ–æ›´æ–°æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å‰¯ä½œç”¨å¹¶æ‰§è¡Œï¼›å¦‚æœä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç›¸å½“äº `ComponentDidMount`ï¼›å¦‚æœä¸ä¼ ï¼Œå°±æ˜¯æ²¡æœ‰è¯´æ˜è‡ªå·±æœ‰æ²¡æœ‰ä¾èµ–ï¼ˆæ³¨æ„æ˜¯ä¸çŸ¥é“æœ‰æ²¡æœ‰ï¼Œä¸æ˜¯æ²¡æœ‰ï¼ï¼‰ï¼Œæ¯æ¬¡ `render` æ—¶å°±æ‰§è¡Œï¼Œç›¸å½“äº `ComponentDidUpdate` ã€‚**\n&emsp;&emsp; æœ€åè¿˜è®²äº† `useEffect` å’Œ `useLayoutEffect` çš„åŒºåˆ«ï¼Œç®€å•æ¥è¯´å‰è€…æ˜¯å¼‚æ­¥çš„ï¼Œåè€…æ˜¯åŒæ­¥çš„ã€‚è¿˜æ²¡å¥½å¥½æ·±å…¥è¿™éƒ¨åˆ†ï¼ŒTODOã€‚\näºŒã€[å¯èƒ½ä½ çš„reactå‡½æ•°ç»„ä»¶ä»æ¥æ²¡æœ‰ä¼˜åŒ–è¿‡](https://imweb.io/topic/5d1e3657f7b5692b080f2651)\n&emsp;&emsp;ä¼˜åŒ–é—®é¢˜çœŸæ˜¯æˆ‘ä¸€ä¸ªç—›ç‚¹ã€‚è¿™ç¯‡æ–‡ç« å¾ˆæ¸…æ¥šåœ°è§£é‡Šäº† `Hooks` ä¸€äº›å¯ç”¨äºç»„ä»¶ä¼˜åŒ–çš„APIã€‚å¼ºæ¨ï¼\n&emsp;&emsp; ç‰¹åˆ«åœ°ï¼Œæ–‡ç« ä»‹ç»äº†å½“å‡½æ•°ç»„ä»¶ä¸­ä¼ å…¥çš„ `props` å€¼ä¸ºå‡½æ•°æ—¶ï¼Œç”±äºæ¯ä¸€æ¬¡æ‰§è¡Œæˆ–é‡æ–°æ‰§è¡Œï¼Œä½œç”¨åŸŸé‡Œé¢ä¸€åˆ‡éƒ½æ˜¯é‡æ–°å¼€å§‹ï¼Œå‡½æ•°ä¸æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œä¸èƒ½ç”»ä¸Šç­‰å·ï¼Œå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜æ–‡ç« æå‡ºäº†å‡ ç§è§£å†³åŠæ³•ï¼š\n1ï¼‰ ä½œä¸º `props` çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å¤–å®šä¹‰ï¼Œå‡½æ•°ç»„ä»¶ç”¨ `React.memo()` åŒ…è£¹ã€‚\n &emsp;&emsp; `React.memo()` ç±»ä¼¼äº `PureComponent` å’Œ `ComponentDidUpdate` ï¼Œå¦‚æœå‡½æ•°ç»„ä»¶çš„ `props` å€¼éƒ½ä¸€æ ·ï¼Œå°±ä¼šè·³è¿‡è¯¥ç»„ä»¶çš„æ‰§è¡Œï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œå®ç°æ€§èƒ½ä¼˜åŒ–ã€‚\n2ï¼‰ ä½œä¸º `props` çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å†…å®šä¹‰ï¼Œä½¿ç”¨`useCallBack` æˆ– `useMemo`åŒ…è£¹ï¼Œå‡½æ•°ç»„ä»¶ç”¨ `React.memo()` åŒ…è£¹ã€‚\n&emsp;&emsp; `useCallback(() => {}, [deps])` è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ `deps` ä¸å˜æ—¶ï¼ˆå¦‚ä¼ å…¥ç©ºæ•°ç»„ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ï¼‰ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚`const a = useMemo(() => memorizeValue, [deps])`ï¼Œå½“ `deps` ä¸å˜æ—¶ï¼Œ`a` çš„å€¼è¿˜æ˜¯ä¸Šæ¬¡çš„ `memorizeValue`ï¼Œçœå»äº†é‡æ–°è®¡ç®—çš„è¿‡ç¨‹ã€‚\n&emsp;&emsp; æ³¨æ„å½“ `memorizeValue` æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ`useCallback(fn, inputs) <=> useMemo(() => fn, inputs)`ã€‚\n\n\n#### 2019/7/10\n&emsp;&emsp;ä»Šå¤©åœ¨é¡¹ç›®ä¸­æ¥è§¦åˆ°äº† `symbol`ï¼Œé‰´äºä¹‹å‰ä¸€ç›´æ²¡æœ‰æ³¨æ„è¿™ä¸ªæ•°æ®ç±»å‹ï¼Œåœ¨ä»Šå¤©è¡¥ä¸Šã€‚ `symbol` æ˜¯ ES6 æ–°å¢çš„**åŸºæœ¬**æ•°æ®ç±»å‹ã€‚å®ƒçš„ä½¿ç”¨å¦‚ä¸‹ï¼š\n```\nconst s1 = Symbol();\nconst s2 = Symbol();\nconsole.log(s1 === s2); // false\n\nconst s3 = new Symbol() // TypeError: Symbol is not a constructor\nSymbol(\"foo\") === Symbol(\"foo\"); // false\n```\n`Symbol()` è¿”å›çš„æ¯ä¸ª `symbol` å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚å®ƒæœ€å¸¸è¢«ç”¨äºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ï¼Œå¦‚ï¼š\n```\nconst obj = {}\nconst foo = Symbol(\"foo\")\nobj[foo] = \"foo\"\nobj.bar = \"bar\"\n\nconsole.log(obj); // { bar: \"bar\" , Symbol(foo): \"foo\"}\nconsole.log(foo in obj); // true\nconsole.log(obj[foo]); // foo\nconsole.log(Object.keys(obj)); // [\"bar\"]\nconsole.log(Object.getOwnPropertySymbols(obj)) // [Symbol(foo)]\n```\nä¹Ÿå°±æ˜¯è¯´ï¼Œ `Object.key()` ä¸ä¼šè¿”å› `symbol` å€¼ï¼ŒåŒç†ï¼Œ`Object.getOwnPropertyNames()`ã€`for..in`ã€`for...of` ä¹Ÿä¸ä¼šè¿”å›ã€‚`JSON.stringify()` ä¹Ÿä¼šå¿½ç•¥ï¼š\n```\nJSON.stringify({[Symbol('foo')]: 'foo'});                 \n// '{}'\n```\n`Symbol` è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ã€‚ `Symbol.for(key)` æ˜¯æ ¹æ®æŒ‡å®šçš„ `key` æœç´¢ç°æœ‰çš„ `symbol` å¹¶è¿”å›, å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šä½¿ç”¨ `key` åœ¨å…¨å±€çš„ `symbol` æ³¨å†Œè¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ `symbol` ã€‚`Symbol.keyFor(sym)` æ˜¯åœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­æ£€ç´¢ï¼Œè¿”å›å…±äº«çš„ `symbol key` ã€‚\n\n\n#### 2019/7/9\nä¸€ä¸ªä¸å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼šè®©å‡½æ•°åœ¨å†…éƒ¨è·å–è‡ªå·±æ‰€éœ€çš„ä¾èµ–ã€‚ä¾‹å¦‚ï¼š\n```\n// ä¸€ä¸ªå¯å¤ç”¨å‡½æ•°\nfunction doSomething(key: string) {\n    return (\n        <Button\n            loading = {key===\"str1\"? Compoment1 : Compoment2}\n        >\n            button\n        </Button>\n    )\n}\n```\n`lodaing` æ‰€éœ€çš„ç»„ä»¶åº”è¯¥æ˜¯ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥çš„ï¼Œä¸ç„¶å¦‚æœæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª `key`ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥äº†è¯¥åœ°æ–¹çš„ä¿®æ”¹ã€‚è¿™ä¸ªè§‚ç‚¹ç±»ä¼¼äºä¾èµ–åè½¬ã€‚","source":"_posts/FrontEnd-Daily-Learning.md","raw":"---\ntitle: FrontEnd Daily Learning\ncatalog: true\ndate: 2019-07-11 19:44:53\nsubtitle:\nheader-img:\ntags: FE\n---\n#### å‰è¨€\nğŸ“ recap and cheat sheet ï¼Œè®°å½•æ¯å¤©å­¦åˆ°çš„çŸ¥è¯†/æƒ³æ³•ã€‚\nğŸ”Š æ¯æ—¥ä¸€é—®ï¼šä»Šå¤©ä½ æ¯”æ˜¨å¤©æ›´åšå­¦äº†å—ï¼Ÿ\n\n\n#### 2019/8/25\nä»Šæ—¥è¸©å‘è®°å½•ï¼š\nå±•å¼€è¯­æ³•ï¼ˆspread syntaxï¼‰åªèƒ½å–åˆ° enumerable propertiesã€‚ä¾‹å¦‚ï¼š\n```\nconst imageData = new ImageData(200, 100);\n// ImageData { width: 200, height: 100, data: Uint8ClampedArray[80000] }\nconst result = {...imageData}\n// result åªä¼šåŒ…å« data ï¼Œä¸èƒ½å–åˆ° width å’Œ height\n```\n\n\n#### 2019/8/24\né¿å…ç»„ä»¶é‡æ–°æŒ‚è½½ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶çš„å½¢å¼ï¼š\n```\nclass BussinessProvider {\n  sp$ = new Subject<{url: string, slic: string}>();\n}\n\nclass Canvas {\n  componentDidMount() {\n     this.props.sp$.pipe(takeUntil(this.unmount$)).subscribe(ev => {\n        if (ev.url === this.url) {\n           this.handleSuperPixelChange(ev.slic)\n        }\n     })\n  }\n}\n```\n\n\n#### 2019/8/24\nä¸€ã€Promise\n```\nnew Promise((resolve,reject) => {\n  // do something...\n})\n\npromise.then(onFulfilled[, onRejected]);\npromise.then(value => {\n  // fulfillment\n}, reason => {\n  // rejection\n});\n\npromise.catch(onRejected);\npromise.catch(function(reason) {\n   // rejection\n});\n```\nç®€å•æ¥è¯´ï¼Œ`reject(value)` å¯ä»¥è¢« `promise.then` ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œä¹Ÿå¯ä»¥è¢« `promise.catch` æ•è·ã€‚å¦‚æœä¸¤è€…åŒæ—¶å­˜åœ¨ï¼Œä¼šè¢« `promise.then` ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œ`promise.catch` æ— è¾“å‡ºã€‚\n\nä¸‹è½½å›¾ç‰‡çš„å…¸å‹ä¾‹å­ï¼š\n```\nfunction loadImage(url) {\n  return new Promise((resolve, reject) => {\n    let img = new Image();\n    // img.onload = () => resolve(img)\n    img.addEventListener('load', e => resolve(img));\n    // img.onerror = () => reject(XXX)\n    img.addEventListener('error', () => {\n      reject(new Error(`Failed to load image's URL: ${url}`));\n    });\n    img.src = url;\n  });\n}\n\nloadImage('http://thecatapi.com/api/images/get?format=src&type=jpg&size=small')\n  .then(img => document.getElementById('image-holder').appendChild(img))\n  .catch(error => console.error(error));\n```\n\näºŒã€await\n`[rv] = await expression`:\n>TL;DR returns the fulfilled value of the promise, \nThe await expression causes async function execution to pause until a Promise is settled, that is fulfilled or rejected, and to resume execution of the async function after fulfillment. When resumed, the value of the await expression is that of the fulfilled Promise.\nIf the Promise is rejected, the await expression throws the rejected value.\nIf the value of the expression following the await operator is not a Promise, it's converted to a resolved Promise.\n\n\n#### 2019/8/23\n`String.prototype.localeCompare()`\n> return a number, indicating whether the reference string comes before, after or is the same as the compareString in sort order. Returns one of three values:\n-1: if the reference string is sorted before the compareString\n 0: if the two strings are equal\n 1: if the reference string is sorted after the compareString\n\n`Array.prototype.sort()`\n>  sorts the elements of an array in place and returns the sorted array. \n\n```\nitems.sort((a,b) => a.localeCompare(b))\n```\n\n\n#### 2019/8/21\nä»Šæ—¥é˜…è¯»ï¼š\n[What is the difference between â€œnpm installâ€ and â€œnpm ciâ€?](https://stackoverflow.com/questions/52499617/what-is-the-difference-between-npm-install-and-npm-ci)\n[Everything You Wanted To Know About package-lock.json But Were Too Afraid To Ask](https://medium.com/coinmonks/everything-you-wanted-to-know-about-package-lock-json-b81911aa8ab8)\n\n\n#### 2019/8/20\næ¨¡ä»¿ react hook `useState` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š\n&emsp;&emsp;å› ä¸ºåœ¨ jest æµ‹è¯•ä¸­æŸä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ `useState` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†™äº†ä¸€ä¸ªæ›¿ä»£ï¼Œä¸è¿‡ä¸ç¡®å®šæ˜¯å¦æœ‰é”™ã€‚ğŸ˜³\n```\n// for example\nconst [str,setStr] = useState<string[]>([]);\n\n// fake setStr\nlet str:string[] = [];\nconst setStr = (val: string[] | ((prev:string[]) => string[])) => {\n  if (typeof val === \"object\") {\n    str = val;\n  } else if (typeof val === \"function\") {\n    str = val(str)\n  }\n}\n```\n\n#### 2019/8/19\nä»Šæ—¥é˜…è¯»ï¼š[What is rel=noopener noreferrer link](https://searchenginelaws.com/seo/what-is-rel-noopener-noreferrer-tag/)\n&emsp;&emsp;ä½¿ç”¨ `a` æ ‡ç­¾ï¼Œä¸”å±æ€§ `target=\"_blank\"` æ—¶ï¼Œéœ€è¦åŠ ä¸Š `rel=\"noopener noreferrer\"` ã€‚å¯ä»¥é˜²æ­¢æ–°çª—å£åˆ©ç”¨ `window.opener` çš„ç‰¹æ€§çªƒå–åŸçª—å£ä¿¡æ¯ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœ window A æ‰“å¼€äº† window Bï¼Œé‚£ä¹ˆ B.opener ä¼šè¿”å› Aã€‚å¦‚æœåŠ ä¸Š `rel=\"noopener\"` ï¼Œä¼šè¿”å› null ã€‚\n\n\n#### 2019/8/12\nä¸€ã€download files using axios\n```\nimport axios from \"axios\"\n\naxios.get(url,{\n  responseType: 'blob', // important\n  headers: {\n    'Authorization': AuthStr \n  }\n}).then(resp => {\n  const {data} = resp;\n  const file = new File([data],\"data.txt\");\n  const objectURL = URL.createObjectURL(file);\n  const a = document.createElement(\"a\");\n  a.href = objectURL;\n  a.download = \"data.txt\";\n  a.click();\n  URL.revokeObjectURL(objectURL);\n})\n```\n&emsp;&emsp;å¦‚æœæ˜¯å•æ¬¡ç‚¹å‡»ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒChrome åªä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—ä¸‹è½½æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥åŠ ä¸Š `setTimeout` ï¼Œè§¦å‘å¤šæ¬¡ä¸‹è½½ï¼Œæˆ–æ˜¯åŠ ä¸Š `a.target = \"_blank\"` ï¼Œæ‰“å¼€å¤šä¸ªæ–°çª—å£ã€‚\näºŒã€curl\næŸ¥çœ‹å‘½ä»¤ï¼š\n`curl --help`\n-H æŒ‡å®šHeaderï¼š\n`curl -H \"Authorization: XXXXXXXX\" URL`\n`curl POST -d data -H \"Authorization: XXXXXXXX\" URL`\n\n\n#### 2019/8/9\nä¸€ã€[useRef vs useState: Should we re-render or not?](https://www.codebeast.dev/usestate-vs-useref-re-render-or-not/)\n![FE_20190808](FE_20190809.png)\näºŒã€Hooks ç›‘å¬é”®ç›˜äº‹ä»¶\nkeyCode: https://keycode.info/\n```\nfunction useKeyPress(targetKey) {\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  }, []);\n\n  return keyPressed;\n}\n```\n\n\n#### 2019/8/8\n&emsp;&emsp;å·¥ç¨‹ä¸­ç»å¸¸ä¼šçœ‹åˆ° CI/CD çš„æ¦‚å¿µã€‚CI æŒ‡çš„æ˜¯æŒç»­é›†æˆï¼Œä¾§é‡äºç®€åŒ–å‘å¸ƒå‡†å¤‡å·¥ä½œçš„å®è·µï¼Œæ¯”å¦‚è‡ªåŠ¨æµ‹è¯•ï¼›CD æŒ‡çš„æ˜¯æŒç»­äº¤ä»˜ï¼Œæ„å‘³ç€ä¸ä»…è®©æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œè®©å‘å¸ƒæµç¨‹ä¹Ÿè‡ªåŠ¨åŒ–äº†ã€‚æ›´å¤šæ¦‚å¿µå¯¹æ¯”å¯ä»¥å‚è€ƒï¼š[Continuous integration VS continuous delivery VS continuous deployment](https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment)\n&emsp;&emsp;ä¸‹é¢è¿™ä¸ªå›¾å¾ˆæ¸…æ™°åœ°æè¿°äº†ä¸‰è€…çš„ä¸åŒï¼š\n![FE_20190808](FE_20190808.png)\n&emsp;&emsp;åœ¨ gitlab ä¸Šçš„å®è·µå¯ä»¥å‚è€ƒï¼š[åŸºäº GitLab CI/CD çš„è‡ªåŠ¨åŒ–æ„å»ºã€å‘å¸ƒå®è·µ](https://mp.weixin.qq.com/s/z2f1i2FgrVGofQR6nKTd1A)\n\n#### 2019/8/7\nTypescript: [Discriminated Unions](https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions) \n&emsp;&emsp;å½“æˆ‘ä»¬æŸä¸ªå‚æ•°å¯èƒ½æœ‰å¤šä¸ªç±»å‹ï¼Œè€Œè¿™äº›ç±»å‹ä¸­åˆæœ‰å…¬å…±çš„å±æ€§æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼çº¦æŸã€‚\n```\n// Each interface has a kind property with a different string literal type. \n// The kind property is called the discriminant or tag. \ninterface Square {\n    kind: \"square\";\n    size: number;\n}\ninterface Rectangle {\n    kind: \"rectangle\";\n    width: number;\n    height: number;\n}\ninterface Circle {\n    kind: \"circle\";\n    radius: number;\n}\n\n// put the interfaces into a union\ntype Shape = Square | Rectangle | Circle;\n\n// use the discriminated union\nfunction area(s: Shape) {\n    switch (s.kind) {\n        case \"square\": return s.size * s.size;\n        case \"rectangle\": return s.height * s.width;\n        case \"circle\": return Math.PI * s.radius ** 2;\n        default: return assertNever(s); // error here if there are missing cases\n    }\n}\n\n// Exhaustiveness checking \nfunction assertNever(x: never): never {\n    throw new Error(\"Unexpected object: \" + x);\n}\n```\n\n\n#### 2019/8/6\nStack Overflow: [useState set method not reflecting change immediately.](https://stackoverflow.com/questions/54069253/usestate-set-method-not-reflecting-change-immediately)\n&emsp;&emsp;ä»Šå¤©åœ¨å®è·µä¸­å‘ç°ï¼Œ`setState` åé©¬ä¸Šæ‰“å°ï¼Œå¹¶ä¸ä¼šå–åˆ°æ›´æ–°åçš„å€¼ã€‚æŸ¥é˜…èµ„æ–™åå‘ç°è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ›´æ–°ï¼Œä½†ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚å¦‚ä¸‹ï¼š\n![FE_20190806](FE_20190806.png)\n\n\n#### 2019/8/1\nä¸€ã€[Fetch API](https://javascript.info/fetch-api)\n&emsp;&emsp;ç”¨ fetch æ¥è¯·æ±‚ç½‘ç»œèµ„æºï¼Œå¯ä»¥é…ç½®ä¸åŒçš„å‚æ•°æ¥è§£å†³ç¼“å­˜ã€è·¨åŸŸç­‰é—®é¢˜ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š\n```\n// ä¸ç¼“å­˜è¯·æ±‚ç»“æœ \n// https://stackoverflow.com/questions/29246444/fetch-how-do-you-make-a-non-cached-request\nconst headers = new Headers();\nheaders.append(\"pragma\", \"no-cache\");\nheaders.append(\"cache-control\", \"no-store\");\n\n// å®Œå…¨å¿½ç•¥ http-cache ï¼Œæ¯æ¬¡éƒ½ä»æœåŠ¡å™¨è¯·æ±‚æ•°æ®\n// https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\nconst cache: RequestCache = \"no-store\";\n\n// è¯·æ±‚æ¨¡å¼ï¼Œè‹¥æœ‰çš„è¯·æ±‚ä¼šå› ä¸º cors è€Œå¤±è´¥ï¼Œå¯ä»¥è®¾ç½®ä¸º \"no-cors\"\n// https://developer.mozilla.org/en-US/docs/Web/API/Request/mode\nconst mode: RequestMode = needCors ? \"cors\" : \"no-cors\";\n\nawait fetch(url. {headers, cache, mode})\n  .then(res => res.blob())\n  .then(blob => {\n    // doSomething with blob\n    const url = URL.createObjectURL(blob)\n    let a = document.createElement('a')\n    a.download = 'example.zip'\n    a.href = url\n    document.body.appendChild(a)\n    a.click()\n    document.body.removeChild(a)\n  })\n  .catch(err => {\n    console.log(err)\n  })\n  .finally(() => {\n    // doSomething\n  })\n```\n&emsp;&emsp;å…³äº `res.blob()` ï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹ä¸Š[è°ˆä¸€è°ˆ Fetch API ä¸­çš„ â€œres.blob()â€](https://zhuanlan.zhihu.com/p/32909043)ï¼›ä¹Ÿå¯ä»¥å‚è€ƒ [fetch documentation](https://github.github.io/fetch/) ï¼Œè¿™ä¸€ç¯‡æ¯”è¾ƒè¯¦ç»†ï¼Œä¹Ÿæä¾›äº†è¾ƒå¤šå…¶ä»–çš„ä¾‹å­ã€‚\nå…³äºæµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼ŒMedium ä¸Šè¿™ç¯‡ [A Web Developerâ€™s Guide to Browser Caching](https://medium.com/@codebyamir/a-web-developers-guide-to-browser-caching-cc41f3b73e7c) å†™å¾—ä¸é”™ã€‚å¦‚æœå­˜åœ¨ä»£ç†æœåŠ¡å™¨ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®äº† `mode: 'no-store'` ï¼Œä»£ç†æœåŠ¡å™¨ä¹Ÿä¼šç¼“å­˜ã€‚ä¸ºäº†é¿å…è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡å‘é€è¯·æ±‚æ—¶æ„é€ æ–°çš„ URL ï¼ŒåŠ ä¸Šæ—¶é—´æˆ³ `?t=Date.now()` ã€‚ğŸ®ğŸº\näºŒã€Jest\n&emsp;&emsp;æˆ‘ä»¬åœ¨ä½¿ç”¨ jest æµ‹è¯•æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å¼•å…¥ä¸€äº›å¤–éƒ¨æ–‡ä»¶/å¤–éƒ¨å˜é‡ï¼Œå¦‚ä» `config.json` æ–‡ä»¶ä¸­å¼•å…¥æŸä¸ªå˜é‡ã€‚ä¸ºäº†åœ¨æµ‹è¯•æ–‡ä»¶ä¸­å¯ä»¥è®¿é—®åˆ°è¯¥å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `jest.config.js` ä¸­é…ç½®å…¨å±€å˜é‡ï¼š\n```\nmodule.exports = {\n  globals: {\n    API_BASE: \"\",\n    DATA_API: \"\",\n    TRACK_API: \"\"\n  },\n  setupFiles: [\"./jestSetup.ts\"]\n}\n```\n&emsp;&emsp;ç”±äº `globals` åªæ”¯æŒ JSON æ ¼å¼çš„å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®šä¹‰å…¨å±€å‡½æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ `setupFiles`ã€‚\n```\n// jestSetup.ts\n(global as any).fn= () => {};\n(global as any).variable = \"XXX\";\n```\n\n\n#### 2019/7/31\n1ï¼‰`position: fixed` å’Œ flex å¸ƒå±€æ˜¯ä¸èƒ½åŒæ—¶èµ·ä½œç”¨çš„ã€‚ç»å¯¹å¸ƒå±€è„±ç¦»æ–‡æ¡£æµï¼Œä¸ä¼šå‚ä¸åˆ° flex layout ä¸­ã€‚å¦‚æœæƒ³å®ç°å·¦ä¾§èœå•æ ï¼Œå³ä¾§å†…å®¹ï¼Œä¸¤è€…ä¸åŒæ—¶æ»šåŠ¨ï¼ˆèœå•æ  fixedï¼‰ï¼Œä½†èœå•æ çš„å¤§å°å¯ä»¥æ”¹å˜ï¼ˆflex çˆ¶å¸ƒå±€ï¼‰ã€‚å¯ä»¥è®©çˆ¶å®¹å™¨æ˜¯ flex å¸ƒå±€ï¼Œå·¦ä¾§èœå•æ å’Œå³ä¾§å†…å®¹åŒºåŸŸéƒ½æ˜¯ flex element ï¼Œ èœå•æ å†…éƒ¨å†æœ‰ä¸€ä¸ª `position: fixed` çš„ div ã€‚\n2ï¼‰å¦‚æœæƒ³è®© `position: fixed` çš„å…ƒç´ ç›¸å¯¹çˆ¶å®¹å™¨å®šä½ï¼Œå¯ä»¥ç»™çˆ¶å®¹å™¨å¢åŠ  CSS å±æ€§ `transform: translate(0,0)` ã€‚å‚è€ƒï¼š[MDN - position](https://developer.mozilla.org/en-US/docs/Web/CSS/position)\n> fixed: It is positioned relative to the initial containing block established by the viewport, except when one of its ancestors has a transform, perspective, or filter property set to something other than none. \n\n\n#### 2019/7/30\n`useEffect` ä¸­çš„å¼‚æ­¥è¯·æ±‚ï¼š\n```\n// é”™è¯¯å†™æ³•ï¼Œ return å¿…é¡»æ˜¯ cleanup function\nuseEffect(async () => {\n  const newVal = await asyncCall();\n  setVal(newVal);\n});\n\n// æ­£ç¡®å†™æ³•\nuseEffect(() => {\n  asyncCall().then(resp => setVal(resp.data));\n});\n```\nå¥½æ–‡å…±äº«ï¼š[How to fetch data with React Hooks?](https://www.robinwieruch.de/react-hooks-fetch-data/)ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```\nuseEffect(() => {\n  async function fetchMyAPI() {\n    let url = 'http://something/' + productId;\n    let config = {};\n    const response = await myFetch(url);\n    console.log(response);\n  }  \n\n  fetchMyAPI();\n}, [productId]);\n```\nå¦‚æœè¦ä¿è¯è¯·æ±‚æŒ‰é¡ºåºå‘å‡ºï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹å†™æ³•ï¼š\n```\nuseEffect(() => {\n  let didCancel = false;\n\n  async function fetchMyAPI() {\n    let url = 'http://something/' + productId;\n    let config = {};\n    const response = await myFetch(url);\n    if (!didCancel) { // Ignore if we started fetching something else\n      console.log(response);\n    } \n  }  \n\n  fetchMyAPI();\n  return () => { didCancel = true; }; // Remember if we start fetching something else\n}, [productId]);\n```\n\n\n#### 2019/7/29\nä¸€ã€[performance.now() vs Date.now()](https://stackoverflow.com/questions/30795525/performance-now-vs-date-now)\n&emsp;&emsp;åœ¨ç¨‹åºä¸­æ‰“å°æ‰§è¡Œæ—¶é—´æ—¶ï¼Œä½¿ç”¨ `performance.now(ï¼‰` æ›´å‡†ç¡®ã€‚\n```\nconst start = performance.now();\ndoSomething();\nconst end = performance.now();\nconsole.log(\"Call to doSomething took \" + (start - end) + \" milliseconds.\");\n```\näºŒã€[Does javascript slice method return a shallow copy?](https://stackoverflow.com/questions/47738344/does-javascript-slice-method-return-a-shallow-copy)\n&emsp;&emsp;mdn ä¸Šå¯¹ `slice()` æ–¹æ³•çš„ä»‹ç»ï¼š\n>The slice() method returns a shallow copy of a portion of an array into a new array object selected from begin to end (end not included) where begin and end represent the index of items in that array. The original array will not be modified.\n\n&emsp;&emsp;æ³¨æ„è¿™é‡Œçš„æµ…å¤åˆ¶æŒ‡çš„æ˜¯å¯¹æ•°ç»„ä¸­å€¼çš„æµ…å¤åˆ¶ï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªæ•°ç»„çš„æµ…å¤åˆ¶ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ™ä¿®æ”¹æ–°æ•°ç»„æ—¶ï¼ŒåŸæ•°ç»„ä¸ä¼šæ”¹å˜ï¼›å¦‚æœæ˜¯å¯¹è±¡æ•°ç»„ï¼Œä¿®æ”¹æ–°æ•°ç»„å¯¹è±¡å€¼æ—¶ï¼ŒåŸæ•°ç»„ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚\n```\nconst animals = [{name: 'ant'}, {name: 'bison'}, {name: 'camel'}];\nconst newAnimals = animals.slice(2);\n\nnewAnimals[0].name = 'aaa';\nconsole.log(newAnimals); // [{name: 'aaa'}]\nconsole.log(animals);    // [{name: 'ant'}, {name: 'bison'}, {name: 'aaa'}]\n```\n&emsp;&emsp;æ³¨æ„å¦‚æœæ˜¯é‡æ–°èµ‹å€¼ï¼Œåˆ™ç­‰äºé‡æ–°åˆ†é…ç©ºé—´ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚\n```\nconst animals = [{name: 'ant'}, {name: 'bison'}, {name: 'camel'}];\nconst newAnimals = animals.slice(2);\n\nnewAnimals[0] = {name: 'aaa'};\nconsole.log(newAnimals); // [{name: 'aaa'}]\nconsole.log(animals);    // [{name: 'ant'}, {name: 'bison'}, {name: 'camel'}]\n```\n\n#### 2019/7/26\n&emsp;&emsp;åº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦è¯·æ±‚å¹¶æ›´æ–°èœå•æ ä¸­ä»»åŠ¡çš„çŠ¶æ€ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚å®Œæˆç«‹é©¬æ›´æ–°ä¼šå¯¼è‡´ React é¢‘ç¹åˆ·æ–°ï¼Œéœ€è¦ç¼“å†²æ‰¹å¤„ç†ï¼š\n```\nimport { runInAction } from \"mobx\";\n\nlet handlers: Array<() => void> = [];\nconst runHandlers = () => {\n  runInAction(() => {\n    handlers.forEach(f => f());\n    handlers = [];\n  });\n};\n\nfor (const task of tasks) {\n  const {data} = await requestFn();\n  \n  handlers.push(() => {\n    // deal with data, update state\n    ...\n  });\n\n  if(handlers.length > 30) {\n    runHandlers();\n  }\n}\n\nrunHandlers();\n```\n&emsp;&emsp;ä¸Šè¿°ä»£ç ä¸»è¦æ˜¯åˆ©ç”¨äº†è‡ªå®šä¹‰çš„ `handlers` æ¥æš‚å­˜çŠ¶æ€æ›´æ–°å‡½æ•°ï¼Œä¹‹åä½¿ç”¨ mobx æä¾›çš„ `runInAction` æ‰§è¡Œå‡½æ•°å¹¶æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çŠ¶æ€éƒ½éœ€è¦ä½¿ç”¨ `action` å‡½æ•°ï¼Œ `runInAction` æ¥å—ä¸€ä¸ªä»£ç å—å¹¶åœ¨ä¸€ä¸ª(åŒ¿å)æ“ä½œä¸­æ‰§è¡Œï¼Œæœ‰åˆ©äºåŠ¨æ€åˆ›å»ºå’Œæ‰§è¡Œæ“ä½œï¼Œ`runInAction(f) = action(f)()`ã€‚æ­¤å¤–ï¼Œå¿…è¦æ—¶è¿˜å¯åŠ ä¸Š `lodash.memoize(func,[resolver])`ï¼Œè®°å½•ä¸»å‡½æ•°è¯·æ±‚ç»“æœã€‚\n> For one-time-actions runInAction(name?, fn) can be used, which is sugar for action(name, fn)()\n\n\n#### 2019/7/18 \nä¸€ã€ç¼–ç¨‹æ¨¡å¼ï¼š\n&emsp;&emsp; é¦–å…ˆå…ˆè®°ä½è¿™å‡ ç§ç¼–ç¨‹æ¨¡å¼çš„ä¸­æ–‡ï¼šImperative Programming æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ï¼ŒDeclarative Programming æ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼ŒReactive Programming æ˜¯å“åº”å¼ç¼–ç¨‹ã€‚ï¼ˆæµä¸‹äº†è‹±æ–‡ä¸å¥½çš„æ³ªæ°´ï¼‰\n1ï¼‰å…ˆçœ‹å‘½ä»¤å¼ç¼–ç¨‹å’Œå£°æ˜å¼ç¼–ç¨‹çš„åŒºåˆ«ï¼Œç›´æ¥ä¸Šä»£ç ï¼š\n```\n// å‘½ä»¤å¼ç¼–ç¨‹ imperative programming\nconst array = [0,1,2,3,4,5];\nconst output = [];\nfor (let i = 0; i < array.length; i++) {\n  const tmp = array[i] * 2;\n  output.push(tmp)\n};\nconsole.log(output) // => [0,2,4,6,8,10]\n```\n```\n// å£°æ˜å¼ç¼–ç¨‹ declarative programming\nconst array = [0,1,2,3,4,5];\nconst output = array.map(item => item * 2);\nconsole.log(output) // => [0,2,3,6,8,10]\n```\n&emsp;&emsp;å¾ˆæ˜æ˜¾å¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº how ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥æ­¥å‘Šè¯‰æœºå™¨æ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Œå‘Šè¯‰ä»–æ€ä¹ˆå»éå†ä¸€ä¸ªæ•°ç»„ï¼Œæ€ä¹ˆå»è¿ç®—å¾—åˆ°æœ€åçš„ç»“æœï¼Œæ€ä¹ˆå»è¾“å‡ºï¼›å£°æ˜å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº what ï¼Œæˆ‘ä»¬åªå…³æ³¨æœ€åçš„ç»“æœï¼Œç”±æœºå™¨è‡ªå·±å»æ‘¸ç´¢è¿‡ç¨‹ï¼Œå¦‚ç›´æ¥è°ƒç”¨ `map` å‡½æ•°ï¼Œåªå‘Šè¯‰ç¨‹åºæˆ‘ä»¬éœ€è¦ä¸€ä¸ª2å€è¾“å‡ºã€‚\n2ï¼‰æ¥ç€çœ‹å£°æ˜å¼ç¼–ç¨‹å’Œå“åº”å¼ç¼–ç¨‹çš„å¯¹æ¯”\n&emsp;&emsp;å¯ä»¥é˜…è¯»ï¼š[Imperative vs Reactive](https://codepen.io/HunorMarton/post/imperative-vs-reactive)ï¼Œè§£é‡Šå¾ˆæ¸…æ™°ï¼Œæ¯”å–»ä¹Ÿå¾ˆå½¢è±¡ï¼Œä½†æˆ‘è§‰å¾—æ–‡ç« é‡Œçš„ Imperative åº”è¯¥æ”¹æˆ Declarative æ¯”è¾ƒå‡†ç¡®ã€‚ç»§ç»­æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œä¿®æ”¹ä¸€ä¸‹å£°æ˜å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š\n```\n// å£°æ˜å¼ç¼–ç¨‹ declarative programming\nconst array = [1,2];\nconst output = array.map(item => item * 2);\noutput.forEach(item => console.log(item)) // => 2 4\narray.push(3);  // => no output \narray.push(4);  // => no output\n```\nå“åº”å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š\n```\nimport { Subject } from `rxjs`;\nlet array = new Subject();\narray.next(1);\narray.next(2);\n\nconst output = array.map(item => item * 2);\noutput.forEach(item => console.log(item)); // => 2 4\n\narray.next(3); // => 6\narray.next(4); // => 8\n```\n&emsp;&emsp;é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹å¼ä¸­çš„ `map` ï¼Œ `forEach` ç­‰å‡½æ•°å¹¶ä¸æ˜¯ä¸€æ ·çš„ï¼Œå†…éƒ¨å®ç°æœºåˆ¶æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°åŒºåˆ«ï¼šåœ¨å£°æ˜å¼ç¼–ç¨‹ä¸­ï¼Œå¦‚æœåœ¨æœ€åå‘åŸæ•°ç»„æ·»åŠ å€¼ï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºæ¥ï¼Œå› ä¸ºè¿™æ˜¯åœ¨ `console.log` è¯­å¥æ‰§è¡Œåå‘ç”Ÿçš„ã€‚ä½†åœ¨å“åº”å¼ç¼–ç¨‹é‡Œï¼Œä»»ä½•å˜åŒ–éƒ½å¯ä»¥è¢«ååº”å‡ºæ¥ï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ª**å¼‚æ­¥æ•°æ®æµ**ï¼ˆasynchronous data streamsï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥éšæ—¶åˆ›å»ºã€æ›´æ”¹æˆ–ç»„åˆè¿™äº›æ•°æ®æµï¼Œæ‰€ä»¥æ‰“å°äº‹ä»¶æ˜¯ä¸€ä¸ª continuous observation caseã€‚\näºŒã€ç±»åº“\n[react-virtualized](https://github.com/bvaughn/react-virtualized) çš„è½»é‡çº§ç‰ˆ [react-window](https://github.com/bvaughn/react-window)ï¼Œç”¨äºé«˜æ•ˆæ¸²æŸ“é•¿åˆ—è¡¨ã€‚\n\n\n#### 2019/7/17 \n&emsp;&emsp;å¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éœ€è¦è¯·æ±‚å¾ˆå¤šå›¾ç‰‡ï¼Œæƒ³è¦å®ç°è¯·æ±‚å‡ºé”™æ—¶ç»§ç»­å‘é€è¯·æ±‚ï¼ŒæˆåŠŸæ—¶è¿”å›æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ `Promise` ï¼š\n```\nfunction fetchURL(url: string):Promise<Blob> {\n  return Axios.get(url, {responeType: \"blob\"})\n              .then( resp => Promise.resolve(resp.data) )\n              .catch( () => fetchURL(url) )\n}\n```\nä¹‹åå¯ä»¥ä½¿ç”¨ `rxjs` ï¼š\n```\nimport { mergeMap, bufferTime, takeUntil } from \"rxjs/operators\";\n\n[url1,...,url10]\n  .pipe(\n    mergeMap( url => fetchURL(url).then( val => val )),\n    bufferTime(10000)\n  )\n  .subscribe({\n    next: resps => {\n      // do sth with resps:Blob[]\n    }\n  })\n```\n&emsp;&emsp;æ¯æ¬¡é‡åˆ° `rxjs` éƒ½å¾ˆå¤´å¤§ï¼Œç°åœ¨ä¹Ÿæ²¡æœ‰å‘ç°ä¸€ä¸ªæ¯”è¾ƒå®Œå–„æ¸…æ™°çš„æ•™ç¨‹ï¼Œä½†å®ƒåˆçœŸçš„å¾ˆå¼ºå¤§ï¼Œåç»­è¦å¼€ä¸“é¢˜å¥½å¥½å­¦ä¹ è®°å½•è¿™ä¸ªä¸œè¥¿ã€‚\n\n\n#### 2019/7/16\nä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š[How to read an often-changing value from useCallback?](https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback)\nç›´æ¥ä¸Šå®˜ç½‘ä»£ç ï¼š\n```\nfunction Form() {\n  const [text, updateText] = useState('');\n  const textRef = useRef();\n\n  useEffect(() => {\n    textRef.current = text; // Write it to the ref\n  });\n\n  const handleSubmit = useCallback(() => {\n    const currentText = textRef.current; // Read it from the ref\n    alert(currentText);\n  }, [textRef]); // Don't recreate handleSubmit like [text] would do\n\n  return (\n    <>\n      <input value={text} onChange={e => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n```\n&emsp;&emsp; ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ `text` çš„å€¼ç»å¸¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³ä½¿ `handleSubmit` ç”¨ `useCallback` åŒ…è£¹äº†ï¼Œè¿˜æ˜¯ä¼šé‡æ–°å£°æ˜ã€‚è§£å†³åŠæ³•æ˜¯ä¼ å…¥ä¸€ä¸ª `ref` å¯¹è±¡ä»£æ›¿åŸå§‹å€¼ã€‚ä¹Ÿå¯ä»¥å†™ä¸€ä¸ª custom hook ï¼š\n1ï¼‰å®˜ç½‘çš„ç‰ˆæœ¬ï¼š\n```\nfunction useEventCallback(fn, dependencies) {\n  const ref = useRef(() => {\n    throw new Error('Cannot call an event handler while rendering.');\n  });\n\n  useEffect(() => {\n    ref.current = fn;\n  }, [fn, ...dependencies]);\n\n  return useCallback(() => {\n    const fn = ref.current;\n    return fn();\n  }, [ref]);\n}\n```\nå®é™…ä½¿ç”¨ï¼š\n```\nfunction Form() {\n  const [text, updateText] = useState('');\n  // Will be memoized even if `text` changes:\n  const handleSubmit = useEventCallback(() => {\n    alert(text);\n  }, [text]);\n\n  return (\n    <>\n      <input value={text} onChange={e => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n```\n2ï¼‰å¯¼å¸ˆçš„ç‰ˆæœ¬ï¼šï¼ˆä»–æ¥äº†ï¼Œä»–å¸¦ç€ä»£ç åˆæ¥äº†ï¼‰\n```\n/**\n * @param callback\n * @param oRefs\n */\nexport function useCallbackWithRefs<\n  Refs,\n  Callback extends (...args: any[]) => void\n>(callback: (refs: Refs) => Callback, oRefs: Refs) {\n  const refs = useRef(oRefs);\n  useEffect(\n    () => {\n      refs.current = oRefs;\n    },\n    [oRefs]\n  );\n\n  return useCallback(\n    (...args: any[]) => callback(refs.current)(...args),\n    []\n  ) as Callback;\n}\n```\nå®é™…ä½¿ç”¨ï¼š\n```\nfunction Form() {\n  const [text, updateText] = useState('');\n  \n  // åŸå…ˆçš„ callback ä¹Ÿå¯ä»¥æœ‰å‚æ•°\n  const handleSubmit = useCallbackWithRefs(\n    refs => (params: any) => {\n      // è¦æ³¨æ„åœ¨å‡½æ•°å†…å¿…é¡»ä½¿ç”¨ `refs.xxx`ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä»»ä½•å˜é‡ `xxx`\n      console.log(refs.text);\n  }, {text});\n\n  return (\n    <>\n      <input value={text} onChange={e => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n```\n&emsp;&emsp;æ€»çš„æ¥è¯´ï¼Œå®˜ç½‘çš„å®ç°æ˜¯å°† `callback` ä½œä¸º `ref` å¯¹è±¡ï¼Œå¹¶ä½œä¸º `useCallback` çš„ä¾èµ–ï¼Œä¸ä¼šé¢‘ç¹æ”¹å˜ï¼›å¦‚æœåœ¨å‡½æ•° `handleSubmit` ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ `text` ï¼Œç›´æ¥ä½¿ç”¨ `test` å³å¯ã€‚ç¬¬äºŒç§å®ç°æ–¹å¼æ˜¯æŠŠç»å¸¸å˜åŒ–çš„å€¼ä½œä¸º `ref` å¯¹è±¡ï¼Œè¿”å›å€¼ `useCallback` ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `refs => callback` ï¼Œä¾èµ–æ˜¯ç©ºæ•°ç»„ï¼›è¿™æ—¶å¦‚æœè¦åœ¨å‡½æ•° `handleSubmit` ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ `text` ï¼Œå¿…é¡»ä½¿ç”¨ `refs.test` ï¼Œå¦åˆ™è®¿é—®çš„åªæ˜¯ `test` çš„åˆå§‹å€¼ã€‚\n&emsp;&emsp;React åšå¤§ç²¾æ·±ï¼Œæ¥ä¸‹æ¥è¦å¥½å¥½ç ”è¯»ä¸€ä¸‹è¿™ä¸ª [FAQ](https://reactjs.org/docs/hooks-faq.html)ã€‚\näºŒã€ä»Šæ—¥ç½‘å€\n&emsp;&emsp;ä¸€ä¸ª [emoji copy](https://www.emojicopy.com/) ç½‘ç«™ï¼Œæˆ‘ä»¬ ğŸ‘§ å°±æ˜¯å–œæ¬¢è¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ã€‚\n\n\n#### 2019/7/15\n&emsp;&emsp;ä»Šå¤©åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ React Hooks åˆè¸©å‘äº†ï¼Œçœ‹æ¥è‡ªå·±å¯¹è¿™éƒ¨åˆ†è¿˜æ˜¯æ²¡æœ‰ç†è§£é€å½»ã€‚åœ¨ä½¿ç”¨ `useCallback` å’Œ `useEffect` æ—¶ï¼Œè¦æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥çš„ `[deps]`ã€‚å¦‚æœä½¿ç”¨ `useCallback(fn,[deps])` ï¼Œ `[deps]` åº”è¯¥åŒ…å«å‡½æ•° `fn` æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼›å¦‚æœä½¿ç”¨ `useEffect(fn,[deps])` ï¼Œ å½“ `deps` çš„å€¼å˜åŒ–æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ `fn`ï¼Œå› æ­¤`[deps]` ä¸ä¸€å®šè¦åŒ…å«å‡½æ•° `fn` æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼Œè€Œæ˜¯åº”è¯¥ä¼ å…¥ä¼šå¼•èµ·è¯¥å‡½æ•°æ‰§è¡Œçš„é‚£äº›å‚æ•°ã€‚\n&emsp;&emsp;ä»Šæ—¥è¸©å‘è®°å½•ï¼šä¸ºäº†ä¼˜åŒ–å­ç»„ä»¶ï¼Œä½œä¸º `props` çš„å‡½æ•°éƒ½ä½¿ç”¨ `useCallback` åŒ…è£¹äº†ï¼Œå¹¶ä¼ å…¥äº†ç©ºæ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ã€‚ä½†æ˜¯å‡½æ•°ä¸­çš„è¿ç®—éœ€è¦ç”¨åˆ°ç»„ä»¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœæ²¡æœ‰å°†è¯¥å˜é‡ä½œä¸º `deps` ï¼Œè¿™ä¸ªå˜é‡å°±ä¼šä¸€ç›´ä¿æŒåˆå§‹å€¼ï¼Œå€¼å¹¶ä¸ä¼šæ”¹å˜ï¼Œè¿è¡Œç»“æœå°±ä¼šä¸é¢„æœŸä¸ç¬¦ã€‚ï¼ˆçœŸçš„å¤ªè ¢äº†ï¼Œç¼“ç¼“èººå€’ï¼‰\n\n\n#### 2019/7/14\nå‘¨æœ«å½“ç„¶æ˜¯çº¦ä¼šå•¦ã€‚ğŸ˜\n\n\n#### 2019/7/13\nä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š[How to compare oldValues and newValues on React Hooks useEffect?](https://stackoverflow.com/questions/53446020/how-to-compare-oldvalues-and-newvalues-on-react-hooks-useeffect)\n&emsp;&emsp; React class ç»„ä»¶æä¾›äº† `ComponentDidUpdate` ä¹‹ç±»çš„æ–¹æ³•æ¥è·å–åˆ°å½“å‰ `props` å’Œå‰ä¸€ä¸ª `props` ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒï¼Œå†³å®šæ˜¯å¦è¿›è¡Œæ›´æ–°ã€‚å‡½æ•°å¼ç»„ä»¶åªæœ‰ `useEffect` å‡½æ•°æ¥æ¨¡ä»¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–ç»„ä»¶å…ˆå‰çš„ `props` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ custom hook ï¼š\n```\nfunction usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n```\n&emsp;&emsp;ä¹‹ååœ¨ `useEffect` ä¸­ä½¿ç”¨ä¸Šé¢çš„å‡½æ•°æ¥æ¨¡æ‹Ÿ `ComponentDidUpdate` ï¼š\n```\nconst Component = (props) => {\n    const {receiveAmount, sendAmount } = props\n    const prevAmount = usePrevious({receiveAmount, sendAmount});\n    useEffect(() => {\n        if(prevAmount.receiveAmount !== receiveAmount) {\n\n         // process here\n        }\n        if(prevAmount.sendAmount !== sendAmount) {\n\n         // process here\n        }\n    }, [receiveAmount, sendAmount])\n}\n```\n&emsp;&emsp;æœ‰æ—¶å€™åœ¨ debug æ—¶ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ç»„ä»¶ä¸ºä»€ä¹ˆä¼šé‡æ–°æ¸²æŸ“ï¼Œæ˜¯é‚£äº› `props` æ›´æ–°äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥è·å– `prevProps`ï¼Œå¹¶åœ¨å‡½æ•°ç»„ä»¶æœ€å¼€å§‹æ—¶å†™ä¸€ä¸ª `useEffect` å°†å‚æ•°éƒ½æ‰“å°å‡ºæ¥ï¼Œä½¿ç”¨ `===` æ¯”è¾ƒã€‚ \n\n\n\n#### 2019/7/12\nä¸€ã€ä»Šæ—¥æŠ€èƒ½\n&emsp;&emsp;é¡¹ç›®ä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ° JSON å­—ç¬¦ä¸²çš„è§£æï¼Œè§£æå‡ºé”™å°±æ‰‘è¡—äº†ï¼Œä¸€èˆ¬æ˜¯ç”¨ `try {...} catch {...}` åŒ…è£¹ã€‚ä»Šå¤©å¯¼å¸ˆåœ¨ code review æ—¶å»ºè®®æˆ‘ä½¿ç”¨å¦‚ä¸‹å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿå¯ä»¥è¦†ç›–ç©ºå­—ç¬¦ä¸²çš„æ£€æµ‹ï¼š\n```\nfunction safeJsonParse<T>(str): { ok: true, value: T } | { ok: false } {\n  try {\n    return {\n      ok: true,\n      value: JSON.parse(str)\n    }\n  } catch {\n    return {\n      ok: false\n    }\n  }\n}\n```\näºŒã€ä»Šæ—¥é˜…è¯»ï¼š[ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†](https://imweb.io/topic/5b72d4ef15554e6d3409f817)ã€‚\n&emsp;&emsp;è¿™ä¸€ç¯‡å¾ˆå¥½åœ°æ¢³ç†äº†è¿›ç¨‹ã€çº¿ç¨‹ã€æµè§ˆå™¨**å¤šè¿›ç¨‹**ã€æµè§ˆå™¨å†…æ ¸**å¤šçº¿ç¨‹**ã€JSå•çº¿ç¨‹ã€JSè¿è¡Œæœºåˆ¶çš„ç›¸å…³çŸ¥è¯†ï¼Œå¾ˆè¿è´¯ï¼Œå»ºè®®æ—¶ä¸æ—¶å›é¡¾ã€‚ç®€å•è®°å½•å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š\n1ï¼‰è¿›ç¨‹æ˜¯CPUèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½ã€‚ï¼ˆæƒ³å½“å¹´è€ƒæ“ä½œç³»ç»Ÿçš„æ—¶å€™è¿˜èƒŒå¾—æ»šç“œçƒ‚ç†Ÿï¼‰\n2ï¼‰**æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„**ï¼ŒåŒ…æ‹¬çš„ä¸»è¦è¿›ç¨‹æœ‰ï¼š\n- Browserè¿›ç¨‹ï¼ˆæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œåªæœ‰ä¸€ä¸ªï¼‰\n- æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼ŒRendererè¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰ï¼šé»˜è®¤æ¯ä¸ªTabä¸€ä¸ªè¿›ç¨‹\n- ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹\n- GPUè¿›ç¨‹ï¼š3Dç»˜åˆ¶\n\n3ï¼‰é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼Œå®ƒæ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸»è¦å¸¸é©»çº¿ç¨‹æœ‰ï¼š\n- GUIæ¸²æŸ“çº¿ç¨‹ï¼šæ¸²æŸ“é¡µé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ï¼Œrepaint å’Œ reflow ç­‰ã€‚\n- JSå¼•æ“çº¿ç¨‹ï¼šå¤„ç†ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸ GUI æ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚\n- äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šæ§åˆ¶äº‹ä»¶å¾ªç¯ï¼ŒæŠŠäº‹ä»¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æœ«å°¾ã€‚\n- å®šæ—¶è§¦å‘çº¿ç¨‹ï¼š`setTimeout` å’Œ `setInterval`ï¼ŒåŒæ ·ä¹Ÿæ˜¯è®¡æ—¶å®Œæ¯•åæ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾ã€‚\n- å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹\n\n4ï¼‰Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ä¹‹é—´æ˜¯éœ€è¦é€šä¿¡çš„\n5ï¼‰æ—¶é—´å¾ªç¯æœºåˆ¶ `Event Loop` ï¼šJSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡éƒ½ä¼šåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼›ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ä¸€ä¸ª**ä»»åŠ¡é˜Ÿåˆ—/äº‹ä»¶é˜Ÿåˆ—**ï¼Œå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œç»“æœä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸­æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°æ‰§è¡Œæ ˆä¸­å¼€å§‹æ‰§è¡Œã€‚ \n6ï¼‰è¿›é˜¶ï¼šmacrotask / task å’Œ microtask/ jobã€‚ES6ä¸­çš„ `Promise` å°±å±äº microtask å¾®ä»»åŠ¡ ï¼Œè€Œä¸»ä»£ç å—ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ—¶é—´å¦‚ `setTimeout` å’Œ `setInterval` å°±å±äº macrotask å®ä»»åŠ¡ã€‚æ€»ç»“çš„è¿è¡Œæœºåˆ¶å°±æ˜¯ï¼š\n- æ‰§è¡Œå®ä»»åŠ¡ã€‚ï¼ˆä»æ‰§è¡Œæ ˆä¸­è·å–ï¼Œå¦‚æœæ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰\n- æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ— Job Queues ä¸­ã€‚ï¼ˆä½œè€…çŒœæµ‹è¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“çº¿ç¨‹ç»´æŠ¤ï¼Œå› ä¸ºæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰\n- å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³ä¾æ¬¡æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰å¾®ä»»åŠ¡ã€‚\n- æ£€æŸ¥æ¸²æŸ“ï¼Œç”± GUI çº¿ç¨‹æ¥ç®¡ã€‚\n- æ¸²æŸ“å®Œæ¯•åï¼Œç”± JS å¼•æ“çº¿ç¨‹æ¥ç®¡ï¼Œä»æ—¶é—´é˜Ÿåˆ—ä¸­è·å–å¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚\n\n7ï¼‰åœ¨ç¬¬å…­ç‚¹ä¸­æåˆ°çš„æ˜¯ä¸€ä¸ªè¿›é˜¶çš„æ¦‚å¿µï¼Œå¯¹åº”ä¸€é“é¢˜ç›®ï¼Œå¦‚æœä»£ç ä¸­ä¾æ¬¡æœ‰ `setTimeout` å’Œ `Promise` ï¼Œæ˜¯ä¼šå…ˆæ‰“å°å‡º `Promise` çš„æ‰§è¡Œç»“æœçš„ã€‚\n\n\n#### 2019/7/11\n&emsp;&emsp; React 16.8 æå‡ºäº† `hook` çš„æ¦‚å¿µï¼Œå‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ã€‚ç°åœ¨çš„å·¥ä½œé¡¹ç›®å·²ç»æ‘’å¼ƒäº† `class` ï¼Œæ”¹ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œæ­£åœ¨æ…¢æ…¢æ‘¸ç´¢ä¸­ã€‚ä»Šå¤©åœ¨è…¾è®¯[IMWebå‰ç«¯åšå®¢](http://imweb.io/)ä¸­çœ‹åˆ°äº†ä¸¤ç¯‡ä»‹ç» `React hook` çš„æ–‡ç« ï¼Œå—ç›ŠåŒªæµ…ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚\n ä¸€ã€[react hookâ€”â€”ä½ å¯èƒ½ä¸æ˜¯â€œæˆ‘â€æ‰€è®¤è¯†çš„useEffect](https://imweb.io/topic/5cd845cadcd62f86299fcd76)\n&emsp;&emsp;è¿™ç¯‡ä»‹ç»äº† `useEffect` è¿™ä¸ªAPIï¼Œç”¨å®ƒæ¨¡æ‹Ÿäº†classç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚`useEffect` ç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼Œç›¸å½“äº `ComponentDidMount` å’Œ `ComponentDidUpdate`ã€‚è¯¥APIæœ‰ä¸¤ä¸ªå‚æ•°å’Œä¸€ä¸ªè¿”å›å€¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯æ¸…é™¤å‡½æ•°ï¼Œç›¸å½“äº `ComponentWillUnmount`ï¼Œæ¯ä¸€æ¬¡ `render` éƒ½ä¼šæ‰§è¡Œå‰¯ä½œç”¨å’Œæ¸…é™¤ä¸Šä¸€æ¬¡å‰¯ä½œç”¨ã€‚**ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥çš„æ˜¯å‰¯ä½œç”¨å‡½æ•°æ‰€éœ€è¦çš„ä¾èµ–ï¼Œå½“ä»»ä¸€ä¾èµ–æ›´æ–°æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å‰¯ä½œç”¨å¹¶æ‰§è¡Œï¼›å¦‚æœä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç›¸å½“äº `ComponentDidMount`ï¼›å¦‚æœä¸ä¼ ï¼Œå°±æ˜¯æ²¡æœ‰è¯´æ˜è‡ªå·±æœ‰æ²¡æœ‰ä¾èµ–ï¼ˆæ³¨æ„æ˜¯ä¸çŸ¥é“æœ‰æ²¡æœ‰ï¼Œä¸æ˜¯æ²¡æœ‰ï¼ï¼‰ï¼Œæ¯æ¬¡ `render` æ—¶å°±æ‰§è¡Œï¼Œç›¸å½“äº `ComponentDidUpdate` ã€‚**\n&emsp;&emsp; æœ€åè¿˜è®²äº† `useEffect` å’Œ `useLayoutEffect` çš„åŒºåˆ«ï¼Œç®€å•æ¥è¯´å‰è€…æ˜¯å¼‚æ­¥çš„ï¼Œåè€…æ˜¯åŒæ­¥çš„ã€‚è¿˜æ²¡å¥½å¥½æ·±å…¥è¿™éƒ¨åˆ†ï¼ŒTODOã€‚\näºŒã€[å¯èƒ½ä½ çš„reactå‡½æ•°ç»„ä»¶ä»æ¥æ²¡æœ‰ä¼˜åŒ–è¿‡](https://imweb.io/topic/5d1e3657f7b5692b080f2651)\n&emsp;&emsp;ä¼˜åŒ–é—®é¢˜çœŸæ˜¯æˆ‘ä¸€ä¸ªç—›ç‚¹ã€‚è¿™ç¯‡æ–‡ç« å¾ˆæ¸…æ¥šåœ°è§£é‡Šäº† `Hooks` ä¸€äº›å¯ç”¨äºç»„ä»¶ä¼˜åŒ–çš„APIã€‚å¼ºæ¨ï¼\n&emsp;&emsp; ç‰¹åˆ«åœ°ï¼Œæ–‡ç« ä»‹ç»äº†å½“å‡½æ•°ç»„ä»¶ä¸­ä¼ å…¥çš„ `props` å€¼ä¸ºå‡½æ•°æ—¶ï¼Œç”±äºæ¯ä¸€æ¬¡æ‰§è¡Œæˆ–é‡æ–°æ‰§è¡Œï¼Œä½œç”¨åŸŸé‡Œé¢ä¸€åˆ‡éƒ½æ˜¯é‡æ–°å¼€å§‹ï¼Œå‡½æ•°ä¸æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œä¸èƒ½ç”»ä¸Šç­‰å·ï¼Œå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜æ–‡ç« æå‡ºäº†å‡ ç§è§£å†³åŠæ³•ï¼š\n1ï¼‰ ä½œä¸º `props` çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å¤–å®šä¹‰ï¼Œå‡½æ•°ç»„ä»¶ç”¨ `React.memo()` åŒ…è£¹ã€‚\n &emsp;&emsp; `React.memo()` ç±»ä¼¼äº `PureComponent` å’Œ `ComponentDidUpdate` ï¼Œå¦‚æœå‡½æ•°ç»„ä»¶çš„ `props` å€¼éƒ½ä¸€æ ·ï¼Œå°±ä¼šè·³è¿‡è¯¥ç»„ä»¶çš„æ‰§è¡Œï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œå®ç°æ€§èƒ½ä¼˜åŒ–ã€‚\n2ï¼‰ ä½œä¸º `props` çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å†…å®šä¹‰ï¼Œä½¿ç”¨`useCallBack` æˆ– `useMemo`åŒ…è£¹ï¼Œå‡½æ•°ç»„ä»¶ç”¨ `React.memo()` åŒ…è£¹ã€‚\n&emsp;&emsp; `useCallback(() => {}, [deps])` è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ `deps` ä¸å˜æ—¶ï¼ˆå¦‚ä¼ å…¥ç©ºæ•°ç»„ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ï¼‰ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚`const a = useMemo(() => memorizeValue, [deps])`ï¼Œå½“ `deps` ä¸å˜æ—¶ï¼Œ`a` çš„å€¼è¿˜æ˜¯ä¸Šæ¬¡çš„ `memorizeValue`ï¼Œçœå»äº†é‡æ–°è®¡ç®—çš„è¿‡ç¨‹ã€‚\n&emsp;&emsp; æ³¨æ„å½“ `memorizeValue` æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ`useCallback(fn, inputs) <=> useMemo(() => fn, inputs)`ã€‚\n\n\n#### 2019/7/10\n&emsp;&emsp;ä»Šå¤©åœ¨é¡¹ç›®ä¸­æ¥è§¦åˆ°äº† `symbol`ï¼Œé‰´äºä¹‹å‰ä¸€ç›´æ²¡æœ‰æ³¨æ„è¿™ä¸ªæ•°æ®ç±»å‹ï¼Œåœ¨ä»Šå¤©è¡¥ä¸Šã€‚ `symbol` æ˜¯ ES6 æ–°å¢çš„**åŸºæœ¬**æ•°æ®ç±»å‹ã€‚å®ƒçš„ä½¿ç”¨å¦‚ä¸‹ï¼š\n```\nconst s1 = Symbol();\nconst s2 = Symbol();\nconsole.log(s1 === s2); // false\n\nconst s3 = new Symbol() // TypeError: Symbol is not a constructor\nSymbol(\"foo\") === Symbol(\"foo\"); // false\n```\n`Symbol()` è¿”å›çš„æ¯ä¸ª `symbol` å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚å®ƒæœ€å¸¸è¢«ç”¨äºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ï¼Œå¦‚ï¼š\n```\nconst obj = {}\nconst foo = Symbol(\"foo\")\nobj[foo] = \"foo\"\nobj.bar = \"bar\"\n\nconsole.log(obj); // { bar: \"bar\" , Symbol(foo): \"foo\"}\nconsole.log(foo in obj); // true\nconsole.log(obj[foo]); // foo\nconsole.log(Object.keys(obj)); // [\"bar\"]\nconsole.log(Object.getOwnPropertySymbols(obj)) // [Symbol(foo)]\n```\nä¹Ÿå°±æ˜¯è¯´ï¼Œ `Object.key()` ä¸ä¼šè¿”å› `symbol` å€¼ï¼ŒåŒç†ï¼Œ`Object.getOwnPropertyNames()`ã€`for..in`ã€`for...of` ä¹Ÿä¸ä¼šè¿”å›ã€‚`JSON.stringify()` ä¹Ÿä¼šå¿½ç•¥ï¼š\n```\nJSON.stringify({[Symbol('foo')]: 'foo'});                 \n// '{}'\n```\n`Symbol` è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ã€‚ `Symbol.for(key)` æ˜¯æ ¹æ®æŒ‡å®šçš„ `key` æœç´¢ç°æœ‰çš„ `symbol` å¹¶è¿”å›, å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šä½¿ç”¨ `key` åœ¨å…¨å±€çš„ `symbol` æ³¨å†Œè¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ `symbol` ã€‚`Symbol.keyFor(sym)` æ˜¯åœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­æ£€ç´¢ï¼Œè¿”å›å…±äº«çš„ `symbol key` ã€‚\n\n\n#### 2019/7/9\nä¸€ä¸ªä¸å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼šè®©å‡½æ•°åœ¨å†…éƒ¨è·å–è‡ªå·±æ‰€éœ€çš„ä¾èµ–ã€‚ä¾‹å¦‚ï¼š\n```\n// ä¸€ä¸ªå¯å¤ç”¨å‡½æ•°\nfunction doSomething(key: string) {\n    return (\n        <Button\n            loading = {key===\"str1\"? Compoment1 : Compoment2}\n        >\n            button\n        </Button>\n    )\n}\n```\n`lodaing` æ‰€éœ€çš„ç»„ä»¶åº”è¯¥æ˜¯ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥çš„ï¼Œä¸ç„¶å¦‚æœæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª `key`ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥äº†è¯¥åœ°æ–¹çš„ä¿®æ”¹ã€‚è¿™ä¸ªè§‚ç‚¹ç±»ä¼¼äºä¾èµ–åè½¬ã€‚","slug":"FrontEnd-Daily-Learning","published":1,"updated":"2019-12-08T08:32:53.615Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck5393irz0006icuer01dr8er","content":"<h4 id=\"å‰è¨€\">å‰è¨€</h4>\n<p>ğŸ“ recap and cheat sheet ï¼Œè®°å½•æ¯å¤©å­¦åˆ°çš„çŸ¥è¯†/æƒ³æ³•ã€‚<br>\nğŸ”Š æ¯æ—¥ä¸€é—®ï¼šä»Šå¤©ä½ æ¯”æ˜¨å¤©æ›´åšå­¦äº†å—ï¼Ÿ</p>\n<h4 id=\"2019825\">2019/8/25</h4>\n<p>ä»Šæ—¥è¸©å‘è®°å½•ï¼š<br>\nå±•å¼€è¯­æ³•ï¼ˆspread syntaxï¼‰åªèƒ½å–åˆ° enumerable propertiesã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const imageData = new ImageData(200, 100);</span><br><span class=\"line\">// ImageData &#123; width: 200, height: 100, data: Uint8ClampedArray[80000] &#125;</span><br><span class=\"line\">const result = &#123;...imageData&#125;</span><br><span class=\"line\">// result åªä¼šåŒ…å« data ï¼Œä¸èƒ½å–åˆ° width å’Œ height</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019824\">2019/8/24</h4>\n<p>é¿å…ç»„ä»¶é‡æ–°æŒ‚è½½ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶çš„å½¢å¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class BussinessProvider &#123;</span><br><span class=\"line\">  sp$ = new Subject&lt;&#123;url: string, slic: string&#125;&gt;();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Canvas &#123;</span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">     this.props.sp$.pipe(takeUntil(this.unmount$)).subscribe(ev =&gt; &#123;</span><br><span class=\"line\">        if (ev.url === this.url) &#123;</span><br><span class=\"line\">           this.handleSuperPixelChange(ev.slic)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019824\">2019/8/24</h4>\n<p>ä¸€ã€Promise</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">new Promise((resolve,reject) =&gt; &#123;</span><br><span class=\"line\">  // do something...</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">promise.then(onFulfilled[, onRejected]);</span><br><span class=\"line\">promise.then(value =&gt; &#123;</span><br><span class=\"line\">  // fulfillment</span><br><span class=\"line\">&#125;, reason =&gt; &#123;</span><br><span class=\"line\">  // rejection</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise.catch(onRejected);</span><br><span class=\"line\">promise.catch(function(reason) &#123;</span><br><span class=\"line\">   // rejection</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>ç®€å•æ¥è¯´ï¼Œ<code>reject(value)</code> å¯ä»¥è¢« <code>promise.then</code> ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œä¹Ÿå¯ä»¥è¢« <code>promise.catch</code> æ•è·ã€‚å¦‚æœä¸¤è€…åŒæ—¶å­˜åœ¨ï¼Œä¼šè¢« <code>promise.then</code> ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œ<code>promise.catch</code> æ— è¾“å‡ºã€‚</p>\n<p>ä¸‹è½½å›¾ç‰‡çš„å…¸å‹ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function loadImage(url) &#123;</span><br><span class=\"line\">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class=\"line\">    let img = new Image();</span><br><span class=\"line\">    // img.onload = () =&gt; resolve(img)</span><br><span class=\"line\">    img.addEventListener(&apos;load&apos;, e =&gt; resolve(img));</span><br><span class=\"line\">    // img.onerror = () =&gt; reject(XXX)</span><br><span class=\"line\">    img.addEventListener(&apos;error&apos;, () =&gt; &#123;</span><br><span class=\"line\">      reject(new Error(`Failed to load image&apos;s URL: $&#123;url&#125;`));</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    img.src = url;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">loadImage(&apos;http://thecatapi.com/api/images/get?format=src&amp;type=jpg&amp;size=small&apos;)</span><br><span class=\"line\">  .then(img =&gt; document.getElementById(&apos;image-holder&apos;).appendChild(img))</span><br><span class=\"line\">  .catch(error =&gt; console.error(error));</span><br></pre></td></tr></table></figure>\n<p>äºŒã€await<br>\n<code>[rv] = await expression</code>:</p>\n<blockquote>\n<p>TL;DR returns the fulfilled value of the promise,<br>\nThe await expression causes async function execution to pause until a Promise is settled, that is fulfilled or rejected, and to resume execution of the async function after fulfillment. When resumed, the value of the await expression is that of the fulfilled Promise.<br>\nIf the Promise is rejected, the await expression throws the rejected value.<br>\nIf the value of the expression following the await operator is not a Promise, itâ€™s converted to a resolved Promise.</p>\n</blockquote>\n<h4 id=\"2019823\">2019/8/23</h4>\n<p><code>String.prototype.localeCompare()</code></p>\n<blockquote>\n<p>return a number, indicating whether the reference string comes before, after or is the same as the compareString in sort order. Returns one of three values:<br>\n-1: if the reference string is sorted before the compareString<br>\n0: if the two strings are equal<br>\n1: if the reference string is sorted after the compareString</p>\n</blockquote>\n<p><code>Array.prototype.sort()</code></p>\n<blockquote>\n<p>sorts the elements of an array in place and returns the sorted array.</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">items.sort((a,b) =&gt; a.localeCompare(b))</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019821\">2019/8/21</h4>\n<p>ä»Šæ—¥é˜…è¯»ï¼š<br>\n<a href=\"https://stackoverflow.com/questions/52499617/what-is-the-difference-between-npm-install-and-npm-ci\" target=\"_blank\" rel=\"noopener\">What is the difference between â€œnpm installâ€ and â€œnpm ciâ€?</a><br>\n<a href=\"https://medium.com/coinmonks/everything-you-wanted-to-know-about-package-lock-json-b81911aa8ab8\" target=\"_blank\" rel=\"noopener\">Everything You Wanted To Know About package-lock.json But Were Too Afraid To Ask</a></p>\n<h4 id=\"2019820\">2019/8/20</h4>\n<p>æ¨¡ä»¿ react hook <code>useState</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š<br>\nâ€ƒâ€ƒå› ä¸ºåœ¨ jest æµ‹è¯•ä¸­æŸä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ <code>useState</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†™äº†ä¸€ä¸ªæ›¿ä»£ï¼Œä¸è¿‡ä¸ç¡®å®šæ˜¯å¦æœ‰é”™ã€‚ğŸ˜³</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// for example</span><br><span class=\"line\">const [str,setStr] = useState&lt;string[]&gt;([]);</span><br><span class=\"line\"></span><br><span class=\"line\">// fake setStr</span><br><span class=\"line\">let str:string[] = [];</span><br><span class=\"line\">const setStr = (val: string[] | ((prev:string[]) =&gt; string[])) =&gt; &#123;</span><br><span class=\"line\">  if (typeof val === &quot;object&quot;) &#123;</span><br><span class=\"line\">    str = val;</span><br><span class=\"line\">  &#125; else if (typeof val === &quot;function&quot;) &#123;</span><br><span class=\"line\">    str = val(str)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019819\">2019/8/19</h4>\n<p>ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://searchenginelaws.com/seo/what-is-rel-noopener-noreferrer-tag/\" target=\"_blank\" rel=\"noopener\">What is rel=noopener noreferrer link</a><br>\nâ€ƒâ€ƒä½¿ç”¨ <code>a</code> æ ‡ç­¾ï¼Œä¸”å±æ€§ <code>target=&quot;_blank&quot;</code> æ—¶ï¼Œéœ€è¦åŠ ä¸Š <code>rel=&quot;noopener noreferrer&quot;</code> ã€‚å¯ä»¥é˜²æ­¢æ–°çª—å£åˆ©ç”¨ <code>window.opener</code> çš„ç‰¹æ€§çªƒå–åŸçª—å£ä¿¡æ¯ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœ window A æ‰“å¼€äº† window Bï¼Œé‚£ä¹ˆ B.opener ä¼šè¿”å› Aã€‚å¦‚æœåŠ ä¸Š <code>rel=&quot;noopener&quot;</code> ï¼Œä¼šè¿”å› null ã€‚</p>\n<h4 id=\"2019812\">2019/8/12</h4>\n<p>ä¸€ã€download files using axios</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import axios from &quot;axios&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">axios.get(url,&#123;</span><br><span class=\"line\">  responseType: &apos;blob&apos;, // important</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    &apos;Authorization&apos;: AuthStr </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(resp =&gt; &#123;</span><br><span class=\"line\">  const &#123;data&#125; = resp;</span><br><span class=\"line\">  const file = new File([data],&quot;data.txt&quot;);</span><br><span class=\"line\">  const objectURL = URL.createObjectURL(file);</span><br><span class=\"line\">  const a = document.createElement(&quot;a&quot;);</span><br><span class=\"line\">  a.href = objectURL;</span><br><span class=\"line\">  a.download = &quot;data.txt&quot;;</span><br><span class=\"line\">  a.click();</span><br><span class=\"line\">  URL.revokeObjectURL(objectURL);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒå¦‚æœæ˜¯å•æ¬¡ç‚¹å‡»ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒChrome åªä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—ä¸‹è½½æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥åŠ ä¸Š <code>setTimeout</code> ï¼Œè§¦å‘å¤šæ¬¡ä¸‹è½½ï¼Œæˆ–æ˜¯åŠ ä¸Š <code>a.target = &quot;_blank&quot;</code> ï¼Œæ‰“å¼€å¤šä¸ªæ–°çª—å£ã€‚<br>\näºŒã€curl<br>\næŸ¥çœ‹å‘½ä»¤ï¼š<br>\n<code>curl --help</code><br>\n-H æŒ‡å®šHeaderï¼š<br>\n<code>curl -H &quot;Authorization: XXXXXXXX&quot; URL</code><br>\n<code>curl POST -d data -H &quot;Authorization: XXXXXXXX&quot; URL</code></p>\n<h4 id=\"201989\">2019/8/9</h4>\n<p>ä¸€ã€<a href=\"https://www.codebeast.dev/usestate-vs-useref-re-render-or-not/\" target=\"_blank\" rel=\"noopener\">useRef vs useState: Should we re-render or not?</a><br>\n<img src=\"FE_20190809.png\" alt=\"FE_20190808\"><br>\näºŒã€Hooks ç›‘å¬é”®ç›˜äº‹ä»¶<br>\nkeyCode: <a href=\"https://keycode.info/\" target=\"_blank\" rel=\"noopener\">https://keycode.info/</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function useKeyPress(targetKey) &#123;</span><br><span class=\"line\">  const [keyPressed, setKeyPressed] = useState(false);</span><br><span class=\"line\"></span><br><span class=\"line\">  function downHandler(&#123; key &#125;) &#123;</span><br><span class=\"line\">    if (key === targetKey) &#123;</span><br><span class=\"line\">      setKeyPressed(true);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  const upHandler = (&#123; key &#125;) =&gt; &#123;</span><br><span class=\"line\">    if (key === targetKey) &#123;</span><br><span class=\"line\">      setKeyPressed(false);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    window.addEventListener(&apos;keydown&apos;, downHandler);</span><br><span class=\"line\">    window.addEventListener(&apos;keyup&apos;, upHandler);</span><br><span class=\"line\">    return () =&gt; &#123;</span><br><span class=\"line\">      window.removeEventListener(&apos;keydown&apos;, downHandler);</span><br><span class=\"line\">      window.removeEventListener(&apos;keyup&apos;, upHandler);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  return keyPressed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"201988\">2019/8/8</h4>\n<p>â€ƒâ€ƒå·¥ç¨‹ä¸­ç»å¸¸ä¼šçœ‹åˆ° CI/CD çš„æ¦‚å¿µã€‚CI æŒ‡çš„æ˜¯æŒç»­é›†æˆï¼Œä¾§é‡äºç®€åŒ–å‘å¸ƒå‡†å¤‡å·¥ä½œçš„å®è·µï¼Œæ¯”å¦‚è‡ªåŠ¨æµ‹è¯•ï¼›CD æŒ‡çš„æ˜¯æŒç»­äº¤ä»˜ï¼Œæ„å‘³ç€ä¸ä»…è®©æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œè®©å‘å¸ƒæµç¨‹ä¹Ÿè‡ªåŠ¨åŒ–äº†ã€‚æ›´å¤šæ¦‚å¿µå¯¹æ¯”å¯ä»¥å‚è€ƒï¼š<a href=\"https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment\" target=\"_blank\" rel=\"noopener\">Continuous integration VS continuous delivery VS continuous deployment</a><br>\nâ€ƒâ€ƒä¸‹é¢è¿™ä¸ªå›¾å¾ˆæ¸…æ™°åœ°æè¿°äº†ä¸‰è€…çš„ä¸åŒï¼š<br>\n<img src=\"FE_20190808.png\" alt=\"FE_20190808\"><br>\nâ€ƒâ€ƒåœ¨ gitlab ä¸Šçš„å®è·µå¯ä»¥å‚è€ƒï¼š<a href=\"https://mp.weixin.qq.com/s/z2f1i2FgrVGofQR6nKTd1A\" target=\"_blank\" rel=\"noopener\">åŸºäº GitLab CI/CD çš„è‡ªåŠ¨åŒ–æ„å»ºã€å‘å¸ƒå®è·µ</a></p>\n<h4 id=\"201987\">2019/8/7</h4>\n<p>Typescript: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" target=\"_blank\" rel=\"noopener\">Discriminated Unions</a><br>\nâ€ƒâ€ƒå½“æˆ‘ä»¬æŸä¸ªå‚æ•°å¯èƒ½æœ‰å¤šä¸ªç±»å‹ï¼Œè€Œè¿™äº›ç±»å‹ä¸­åˆæœ‰å…¬å…±çš„å±æ€§æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼çº¦æŸã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Each interface has a kind property with a different string literal type. </span><br><span class=\"line\">// The kind property is called the discriminant or tag. </span><br><span class=\"line\">interface Square &#123;</span><br><span class=\"line\">    kind: &quot;square&quot;;</span><br><span class=\"line\">    size: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface Rectangle &#123;</span><br><span class=\"line\">    kind: &quot;rectangle&quot;;</span><br><span class=\"line\">    width: number;</span><br><span class=\"line\">    height: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface Circle &#123;</span><br><span class=\"line\">    kind: &quot;circle&quot;;</span><br><span class=\"line\">    radius: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// put the interfaces into a union</span><br><span class=\"line\">type Shape = Square | Rectangle | Circle;</span><br><span class=\"line\"></span><br><span class=\"line\">// use the discriminated union</span><br><span class=\"line\">function area(s: Shape) &#123;</span><br><span class=\"line\">    switch (s.kind) &#123;</span><br><span class=\"line\">        case &quot;square&quot;: return s.size * s.size;</span><br><span class=\"line\">        case &quot;rectangle&quot;: return s.height * s.width;</span><br><span class=\"line\">        case &quot;circle&quot;: return Math.PI * s.radius ** 2;</span><br><span class=\"line\">        default: return assertNever(s); // error here if there are missing cases</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Exhaustiveness checking </span><br><span class=\"line\">function assertNever(x: never): never &#123;</span><br><span class=\"line\">    throw new Error(&quot;Unexpected object: &quot; + x);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"201986\">2019/8/6</h4>\n<p>Stack Overflow: <a href=\"https://stackoverflow.com/questions/54069253/usestate-set-method-not-reflecting-change-immediately\" target=\"_blank\" rel=\"noopener\">useState set method not reflecting change immediately.</a><br>\nâ€ƒâ€ƒä»Šå¤©åœ¨å®è·µä¸­å‘ç°ï¼Œ<code>setState</code> åé©¬ä¸Šæ‰“å°ï¼Œå¹¶ä¸ä¼šå–åˆ°æ›´æ–°åçš„å€¼ã€‚æŸ¥é˜…èµ„æ–™åå‘ç°è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ›´æ–°ï¼Œä½†ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚å¦‚ä¸‹ï¼š<br>\n<img src=\"FE_20190806.png\" alt=\"FE_20190806\"></p>\n<h4 id=\"201981\">2019/8/1</h4>\n<p>ä¸€ã€<a href=\"https://javascript.info/fetch-api\" target=\"_blank\" rel=\"noopener\">Fetch API</a><br>\nâ€ƒâ€ƒç”¨ fetch æ¥è¯·æ±‚ç½‘ç»œèµ„æºï¼Œå¯ä»¥é…ç½®ä¸åŒçš„å‚æ•°æ¥è§£å†³ç¼“å­˜ã€è·¨åŸŸç­‰é—®é¢˜ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// ä¸ç¼“å­˜è¯·æ±‚ç»“æœ </span><br><span class=\"line\">// https://stackoverflow.com/questions/29246444/fetch-how-do-you-make-a-non-cached-request</span><br><span class=\"line\">const headers = new Headers();</span><br><span class=\"line\">headers.append(&quot;pragma&quot;, &quot;no-cache&quot;);</span><br><span class=\"line\">headers.append(&quot;cache-control&quot;, &quot;no-store&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">// å®Œå…¨å¿½ç•¥ http-cache ï¼Œæ¯æ¬¡éƒ½ä»æœåŠ¡å™¨è¯·æ±‚æ•°æ®</span><br><span class=\"line\">// https://developer.mozilla.org/en-US/docs/Web/API/Request/cache</span><br><span class=\"line\">const cache: RequestCache = &quot;no-store&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">// è¯·æ±‚æ¨¡å¼ï¼Œè‹¥æœ‰çš„è¯·æ±‚ä¼šå› ä¸º cors è€Œå¤±è´¥ï¼Œå¯ä»¥è®¾ç½®ä¸º &quot;no-cors&quot;</span><br><span class=\"line\">// https://developer.mozilla.org/en-US/docs/Web/API/Request/mode</span><br><span class=\"line\">const mode: RequestMode = needCors ? &quot;cors&quot; : &quot;no-cors&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">await fetch(url. &#123;headers, cache, mode&#125;)</span><br><span class=\"line\">  .then(res =&gt; res.blob())</span><br><span class=\"line\">  .then(blob =&gt; &#123;</span><br><span class=\"line\">    // doSomething with blob</span><br><span class=\"line\">    const url = URL.createObjectURL(blob)</span><br><span class=\"line\">    let a = document.createElement(&apos;a&apos;)</span><br><span class=\"line\">    a.download = &apos;example.zip&apos;</span><br><span class=\"line\">    a.href = url</span><br><span class=\"line\">    document.body.appendChild(a)</span><br><span class=\"line\">    a.click()</span><br><span class=\"line\">    document.body.removeChild(a)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(err =&gt; &#123;</span><br><span class=\"line\">    console.log(err)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .finally(() =&gt; &#123;</span><br><span class=\"line\">    // doSomething</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒå…³äº <code>res.blob()</code> ï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹ä¸Š<a href=\"https://zhuanlan.zhihu.com/p/32909043\" target=\"_blank\" rel=\"noopener\">è°ˆä¸€è°ˆ Fetch API ä¸­çš„ â€œres.blob()â€</a>ï¼›ä¹Ÿå¯ä»¥å‚è€ƒ <a href=\"https://github.github.io/fetch/\" target=\"_blank\" rel=\"noopener\">fetch documentation</a> ï¼Œè¿™ä¸€ç¯‡æ¯”è¾ƒè¯¦ç»†ï¼Œä¹Ÿæä¾›äº†è¾ƒå¤šå…¶ä»–çš„ä¾‹å­ã€‚<br>\nå…³äºæµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼ŒMedium ä¸Šè¿™ç¯‡ <a href=\"https://medium.com/@codebyamir/a-web-developers-guide-to-browser-caching-cc41f3b73e7c\" target=\"_blank\" rel=\"noopener\">A Web Developerâ€™s Guide to Browser Caching</a> å†™å¾—ä¸é”™ã€‚å¦‚æœå­˜åœ¨ä»£ç†æœåŠ¡å™¨ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®äº† <code>mode: 'no-store'</code> ï¼Œä»£ç†æœåŠ¡å™¨ä¹Ÿä¼šç¼“å­˜ã€‚ä¸ºäº†é¿å…è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡å‘é€è¯·æ±‚æ—¶æ„é€ æ–°çš„ URL ï¼ŒåŠ ä¸Šæ—¶é—´æˆ³ <code>?t=Date.now()</code> ã€‚ğŸ®ğŸº<br>\näºŒã€Jest<br>\nâ€ƒâ€ƒæˆ‘ä»¬åœ¨ä½¿ç”¨ jest æµ‹è¯•æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å¼•å…¥ä¸€äº›å¤–éƒ¨æ–‡ä»¶/å¤–éƒ¨å˜é‡ï¼Œå¦‚ä» <code>config.json</code> æ–‡ä»¶ä¸­å¼•å…¥æŸä¸ªå˜é‡ã€‚ä¸ºäº†åœ¨æµ‹è¯•æ–‡ä»¶ä¸­å¯ä»¥è®¿é—®åˆ°è¯¥å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>jest.config.js</code> ä¸­é…ç½®å…¨å±€å˜é‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  globals: &#123;</span><br><span class=\"line\">    API_BASE: &quot;&quot;,</span><br><span class=\"line\">    DATA_API: &quot;&quot;,</span><br><span class=\"line\">    TRACK_API: &quot;&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  setupFiles: [&quot;./jestSetup.ts&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒç”±äº <code>globals</code> åªæ”¯æŒ JSON æ ¼å¼çš„å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®šä¹‰å…¨å±€å‡½æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>setupFiles</code>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// jestSetup.ts</span><br><span class=\"line\">(global as any).fn= () =&gt; &#123;&#125;;</span><br><span class=\"line\">(global as any).variable = &quot;XXX&quot;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019731\">2019/7/31</h4>\n<p>1ï¼‰<code>position: fixed</code> å’Œ flex å¸ƒå±€æ˜¯ä¸èƒ½åŒæ—¶èµ·ä½œç”¨çš„ã€‚ç»å¯¹å¸ƒå±€è„±ç¦»æ–‡æ¡£æµï¼Œä¸ä¼šå‚ä¸åˆ° flex layout ä¸­ã€‚å¦‚æœæƒ³å®ç°å·¦ä¾§èœå•æ ï¼Œå³ä¾§å†…å®¹ï¼Œä¸¤è€…ä¸åŒæ—¶æ»šåŠ¨ï¼ˆèœå•æ  fixedï¼‰ï¼Œä½†èœå•æ çš„å¤§å°å¯ä»¥æ”¹å˜ï¼ˆflex çˆ¶å¸ƒå±€ï¼‰ã€‚å¯ä»¥è®©çˆ¶å®¹å™¨æ˜¯ flex å¸ƒå±€ï¼Œå·¦ä¾§èœå•æ å’Œå³ä¾§å†…å®¹åŒºåŸŸéƒ½æ˜¯ flex element ï¼Œ èœå•æ å†…éƒ¨å†æœ‰ä¸€ä¸ª <code>position: fixed</code> çš„ div ã€‚<br>\n2ï¼‰å¦‚æœæƒ³è®© <code>position: fixed</code> çš„å…ƒç´ ç›¸å¯¹çˆ¶å®¹å™¨å®šä½ï¼Œå¯ä»¥ç»™çˆ¶å®¹å™¨å¢åŠ  CSS å±æ€§ <code>transform: translate(0,0)</code> ã€‚å‚è€ƒï¼š<a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/position\" target=\"_blank\" rel=\"noopener\">MDN - position</a></p>\n<blockquote>\n<p>fixed: It is positioned relative to the initial containing block established by the viewport, except when one of its ancestors has a transform, perspective, or filter property set to something other than none.</p>\n</blockquote>\n<h4 id=\"2019730\">2019/7/30</h4>\n<p><code>useEffect</code> ä¸­çš„å¼‚æ­¥è¯·æ±‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// é”™è¯¯å†™æ³•ï¼Œ return å¿…é¡»æ˜¯ cleanup function</span><br><span class=\"line\">useEffect(async () =&gt; &#123;</span><br><span class=\"line\">  const newVal = await asyncCall();</span><br><span class=\"line\">  setVal(newVal);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// æ­£ç¡®å†™æ³•</span><br><span class=\"line\">useEffect(() =&gt; &#123;</span><br><span class=\"line\">  asyncCall().then(resp =&gt; setVal(resp.data));</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>å¥½æ–‡å…±äº«ï¼š<a href=\"https://www.robinwieruch.de/react-hooks-fetch-data/\" target=\"_blank\" rel=\"noopener\">How to fetch data with React Hooks?</a>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(() =&gt; &#123;</span><br><span class=\"line\">  async function fetchMyAPI() &#123;</span><br><span class=\"line\">    let url = &apos;http://something/&apos; + productId;</span><br><span class=\"line\">    let config = &#123;&#125;;</span><br><span class=\"line\">    const response = await myFetch(url);</span><br><span class=\"line\">    console.log(response);</span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">  fetchMyAPI();</span><br><span class=\"line\">&#125;, [productId]);</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœè¦ä¿è¯è¯·æ±‚æŒ‰é¡ºåºå‘å‡ºï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹å†™æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(() =&gt; &#123;</span><br><span class=\"line\">  let didCancel = false;</span><br><span class=\"line\"></span><br><span class=\"line\">  async function fetchMyAPI() &#123;</span><br><span class=\"line\">    let url = &apos;http://something/&apos; + productId;</span><br><span class=\"line\">    let config = &#123;&#125;;</span><br><span class=\"line\">    const response = await myFetch(url);</span><br><span class=\"line\">    if (!didCancel) &#123; // Ignore if we started fetching something else</span><br><span class=\"line\">      console.log(response);</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">  fetchMyAPI();</span><br><span class=\"line\">  return () =&gt; &#123; didCancel = true; &#125;; // Remember if we start fetching something else</span><br><span class=\"line\">&#125;, [productId]);</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019729\">2019/7/29</h4>\n<p>ä¸€ã€<a href=\"https://stackoverflow.com/questions/30795525/performance-now-vs-date-now\" target=\"_blank\" rel=\"noopener\">performance.now() vs Date.now()</a><br>\nâ€ƒâ€ƒåœ¨ç¨‹åºä¸­æ‰“å°æ‰§è¡Œæ—¶é—´æ—¶ï¼Œä½¿ç”¨ <code>performance.now(ï¼‰</code> æ›´å‡†ç¡®ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const start = performance.now();</span><br><span class=\"line\">doSomething();</span><br><span class=\"line\">const end = performance.now();</span><br><span class=\"line\">console.log(&quot;Call to doSomething took &quot; + (start - end) + &quot; milliseconds.&quot;);</span><br></pre></td></tr></table></figure>\n<p>äºŒã€<a href=\"https://stackoverflow.com/questions/47738344/does-javascript-slice-method-return-a-shallow-copy\" target=\"_blank\" rel=\"noopener\">Does javascript slice method return a shallow copy?</a><br>\nâ€ƒâ€ƒmdn ä¸Šå¯¹ <code>slice()</code> æ–¹æ³•çš„ä»‹ç»ï¼š</p>\n<blockquote>\n<p>The slice() method returns a shallow copy of a portion of an array into a new array object selected from begin to end (end not included) where begin and end represent the index of items in that array. The original array will not be modified.</p>\n</blockquote>\n<p>â€ƒâ€ƒæ³¨æ„è¿™é‡Œçš„æµ…å¤åˆ¶æŒ‡çš„æ˜¯å¯¹æ•°ç»„ä¸­å€¼çš„æµ…å¤åˆ¶ï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªæ•°ç»„çš„æµ…å¤åˆ¶ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ™ä¿®æ”¹æ–°æ•°ç»„æ—¶ï¼ŒåŸæ•°ç»„ä¸ä¼šæ”¹å˜ï¼›å¦‚æœæ˜¯å¯¹è±¡æ•°ç»„ï¼Œä¿®æ”¹æ–°æ•°ç»„å¯¹è±¡å€¼æ—¶ï¼ŒåŸæ•°ç»„ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const animals = [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;camel&apos;&#125;];</span><br><span class=\"line\">const newAnimals = animals.slice(2);</span><br><span class=\"line\"></span><br><span class=\"line\">newAnimals[0].name = &apos;aaa&apos;;</span><br><span class=\"line\">console.log(newAnimals); // [&#123;name: &apos;aaa&apos;&#125;]</span><br><span class=\"line\">console.log(animals);    // [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;aaa&apos;&#125;]</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæ³¨æ„å¦‚æœæ˜¯é‡æ–°èµ‹å€¼ï¼Œåˆ™ç­‰äºé‡æ–°åˆ†é…ç©ºé—´ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const animals = [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;camel&apos;&#125;];</span><br><span class=\"line\">const newAnimals = animals.slice(2);</span><br><span class=\"line\"></span><br><span class=\"line\">newAnimals[0] = &#123;name: &apos;aaa&apos;&#125;;</span><br><span class=\"line\">console.log(newAnimals); // [&#123;name: &apos;aaa&apos;&#125;]</span><br><span class=\"line\">console.log(animals);    // [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;camel&apos;&#125;]</span><br></pre></td></tr></table></figure>\n<h4 id=\"2019726\">2019/7/26</h4>\n<p>â€ƒâ€ƒåº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦è¯·æ±‚å¹¶æ›´æ–°èœå•æ ä¸­ä»»åŠ¡çš„çŠ¶æ€ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚å®Œæˆç«‹é©¬æ›´æ–°ä¼šå¯¼è‡´ React é¢‘ç¹åˆ·æ–°ï¼Œéœ€è¦ç¼“å†²æ‰¹å¤„ç†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; runInAction &#125; from &quot;mobx&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">let handlers: Array&lt;() =&gt; void&gt; = [];</span><br><span class=\"line\">const runHandlers = () =&gt; &#123;</span><br><span class=\"line\">  runInAction(() =&gt; &#123;</span><br><span class=\"line\">    handlers.forEach(f =&gt; f());</span><br><span class=\"line\">    handlers = [];</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">for (const task of tasks) &#123;</span><br><span class=\"line\">  const &#123;data&#125; = await requestFn();</span><br><span class=\"line\">  </span><br><span class=\"line\">  handlers.push(() =&gt; &#123;</span><br><span class=\"line\">    // deal with data, update state</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  if(handlers.length &gt; 30) &#123;</span><br><span class=\"line\">    runHandlers();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">runHandlers();</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒä¸Šè¿°ä»£ç ä¸»è¦æ˜¯åˆ©ç”¨äº†è‡ªå®šä¹‰çš„ <code>handlers</code> æ¥æš‚å­˜çŠ¶æ€æ›´æ–°å‡½æ•°ï¼Œä¹‹åä½¿ç”¨ mobx æä¾›çš„ <code>runInAction</code> æ‰§è¡Œå‡½æ•°å¹¶æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çŠ¶æ€éƒ½éœ€è¦ä½¿ç”¨ <code>action</code> å‡½æ•°ï¼Œ <code>runInAction</code> æ¥å—ä¸€ä¸ªä»£ç å—å¹¶åœ¨ä¸€ä¸ª(åŒ¿å)æ“ä½œä¸­æ‰§è¡Œï¼Œæœ‰åˆ©äºåŠ¨æ€åˆ›å»ºå’Œæ‰§è¡Œæ“ä½œï¼Œ<code>runInAction(f) = action(f)()</code>ã€‚æ­¤å¤–ï¼Œå¿…è¦æ—¶è¿˜å¯åŠ ä¸Š <code>lodash.memoize(func,[resolver])</code>ï¼Œè®°å½•ä¸»å‡½æ•°è¯·æ±‚ç»“æœã€‚</p>\n<blockquote>\n<p>For one-time-actions runInAction(name?, fn) can be used, which is sugar for action(name, fn)()</p>\n</blockquote>\n<h4 id=\"2019718\">2019/7/18</h4>\n<p>ä¸€ã€ç¼–ç¨‹æ¨¡å¼ï¼š<br>\nâ€ƒâ€ƒ é¦–å…ˆå…ˆè®°ä½è¿™å‡ ç§ç¼–ç¨‹æ¨¡å¼çš„ä¸­æ–‡ï¼šImperative Programming æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ï¼ŒDeclarative Programming æ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼ŒReactive Programming æ˜¯å“åº”å¼ç¼–ç¨‹ã€‚ï¼ˆæµä¸‹äº†è‹±æ–‡ä¸å¥½çš„æ³ªæ°´ï¼‰<br>\n1ï¼‰å…ˆçœ‹å‘½ä»¤å¼ç¼–ç¨‹å’Œå£°æ˜å¼ç¼–ç¨‹çš„åŒºåˆ«ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// å‘½ä»¤å¼ç¼–ç¨‹ imperative programming</span><br><span class=\"line\">const array = [0,1,2,3,4,5];</span><br><span class=\"line\">const output = [];</span><br><span class=\"line\">for (let i = 0; i &lt; array.length; i++) &#123;</span><br><span class=\"line\">  const tmp = array[i] * 2;</span><br><span class=\"line\">  output.push(tmp)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">console.log(output) // =&gt; [0,2,4,6,8,10]</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// å£°æ˜å¼ç¼–ç¨‹ declarative programming</span><br><span class=\"line\">const array = [0,1,2,3,4,5];</span><br><span class=\"line\">const output = array.map(item =&gt; item * 2);</span><br><span class=\"line\">console.log(output) // =&gt; [0,2,3,6,8,10]</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒå¾ˆæ˜æ˜¾å¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº how ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥æ­¥å‘Šè¯‰æœºå™¨æ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Œå‘Šè¯‰ä»–æ€ä¹ˆå»éå†ä¸€ä¸ªæ•°ç»„ï¼Œæ€ä¹ˆå»è¿ç®—å¾—åˆ°æœ€åçš„ç»“æœï¼Œæ€ä¹ˆå»è¾“å‡ºï¼›å£°æ˜å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº what ï¼Œæˆ‘ä»¬åªå…³æ³¨æœ€åçš„ç»“æœï¼Œç”±æœºå™¨è‡ªå·±å»æ‘¸ç´¢è¿‡ç¨‹ï¼Œå¦‚ç›´æ¥è°ƒç”¨ <code>map</code> å‡½æ•°ï¼Œåªå‘Šè¯‰ç¨‹åºæˆ‘ä»¬éœ€è¦ä¸€ä¸ª2å€è¾“å‡ºã€‚<br>\n2ï¼‰æ¥ç€çœ‹å£°æ˜å¼ç¼–ç¨‹å’Œå“åº”å¼ç¼–ç¨‹çš„å¯¹æ¯”<br>\nâ€ƒâ€ƒå¯ä»¥é˜…è¯»ï¼š<a href=\"https://codepen.io/HunorMarton/post/imperative-vs-reactive\" target=\"_blank\" rel=\"noopener\">Imperative vs Reactive</a>ï¼Œè§£é‡Šå¾ˆæ¸…æ™°ï¼Œæ¯”å–»ä¹Ÿå¾ˆå½¢è±¡ï¼Œä½†æˆ‘è§‰å¾—æ–‡ç« é‡Œçš„ Imperative åº”è¯¥æ”¹æˆ Declarative æ¯”è¾ƒå‡†ç¡®ã€‚ç»§ç»­æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œä¿®æ”¹ä¸€ä¸‹å£°æ˜å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// å£°æ˜å¼ç¼–ç¨‹ declarative programming</span><br><span class=\"line\">const array = [1,2];</span><br><span class=\"line\">const output = array.map(item =&gt; item * 2);</span><br><span class=\"line\">output.forEach(item =&gt; console.log(item)) // =&gt; 2 4</span><br><span class=\"line\">array.push(3);  // =&gt; no output </span><br><span class=\"line\">array.push(4);  // =&gt; no output</span><br></pre></td></tr></table></figure>\n<p>å“åº”å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; Subject &#125; from `rxjs`;</span><br><span class=\"line\">let array = new Subject();</span><br><span class=\"line\">array.next(1);</span><br><span class=\"line\">array.next(2);</span><br><span class=\"line\"></span><br><span class=\"line\">const output = array.map(item =&gt; item * 2);</span><br><span class=\"line\">output.forEach(item =&gt; console.log(item)); // =&gt; 2 4</span><br><span class=\"line\"></span><br><span class=\"line\">array.next(3); // =&gt; 6</span><br><span class=\"line\">array.next(4); // =&gt; 8</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒé¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹å¼ä¸­çš„ <code>map</code> ï¼Œ <code>forEach</code> ç­‰å‡½æ•°å¹¶ä¸æ˜¯ä¸€æ ·çš„ï¼Œå†…éƒ¨å®ç°æœºåˆ¶æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°åŒºåˆ«ï¼šåœ¨å£°æ˜å¼ç¼–ç¨‹ä¸­ï¼Œå¦‚æœåœ¨æœ€åå‘åŸæ•°ç»„æ·»åŠ å€¼ï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºæ¥ï¼Œå› ä¸ºè¿™æ˜¯åœ¨ <code>console.log</code> è¯­å¥æ‰§è¡Œåå‘ç”Ÿçš„ã€‚ä½†åœ¨å“åº”å¼ç¼–ç¨‹é‡Œï¼Œä»»ä½•å˜åŒ–éƒ½å¯ä»¥è¢«ååº”å‡ºæ¥ï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ª<strong>å¼‚æ­¥æ•°æ®æµ</strong>ï¼ˆasynchronous data streamsï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥éšæ—¶åˆ›å»ºã€æ›´æ”¹æˆ–ç»„åˆè¿™äº›æ•°æ®æµï¼Œæ‰€ä»¥æ‰“å°äº‹ä»¶æ˜¯ä¸€ä¸ª continuous observation caseã€‚<br>\näºŒã€ç±»åº“<br>\n<a href=\"https://github.com/bvaughn/react-virtualized\" target=\"_blank\" rel=\"noopener\">react-virtualized</a> çš„è½»é‡çº§ç‰ˆ <a href=\"https://github.com/bvaughn/react-window\" target=\"_blank\" rel=\"noopener\">react-window</a>ï¼Œç”¨äºé«˜æ•ˆæ¸²æŸ“é•¿åˆ—è¡¨ã€‚</p>\n<h4 id=\"2019717\">2019/7/17</h4>\n<p>â€ƒâ€ƒå¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éœ€è¦è¯·æ±‚å¾ˆå¤šå›¾ç‰‡ï¼Œæƒ³è¦å®ç°è¯·æ±‚å‡ºé”™æ—¶ç»§ç»­å‘é€è¯·æ±‚ï¼ŒæˆåŠŸæ—¶è¿”å›æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>Promise</code> ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function fetchURL(url: string):Promise&lt;Blob&gt; &#123;</span><br><span class=\"line\">  return Axios.get(url, &#123;responeType: &quot;blob&quot;&#125;)</span><br><span class=\"line\">              .then( resp =&gt; Promise.resolve(resp.data) )</span><br><span class=\"line\">              .catch( () =&gt; fetchURL(url) )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¹‹åå¯ä»¥ä½¿ç”¨ <code>rxjs</code> ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; mergeMap, bufferTime, takeUntil &#125; from &quot;rxjs/operators&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">[url1,...,url10]</span><br><span class=\"line\">  .pipe(</span><br><span class=\"line\">    mergeMap( url =&gt; fetchURL(url).then( val =&gt; val )),</span><br><span class=\"line\">    bufferTime(10000)</span><br><span class=\"line\">  )</span><br><span class=\"line\">  .subscribe(&#123;</span><br><span class=\"line\">    next: resps =&gt; &#123;</span><br><span class=\"line\">      // do sth with resps:Blob[]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæ¯æ¬¡é‡åˆ° <code>rxjs</code> éƒ½å¾ˆå¤´å¤§ï¼Œç°åœ¨ä¹Ÿæ²¡æœ‰å‘ç°ä¸€ä¸ªæ¯”è¾ƒå®Œå–„æ¸…æ™°çš„æ•™ç¨‹ï¼Œä½†å®ƒåˆçœŸçš„å¾ˆå¼ºå¤§ï¼Œåç»­è¦å¼€ä¸“é¢˜å¥½å¥½å­¦ä¹ è®°å½•è¿™ä¸ªä¸œè¥¿ã€‚</p>\n<h4 id=\"2019716\">2019/7/16</h4>\n<p>ä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback\" target=\"_blank\" rel=\"noopener\">How to read an often-changing value from useCallback?</a><br>\nç›´æ¥ä¸Šå®˜ç½‘ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Form() &#123;</span><br><span class=\"line\">  const [text, updateText] = useState(&apos;&apos;);</span><br><span class=\"line\">  const textRef = useRef();</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    textRef.current = text; // Write it to the ref</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  const handleSubmit = useCallback(() =&gt; &#123;</span><br><span class=\"line\">    const currentText = textRef.current; // Read it from the ref</span><br><span class=\"line\">    alert(currentText);</span><br><span class=\"line\">  &#125;, [textRef]); // Don&apos;t recreate handleSubmit like [text] would do</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input value=&#123;text&#125; onChange=&#123;e =&gt; updateText(e.target.value)&#125; /&gt;</span><br><span class=\"line\">      &lt;ExpensiveTree onSubmit=&#123;handleSubmit&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ <code>text</code> çš„å€¼ç»å¸¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³ä½¿ <code>handleSubmit</code> ç”¨ <code>useCallback</code> åŒ…è£¹äº†ï¼Œè¿˜æ˜¯ä¼šé‡æ–°å£°æ˜ã€‚è§£å†³åŠæ³•æ˜¯ä¼ å…¥ä¸€ä¸ª <code>ref</code> å¯¹è±¡ä»£æ›¿åŸå§‹å€¼ã€‚ä¹Ÿå¯ä»¥å†™ä¸€ä¸ª custom hook ï¼š<br>\n1ï¼‰å®˜ç½‘çš„ç‰ˆæœ¬ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function useEventCallback(fn, dependencies) &#123;</span><br><span class=\"line\">  const ref = useRef(() =&gt; &#123;</span><br><span class=\"line\">    throw new Error(&apos;Cannot call an event handler while rendering.&apos;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    ref.current = fn;</span><br><span class=\"line\">  &#125;, [fn, ...dependencies]);</span><br><span class=\"line\"></span><br><span class=\"line\">  return useCallback(() =&gt; &#123;</span><br><span class=\"line\">    const fn = ref.current;</span><br><span class=\"line\">    return fn();</span><br><span class=\"line\">  &#125;, [ref]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å®é™…ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Form() &#123;</span><br><span class=\"line\">  const [text, updateText] = useState(&apos;&apos;);</span><br><span class=\"line\">  // Will be memoized even if `text` changes:</span><br><span class=\"line\">  const handleSubmit = useEventCallback(() =&gt; &#123;</span><br><span class=\"line\">    alert(text);</span><br><span class=\"line\">  &#125;, [text]);</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input value=&#123;text&#125; onChange=&#123;e =&gt; updateText(e.target.value)&#125; /&gt;</span><br><span class=\"line\">      &lt;ExpensiveTree onSubmit=&#123;handleSubmit&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2ï¼‰å¯¼å¸ˆçš„ç‰ˆæœ¬ï¼šï¼ˆä»–æ¥äº†ï¼Œä»–å¸¦ç€ä»£ç åˆæ¥äº†ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @param callback</span><br><span class=\"line\"> * @param oRefs</span><br><span class=\"line\"> */</span><br><span class=\"line\">export function useCallbackWithRefs&lt;</span><br><span class=\"line\">  Refs,</span><br><span class=\"line\">  Callback extends (...args: any[]) =&gt; void</span><br><span class=\"line\">&gt;(callback: (refs: Refs) =&gt; Callback, oRefs: Refs) &#123;</span><br><span class=\"line\">  const refs = useRef(oRefs);</span><br><span class=\"line\">  useEffect(</span><br><span class=\"line\">    () =&gt; &#123;</span><br><span class=\"line\">      refs.current = oRefs;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    [oRefs]</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  return useCallback(</span><br><span class=\"line\">    (...args: any[]) =&gt; callback(refs.current)(...args),</span><br><span class=\"line\">    []</span><br><span class=\"line\">  ) as Callback;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å®é™…ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Form() &#123;</span><br><span class=\"line\">  const [text, updateText] = useState(&apos;&apos;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // åŸå…ˆçš„ callback ä¹Ÿå¯ä»¥æœ‰å‚æ•°</span><br><span class=\"line\">  const handleSubmit = useCallbackWithRefs(</span><br><span class=\"line\">    refs =&gt; (params: any) =&gt; &#123;</span><br><span class=\"line\">      // è¦æ³¨æ„åœ¨å‡½æ•°å†…å¿…é¡»ä½¿ç”¨ `refs.xxx`ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä»»ä½•å˜é‡ `xxx`</span><br><span class=\"line\">      console.log(refs.text);</span><br><span class=\"line\">  &#125;, &#123;text&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input value=&#123;text&#125; onChange=&#123;e =&gt; updateText(e.target.value)&#125; /&gt;</span><br><span class=\"line\">      &lt;ExpensiveTree onSubmit=&#123;handleSubmit&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæ€»çš„æ¥è¯´ï¼Œå®˜ç½‘çš„å®ç°æ˜¯å°† <code>callback</code> ä½œä¸º <code>ref</code> å¯¹è±¡ï¼Œå¹¶ä½œä¸º <code>useCallback</code> çš„ä¾èµ–ï¼Œä¸ä¼šé¢‘ç¹æ”¹å˜ï¼›å¦‚æœåœ¨å‡½æ•° <code>handleSubmit</code> ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ <code>text</code> ï¼Œç›´æ¥ä½¿ç”¨ <code>test</code> å³å¯ã€‚ç¬¬äºŒç§å®ç°æ–¹å¼æ˜¯æŠŠç»å¸¸å˜åŒ–çš„å€¼ä½œä¸º <code>ref</code> å¯¹è±¡ï¼Œè¿”å›å€¼ <code>useCallback</code> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>refs =&gt; callback</code> ï¼Œä¾èµ–æ˜¯ç©ºæ•°ç»„ï¼›è¿™æ—¶å¦‚æœè¦åœ¨å‡½æ•° <code>handleSubmit</code> ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ <code>text</code> ï¼Œå¿…é¡»ä½¿ç”¨ <code>refs.test</code> ï¼Œå¦åˆ™è®¿é—®çš„åªæ˜¯ <code>test</code> çš„åˆå§‹å€¼ã€‚<br>\nâ€ƒâ€ƒReact åšå¤§ç²¾æ·±ï¼Œæ¥ä¸‹æ¥è¦å¥½å¥½ç ”è¯»ä¸€ä¸‹è¿™ä¸ª <a href=\"https://reactjs.org/docs/hooks-faq.html\" target=\"_blank\" rel=\"noopener\">FAQ</a>ã€‚<br>\näºŒã€ä»Šæ—¥ç½‘å€<br>\nâ€ƒâ€ƒä¸€ä¸ª <a href=\"https://www.emojicopy.com/\" target=\"_blank\" rel=\"noopener\">emoji copy</a> ç½‘ç«™ï¼Œæˆ‘ä»¬ ğŸ‘§ å°±æ˜¯å–œæ¬¢è¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ã€‚</p>\n<h4 id=\"2019715\">2019/7/15</h4>\n<p>â€ƒâ€ƒä»Šå¤©åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ React Hooks åˆè¸©å‘äº†ï¼Œçœ‹æ¥è‡ªå·±å¯¹è¿™éƒ¨åˆ†è¿˜æ˜¯æ²¡æœ‰ç†è§£é€å½»ã€‚åœ¨ä½¿ç”¨ <code>useCallback</code> å’Œ <code>useEffect</code> æ—¶ï¼Œè¦æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥çš„ <code>[deps]</code>ã€‚å¦‚æœä½¿ç”¨ <code>useCallback(fn,[deps])</code> ï¼Œ <code>[deps]</code> åº”è¯¥åŒ…å«å‡½æ•° <code>fn</code> æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼›å¦‚æœä½¿ç”¨ <code>useEffect(fn,[deps])</code> ï¼Œ å½“ <code>deps</code> çš„å€¼å˜åŒ–æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ <code>fn</code>ï¼Œå› æ­¤<code>[deps]</code> ä¸ä¸€å®šè¦åŒ…å«å‡½æ•° <code>fn</code> æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼Œè€Œæ˜¯åº”è¯¥ä¼ å…¥ä¼šå¼•èµ·è¯¥å‡½æ•°æ‰§è¡Œçš„é‚£äº›å‚æ•°ã€‚<br>\nâ€ƒâ€ƒä»Šæ—¥è¸©å‘è®°å½•ï¼šä¸ºäº†ä¼˜åŒ–å­ç»„ä»¶ï¼Œä½œä¸º <code>props</code> çš„å‡½æ•°éƒ½ä½¿ç”¨ <code>useCallback</code> åŒ…è£¹äº†ï¼Œå¹¶ä¼ å…¥äº†ç©ºæ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ã€‚ä½†æ˜¯å‡½æ•°ä¸­çš„è¿ç®—éœ€è¦ç”¨åˆ°ç»„ä»¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœæ²¡æœ‰å°†è¯¥å˜é‡ä½œä¸º <code>deps</code> ï¼Œè¿™ä¸ªå˜é‡å°±ä¼šä¸€ç›´ä¿æŒåˆå§‹å€¼ï¼Œå€¼å¹¶ä¸ä¼šæ”¹å˜ï¼Œè¿è¡Œç»“æœå°±ä¼šä¸é¢„æœŸä¸ç¬¦ã€‚ï¼ˆçœŸçš„å¤ªè ¢äº†ï¼Œç¼“ç¼“èººå€’ï¼‰</p>\n<h4 id=\"2019714\">2019/7/14</h4>\n<p>å‘¨æœ«å½“ç„¶æ˜¯çº¦ä¼šå•¦ã€‚ğŸ˜</p>\n<h4 id=\"2019713\">2019/7/13</h4>\n<p>ä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://stackoverflow.com/questions/53446020/how-to-compare-oldvalues-and-newvalues-on-react-hooks-useeffect\" target=\"_blank\" rel=\"noopener\">How to compare oldValues and newValues on React Hooks useEffect?</a><br>\nâ€ƒâ€ƒ React class ç»„ä»¶æä¾›äº† <code>ComponentDidUpdate</code> ä¹‹ç±»çš„æ–¹æ³•æ¥è·å–åˆ°å½“å‰ <code>props</code> å’Œå‰ä¸€ä¸ª <code>props</code> ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒï¼Œå†³å®šæ˜¯å¦è¿›è¡Œæ›´æ–°ã€‚å‡½æ•°å¼ç»„ä»¶åªæœ‰ <code>useEffect</code> å‡½æ•°æ¥æ¨¡ä»¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–ç»„ä»¶å…ˆå‰çš„ <code>props</code> æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ custom hook ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function usePrevious(value) &#123;</span><br><span class=\"line\">  const ref = useRef();</span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    ref.current = value;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  return ref.current;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒä¹‹ååœ¨ <code>useEffect</code> ä¸­ä½¿ç”¨ä¸Šé¢çš„å‡½æ•°æ¥æ¨¡æ‹Ÿ <code>ComponentDidUpdate</code> ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const Component = (props) =&gt; &#123;</span><br><span class=\"line\">    const &#123;receiveAmount, sendAmount &#125; = props</span><br><span class=\"line\">    const prevAmount = usePrevious(&#123;receiveAmount, sendAmount&#125;);</span><br><span class=\"line\">    useEffect(() =&gt; &#123;</span><br><span class=\"line\">        if(prevAmount.receiveAmount !== receiveAmount) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         // process here</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if(prevAmount.sendAmount !== sendAmount) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         // process here</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, [receiveAmount, sendAmount])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæœ‰æ—¶å€™åœ¨ debug æ—¶ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ç»„ä»¶ä¸ºä»€ä¹ˆä¼šé‡æ–°æ¸²æŸ“ï¼Œæ˜¯é‚£äº› <code>props</code> æ›´æ–°äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥è·å– <code>prevProps</code>ï¼Œå¹¶åœ¨å‡½æ•°ç»„ä»¶æœ€å¼€å§‹æ—¶å†™ä¸€ä¸ª <code>useEffect</code> å°†å‚æ•°éƒ½æ‰“å°å‡ºæ¥ï¼Œä½¿ç”¨ <code>===</code> æ¯”è¾ƒã€‚</p>\n<h4 id=\"2019712\">2019/7/12</h4>\n<p>ä¸€ã€ä»Šæ—¥æŠ€èƒ½<br>\nâ€ƒâ€ƒé¡¹ç›®ä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ° JSON å­—ç¬¦ä¸²çš„è§£æï¼Œè§£æå‡ºé”™å°±æ‰‘è¡—äº†ï¼Œä¸€èˆ¬æ˜¯ç”¨ <code>try {...} catch {...}</code> åŒ…è£¹ã€‚ä»Šå¤©å¯¼å¸ˆåœ¨ code review æ—¶å»ºè®®æˆ‘ä½¿ç”¨å¦‚ä¸‹å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿå¯ä»¥è¦†ç›–ç©ºå­—ç¬¦ä¸²çš„æ£€æµ‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function safeJsonParse&lt;T&gt;(str): &#123; ok: true, value: T &#125; | &#123; ok: false &#125; &#123;</span><br><span class=\"line\">  try &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      ok: true,</span><br><span class=\"line\">      value: JSON.parse(str)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; catch &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      ok: false</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>äºŒã€ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://imweb.io/topic/5b72d4ef15554e6d3409f817\" target=\"_blank\" rel=\"noopener\">ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†</a>ã€‚<br>\nâ€ƒâ€ƒè¿™ä¸€ç¯‡å¾ˆå¥½åœ°æ¢³ç†äº†è¿›ç¨‹ã€çº¿ç¨‹ã€æµè§ˆå™¨<strong>å¤šè¿›ç¨‹</strong>ã€æµè§ˆå™¨å†…æ ¸<strong>å¤šçº¿ç¨‹</strong>ã€JSå•çº¿ç¨‹ã€JSè¿è¡Œæœºåˆ¶çš„ç›¸å…³çŸ¥è¯†ï¼Œå¾ˆè¿è´¯ï¼Œå»ºè®®æ—¶ä¸æ—¶å›é¡¾ã€‚ç®€å•è®°å½•å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š<br>\n1ï¼‰è¿›ç¨‹æ˜¯CPUèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½ã€‚ï¼ˆæƒ³å½“å¹´è€ƒæ“ä½œç³»ç»Ÿçš„æ—¶å€™è¿˜èƒŒå¾—æ»šç“œçƒ‚ç†Ÿï¼‰<br>\n2ï¼‰<strong>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</strong>ï¼ŒåŒ…æ‹¬çš„ä¸»è¦è¿›ç¨‹æœ‰ï¼š</p>\n<ul>\n<li>Browserè¿›ç¨‹ï¼ˆæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œåªæœ‰ä¸€ä¸ªï¼‰</li>\n<li>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼ŒRendererè¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰ï¼šé»˜è®¤æ¯ä¸ªTabä¸€ä¸ªè¿›ç¨‹</li>\n<li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹</li>\n<li>GPUè¿›ç¨‹ï¼š3Dç»˜åˆ¶</li>\n</ul>\n<p>3ï¼‰é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼Œå®ƒæ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸»è¦å¸¸é©»çº¿ç¨‹æœ‰ï¼š</p>\n<ul>\n<li>GUIæ¸²æŸ“çº¿ç¨‹ï¼šæ¸²æŸ“é¡µé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ï¼Œrepaint å’Œ reflow ç­‰ã€‚</li>\n<li>JSå¼•æ“çº¿ç¨‹ï¼šå¤„ç†ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸ GUI æ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚</li>\n<li>äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šæ§åˆ¶äº‹ä»¶å¾ªç¯ï¼ŒæŠŠäº‹ä»¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æœ«å°¾ã€‚</li>\n<li>å®šæ—¶è§¦å‘çº¿ç¨‹ï¼š<code>setTimeout</code> å’Œ <code>setInterval</code>ï¼ŒåŒæ ·ä¹Ÿæ˜¯è®¡æ—¶å®Œæ¯•åæ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾ã€‚</li>\n<li>å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹</li>\n</ul>\n<p>4ï¼‰Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ä¹‹é—´æ˜¯éœ€è¦é€šä¿¡çš„<br>\n5ï¼‰æ—¶é—´å¾ªç¯æœºåˆ¶ <code>Event Loop</code> ï¼šJSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡éƒ½ä¼šåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼›ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ä¸€ä¸ª<strong>ä»»åŠ¡é˜Ÿåˆ—/äº‹ä»¶é˜Ÿåˆ—</strong>ï¼Œå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œç»“æœä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸­æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°æ‰§è¡Œæ ˆä¸­å¼€å§‹æ‰§è¡Œã€‚<br>\n6ï¼‰è¿›é˜¶ï¼šmacrotask / task å’Œ microtask/ jobã€‚ES6ä¸­çš„ <code>Promise</code> å°±å±äº microtask å¾®ä»»åŠ¡ ï¼Œè€Œä¸»ä»£ç å—ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ—¶é—´å¦‚ <code>setTimeout</code> å’Œ <code>setInterval</code> å°±å±äº macrotask å®ä»»åŠ¡ã€‚æ€»ç»“çš„è¿è¡Œæœºåˆ¶å°±æ˜¯ï¼š</p>\n<ul>\n<li>æ‰§è¡Œå®ä»»åŠ¡ã€‚ï¼ˆä»æ‰§è¡Œæ ˆä¸­è·å–ï¼Œå¦‚æœæ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li>\n<li>æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ— Job Queues ä¸­ã€‚ï¼ˆä½œè€…çŒœæµ‹è¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“çº¿ç¨‹ç»´æŠ¤ï¼Œå› ä¸ºæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰</li>\n<li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³ä¾æ¬¡æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰å¾®ä»»åŠ¡ã€‚</li>\n<li>æ£€æŸ¥æ¸²æŸ“ï¼Œç”± GUI çº¿ç¨‹æ¥ç®¡ã€‚</li>\n<li>æ¸²æŸ“å®Œæ¯•åï¼Œç”± JS å¼•æ“çº¿ç¨‹æ¥ç®¡ï¼Œä»æ—¶é—´é˜Ÿåˆ—ä¸­è·å–å¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚</li>\n</ul>\n<p>7ï¼‰åœ¨ç¬¬å…­ç‚¹ä¸­æåˆ°çš„æ˜¯ä¸€ä¸ªè¿›é˜¶çš„æ¦‚å¿µï¼Œå¯¹åº”ä¸€é“é¢˜ç›®ï¼Œå¦‚æœä»£ç ä¸­ä¾æ¬¡æœ‰ <code>setTimeout</code> å’Œ <code>Promise</code> ï¼Œæ˜¯ä¼šå…ˆæ‰“å°å‡º <code>Promise</code> çš„æ‰§è¡Œç»“æœçš„ã€‚</p>\n<h4 id=\"2019711\">2019/7/11</h4>\n<p>â€ƒâ€ƒ React 16.8 æå‡ºäº† <code>hook</code> çš„æ¦‚å¿µï¼Œå‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ã€‚ç°åœ¨çš„å·¥ä½œé¡¹ç›®å·²ç»æ‘’å¼ƒäº† <code>class</code> ï¼Œæ”¹ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œæ­£åœ¨æ…¢æ…¢æ‘¸ç´¢ä¸­ã€‚ä»Šå¤©åœ¨è…¾è®¯<a href=\"http://imweb.io/\" target=\"_blank\" rel=\"noopener\">IMWebå‰ç«¯åšå®¢</a>ä¸­çœ‹åˆ°äº†ä¸¤ç¯‡ä»‹ç» <code>React hook</code> çš„æ–‡ç« ï¼Œå—ç›ŠåŒªæµ…ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚<br>\nä¸€ã€<a href=\"https://imweb.io/topic/5cd845cadcd62f86299fcd76\" target=\"_blank\" rel=\"noopener\">react hookâ€”â€”ä½ å¯èƒ½ä¸æ˜¯â€œæˆ‘â€æ‰€è®¤è¯†çš„useEffect</a><br>\nâ€ƒâ€ƒè¿™ç¯‡ä»‹ç»äº† <code>useEffect</code> è¿™ä¸ªAPIï¼Œç”¨å®ƒæ¨¡æ‹Ÿäº†classç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚<code>useEffect</code> ç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼Œç›¸å½“äº <code>ComponentDidMount</code> å’Œ <code>ComponentDidUpdate</code>ã€‚è¯¥APIæœ‰ä¸¤ä¸ªå‚æ•°å’Œä¸€ä¸ªè¿”å›å€¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯æ¸…é™¤å‡½æ•°ï¼Œç›¸å½“äº <code>ComponentWillUnmount</code>ï¼Œæ¯ä¸€æ¬¡ <code>render</code> éƒ½ä¼šæ‰§è¡Œå‰¯ä½œç”¨å’Œæ¸…é™¤ä¸Šä¸€æ¬¡å‰¯ä½œç”¨ã€‚<strong>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥çš„æ˜¯å‰¯ä½œç”¨å‡½æ•°æ‰€éœ€è¦çš„ä¾èµ–ï¼Œå½“ä»»ä¸€ä¾èµ–æ›´æ–°æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å‰¯ä½œç”¨å¹¶æ‰§è¡Œï¼›å¦‚æœä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç›¸å½“äº <code>ComponentDidMount</code>ï¼›å¦‚æœä¸ä¼ ï¼Œå°±æ˜¯æ²¡æœ‰è¯´æ˜è‡ªå·±æœ‰æ²¡æœ‰ä¾èµ–ï¼ˆæ³¨æ„æ˜¯ä¸çŸ¥é“æœ‰æ²¡æœ‰ï¼Œä¸æ˜¯æ²¡æœ‰ï¼ï¼‰ï¼Œæ¯æ¬¡ <code>render</code> æ—¶å°±æ‰§è¡Œï¼Œç›¸å½“äº <code>ComponentDidUpdate</code> ã€‚</strong><br>\nâ€ƒâ€ƒ æœ€åè¿˜è®²äº† <code>useEffect</code> å’Œ <code>useLayoutEffect</code> çš„åŒºåˆ«ï¼Œç®€å•æ¥è¯´å‰è€…æ˜¯å¼‚æ­¥çš„ï¼Œåè€…æ˜¯åŒæ­¥çš„ã€‚è¿˜æ²¡å¥½å¥½æ·±å…¥è¿™éƒ¨åˆ†ï¼ŒTODOã€‚<br>\näºŒã€<a href=\"https://imweb.io/topic/5d1e3657f7b5692b080f2651\" target=\"_blank\" rel=\"noopener\">å¯èƒ½ä½ çš„reactå‡½æ•°ç»„ä»¶ä»æ¥æ²¡æœ‰ä¼˜åŒ–è¿‡</a><br>\nâ€ƒâ€ƒä¼˜åŒ–é—®é¢˜çœŸæ˜¯æˆ‘ä¸€ä¸ªç—›ç‚¹ã€‚è¿™ç¯‡æ–‡ç« å¾ˆæ¸…æ¥šåœ°è§£é‡Šäº† <code>Hooks</code> ä¸€äº›å¯ç”¨äºç»„ä»¶ä¼˜åŒ–çš„APIã€‚å¼ºæ¨ï¼<br>\nâ€ƒâ€ƒ ç‰¹åˆ«åœ°ï¼Œæ–‡ç« ä»‹ç»äº†å½“å‡½æ•°ç»„ä»¶ä¸­ä¼ å…¥çš„ <code>props</code> å€¼ä¸ºå‡½æ•°æ—¶ï¼Œç”±äºæ¯ä¸€æ¬¡æ‰§è¡Œæˆ–é‡æ–°æ‰§è¡Œï¼Œä½œç”¨åŸŸé‡Œé¢ä¸€åˆ‡éƒ½æ˜¯é‡æ–°å¼€å§‹ï¼Œå‡½æ•°ä¸æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œä¸èƒ½ç”»ä¸Šç­‰å·ï¼Œå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜æ–‡ç« æå‡ºäº†å‡ ç§è§£å†³åŠæ³•ï¼š<br>\n1ï¼‰ ä½œä¸º <code>props</code> çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å¤–å®šä¹‰ï¼Œå‡½æ•°ç»„ä»¶ç”¨ <code>React.memo()</code> åŒ…è£¹ã€‚<br>\nâ€ƒâ€ƒ <code>React.memo()</code> ç±»ä¼¼äº <code>PureComponent</code> å’Œ <code>ComponentDidUpdate</code> ï¼Œå¦‚æœå‡½æ•°ç»„ä»¶çš„ <code>props</code> å€¼éƒ½ä¸€æ ·ï¼Œå°±ä¼šè·³è¿‡è¯¥ç»„ä»¶çš„æ‰§è¡Œï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œå®ç°æ€§èƒ½ä¼˜åŒ–ã€‚<br>\n2ï¼‰ ä½œä¸º <code>props</code> çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å†…å®šä¹‰ï¼Œä½¿ç”¨<code>useCallBack</code> æˆ– <code>useMemo</code>åŒ…è£¹ï¼Œå‡½æ•°ç»„ä»¶ç”¨ <code>React.memo()</code> åŒ…è£¹ã€‚<br>\nâ€ƒâ€ƒ <code>useCallback(() =&gt; {}, [deps])</code> è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ <code>deps</code> ä¸å˜æ—¶ï¼ˆå¦‚ä¼ å…¥ç©ºæ•°ç»„ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ï¼‰ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚<code>const a = useMemo(() =&gt; memorizeValue, [deps])</code>ï¼Œå½“ <code>deps</code> ä¸å˜æ—¶ï¼Œ<code>a</code> çš„å€¼è¿˜æ˜¯ä¸Šæ¬¡çš„ <code>memorizeValue</code>ï¼Œçœå»äº†é‡æ–°è®¡ç®—çš„è¿‡ç¨‹ã€‚<br>\nâ€ƒâ€ƒ æ³¨æ„å½“ <code>memorizeValue</code> æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ<code>useCallback(fn, inputs) &lt;=&gt; useMemo(() =&gt; fn, inputs)</code>ã€‚</p>\n<h4 id=\"2019710\">2019/7/10</h4>\n<p>â€ƒâ€ƒä»Šå¤©åœ¨é¡¹ç›®ä¸­æ¥è§¦åˆ°äº† <code>symbol</code>ï¼Œé‰´äºä¹‹å‰ä¸€ç›´æ²¡æœ‰æ³¨æ„è¿™ä¸ªæ•°æ®ç±»å‹ï¼Œåœ¨ä»Šå¤©è¡¥ä¸Šã€‚ <code>symbol</code> æ˜¯ ES6 æ–°å¢çš„<strong>åŸºæœ¬</strong>æ•°æ®ç±»å‹ã€‚å®ƒçš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const s1 = Symbol();</span><br><span class=\"line\">const s2 = Symbol();</span><br><span class=\"line\">console.log(s1 === s2); // false</span><br><span class=\"line\"></span><br><span class=\"line\">const s3 = new Symbol() // TypeError: Symbol is not a constructor</span><br><span class=\"line\">Symbol(&quot;foo&quot;) === Symbol(&quot;foo&quot;); // false</span><br></pre></td></tr></table></figure>\n<p><code>Symbol()</code> è¿”å›çš„æ¯ä¸ª <code>symbol</code> å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚å®ƒæœ€å¸¸è¢«ç”¨äºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const obj = &#123;&#125;</span><br><span class=\"line\">const foo = Symbol(&quot;foo&quot;)</span><br><span class=\"line\">obj[foo] = &quot;foo&quot;</span><br><span class=\"line\">obj.bar = &quot;bar&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(obj); // &#123; bar: &quot;bar&quot; , Symbol(foo): &quot;foo&quot;&#125;</span><br><span class=\"line\">console.log(foo in obj); // true</span><br><span class=\"line\">console.log(obj[foo]); // foo</span><br><span class=\"line\">console.log(Object.keys(obj)); // [&quot;bar&quot;]</span><br><span class=\"line\">console.log(Object.getOwnPropertySymbols(obj)) // [Symbol(foo)]</span><br></pre></td></tr></table></figure>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ <code>Object.key()</code> ä¸ä¼šè¿”å› <code>symbol</code> å€¼ï¼ŒåŒç†ï¼Œ<code>Object.getOwnPropertyNames()</code>ã€<code>for..in</code>ã€<code>for...of</code> ä¹Ÿä¸ä¼šè¿”å›ã€‚<code>JSON.stringify()</code> ä¹Ÿä¼šå¿½ç•¥ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JSON.stringify(&#123;[Symbol(&apos;foo&apos;)]: &apos;foo&apos;&#125;);                 </span><br><span class=\"line\">// &apos;&#123;&#125;&apos;</span><br></pre></td></tr></table></figure>\n<p><code>Symbol</code> è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ã€‚ <code>Symbol.for(key)</code> æ˜¯æ ¹æ®æŒ‡å®šçš„ <code>key</code> æœç´¢ç°æœ‰çš„ <code>symbol</code> å¹¶è¿”å›, å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šä½¿ç”¨ <code>key</code> åœ¨å…¨å±€çš„ <code>symbol</code> æ³¨å†Œè¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>symbol</code> ã€‚<code>Symbol.keyFor(sym)</code> æ˜¯åœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­æ£€ç´¢ï¼Œè¿”å›å…±äº«çš„ <code>symbol key</code> ã€‚</p>\n<h4 id=\"201979\">2019/7/9</h4>\n<p>ä¸€ä¸ªä¸å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼šè®©å‡½æ•°åœ¨å†…éƒ¨è·å–è‡ªå·±æ‰€éœ€çš„ä¾èµ–ã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// ä¸€ä¸ªå¯å¤ç”¨å‡½æ•°</span><br><span class=\"line\">function doSomething(key: string) &#123;</span><br><span class=\"line\">    return (</span><br><span class=\"line\">        &lt;Button</span><br><span class=\"line\">            loading = &#123;key===&quot;str1&quot;? Compoment1 : Compoment2&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">            button</span><br><span class=\"line\">        &lt;/Button&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>lodaing</code> æ‰€éœ€çš„ç»„ä»¶åº”è¯¥æ˜¯ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥çš„ï¼Œä¸ç„¶å¦‚æœæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª <code>key</code>ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥äº†è¯¥åœ°æ–¹çš„ä¿®æ”¹ã€‚è¿™ä¸ªè§‚ç‚¹ç±»ä¼¼äºä¾èµ–åè½¬ã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<h4>å‰è¨€</h4>\n<p>ğŸ“ recap and cheat sheet ï¼Œè®°å½•æ¯å¤©å­¦åˆ°çš„çŸ¥è¯†/æƒ³æ³•ã€‚<br>\nğŸ”Š æ¯æ—¥ä¸€é—®ï¼šä»Šå¤©ä½ æ¯”æ˜¨å¤©æ›´åšå­¦äº†å—ï¼Ÿ</p>\n<h4>2019/8/25</h4>\n<p>ä»Šæ—¥è¸©å‘è®°å½•ï¼š<br>\nå±•å¼€è¯­æ³•ï¼ˆspread syntaxï¼‰åªèƒ½å–åˆ° enumerable propertiesã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const imageData = new ImageData(200, 100);</span><br><span class=\"line\">// ImageData &#123; width: 200, height: 100, data: Uint8ClampedArray[80000] &#125;</span><br><span class=\"line\">const result = &#123;...imageData&#125;</span><br><span class=\"line\">// result åªä¼šåŒ…å« data ï¼Œä¸èƒ½å–åˆ° width å’Œ height</span><br></pre></td></tr></table></figure>\n<h4>2019/8/24</h4>\n<p>é¿å…ç»„ä»¶é‡æ–°æŒ‚è½½ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶çš„å½¢å¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class BussinessProvider &#123;</span><br><span class=\"line\">  sp$ = new Subject&lt;&#123;url: string, slic: string&#125;&gt;();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Canvas &#123;</span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">     this.props.sp$.pipe(takeUntil(this.unmount$)).subscribe(ev =&gt; &#123;</span><br><span class=\"line\">        if (ev.url === this.url) &#123;</span><br><span class=\"line\">           this.handleSuperPixelChange(ev.slic)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4>2019/8/24</h4>\n<p>ä¸€ã€Promise</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">new Promise((resolve,reject) =&gt; &#123;</span><br><span class=\"line\">  // do something...</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">promise.then(onFulfilled[, onRejected]);</span><br><span class=\"line\">promise.then(value =&gt; &#123;</span><br><span class=\"line\">  // fulfillment</span><br><span class=\"line\">&#125;, reason =&gt; &#123;</span><br><span class=\"line\">  // rejection</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise.catch(onRejected);</span><br><span class=\"line\">promise.catch(function(reason) &#123;</span><br><span class=\"line\">   // rejection</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>ç®€å•æ¥è¯´ï¼Œ<code>reject(value)</code> å¯ä»¥è¢« <code>promise.then</code> ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œä¹Ÿå¯ä»¥è¢« <code>promise.catch</code> æ•è·ã€‚å¦‚æœä¸¤è€…åŒæ—¶å­˜åœ¨ï¼Œä¼šè¢« <code>promise.then</code> ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°æ•è·ï¼Œ<code>promise.catch</code> æ— è¾“å‡ºã€‚</p>\n<p>ä¸‹è½½å›¾ç‰‡çš„å…¸å‹ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function loadImage(url) &#123;</span><br><span class=\"line\">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class=\"line\">    let img = new Image();</span><br><span class=\"line\">    // img.onload = () =&gt; resolve(img)</span><br><span class=\"line\">    img.addEventListener(&apos;load&apos;, e =&gt; resolve(img));</span><br><span class=\"line\">    // img.onerror = () =&gt; reject(XXX)</span><br><span class=\"line\">    img.addEventListener(&apos;error&apos;, () =&gt; &#123;</span><br><span class=\"line\">      reject(new Error(`Failed to load image&apos;s URL: $&#123;url&#125;`));</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    img.src = url;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">loadImage(&apos;http://thecatapi.com/api/images/get?format=src&amp;type=jpg&amp;size=small&apos;)</span><br><span class=\"line\">  .then(img =&gt; document.getElementById(&apos;image-holder&apos;).appendChild(img))</span><br><span class=\"line\">  .catch(error =&gt; console.error(error));</span><br></pre></td></tr></table></figure>\n<p>äºŒã€await<br>\n<code>[rv] = await expression</code>:</p>\n<blockquote>\n<p>TL;DR returns the fulfilled value of the promise,<br>\nThe await expression causes async function execution to pause until a Promise is settled, that is fulfilled or rejected, and to resume execution of the async function after fulfillment. When resumed, the value of the await expression is that of the fulfilled Promise.<br>\nIf the Promise is rejected, the await expression throws the rejected value.<br>\nIf the value of the expression following the await operator is not a Promise, itâ€™s converted to a resolved Promise.</p>\n</blockquote>\n<h4>2019/8/23</h4>\n<p><code>String.prototype.localeCompare()</code></p>\n<blockquote>\n<p>return a number, indicating whether the reference string comes before, after or is the same as the compareString in sort order. Returns one of three values:<br>\n-1: if the reference string is sorted before the compareString<br>\n0: if the two strings are equal<br>\n1: if the reference string is sorted after the compareString</p>\n</blockquote>\n<p><code>Array.prototype.sort()</code></p>\n<blockquote>\n<p>sorts the elements of an array in place and returns the sorted array.</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">items.sort((a,b) =&gt; a.localeCompare(b))</span><br></pre></td></tr></table></figure>\n<h4>2019/8/21</h4>\n<p>ä»Šæ—¥é˜…è¯»ï¼š<br>\n<a href=\"https://stackoverflow.com/questions/52499617/what-is-the-difference-between-npm-install-and-npm-ci\" target=\"_blank\" rel=\"noopener\">What is the difference between â€œnpm installâ€ and â€œnpm ciâ€?</a><br>\n<a href=\"https://medium.com/coinmonks/everything-you-wanted-to-know-about-package-lock-json-b81911aa8ab8\" target=\"_blank\" rel=\"noopener\">Everything You Wanted To Know About package-lock.json But Were Too Afraid To Ask</a></p>\n<h4>2019/8/20</h4>\n<p>æ¨¡ä»¿ react hook <code>useState</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š<br>\nâ€ƒâ€ƒå› ä¸ºåœ¨ jest æµ‹è¯•ä¸­æŸä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ <code>useState</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†™äº†ä¸€ä¸ªæ›¿ä»£ï¼Œä¸è¿‡ä¸ç¡®å®šæ˜¯å¦æœ‰é”™ã€‚ğŸ˜³</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// for example</span><br><span class=\"line\">const [str,setStr] = useState&lt;string[]&gt;([]);</span><br><span class=\"line\"></span><br><span class=\"line\">// fake setStr</span><br><span class=\"line\">let str:string[] = [];</span><br><span class=\"line\">const setStr = (val: string[] | ((prev:string[]) =&gt; string[])) =&gt; &#123;</span><br><span class=\"line\">  if (typeof val === &quot;object&quot;) &#123;</span><br><span class=\"line\">    str = val;</span><br><span class=\"line\">  &#125; else if (typeof val === &quot;function&quot;) &#123;</span><br><span class=\"line\">    str = val(str)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4>2019/8/19</h4>\n<p>ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://searchenginelaws.com/seo/what-is-rel-noopener-noreferrer-tag/\" target=\"_blank\" rel=\"noopener\">What is rel=noopener noreferrer link</a><br>\nâ€ƒâ€ƒä½¿ç”¨ <code>a</code> æ ‡ç­¾ï¼Œä¸”å±æ€§ <code>target=&quot;_blank&quot;</code> æ—¶ï¼Œéœ€è¦åŠ ä¸Š <code>rel=&quot;noopener noreferrer&quot;</code> ã€‚å¯ä»¥é˜²æ­¢æ–°çª—å£åˆ©ç”¨ <code>window.opener</code> çš„ç‰¹æ€§çªƒå–åŸçª—å£ä¿¡æ¯ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœ window A æ‰“å¼€äº† window Bï¼Œé‚£ä¹ˆ B.opener ä¼šè¿”å› Aã€‚å¦‚æœåŠ ä¸Š <code>rel=&quot;noopener&quot;</code> ï¼Œä¼šè¿”å› null ã€‚</p>\n<h4>2019/8/12</h4>\n<p>ä¸€ã€download files using axios</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import axios from &quot;axios&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">axios.get(url,&#123;</span><br><span class=\"line\">  responseType: &apos;blob&apos;, // important</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    &apos;Authorization&apos;: AuthStr </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(resp =&gt; &#123;</span><br><span class=\"line\">  const &#123;data&#125; = resp;</span><br><span class=\"line\">  const file = new File([data],&quot;data.txt&quot;);</span><br><span class=\"line\">  const objectURL = URL.createObjectURL(file);</span><br><span class=\"line\">  const a = document.createElement(&quot;a&quot;);</span><br><span class=\"line\">  a.href = objectURL;</span><br><span class=\"line\">  a.download = &quot;data.txt&quot;;</span><br><span class=\"line\">  a.click();</span><br><span class=\"line\">  URL.revokeObjectURL(objectURL);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒå¦‚æœæ˜¯å•æ¬¡ç‚¹å‡»ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ŒChrome åªä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—ä¸‹è½½æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥åŠ ä¸Š <code>setTimeout</code> ï¼Œè§¦å‘å¤šæ¬¡ä¸‹è½½ï¼Œæˆ–æ˜¯åŠ ä¸Š <code>a.target = &quot;_blank&quot;</code> ï¼Œæ‰“å¼€å¤šä¸ªæ–°çª—å£ã€‚<br>\näºŒã€curl<br>\næŸ¥çœ‹å‘½ä»¤ï¼š<br>\n<code>curl --help</code><br>\n-H æŒ‡å®šHeaderï¼š<br>\n<code>curl -H &quot;Authorization: XXXXXXXX&quot; URL</code><br>\n<code>curl POST -d data -H &quot;Authorization: XXXXXXXX&quot; URL</code></p>\n<h4>2019/8/9</h4>\n<p>ä¸€ã€<a href=\"https://www.codebeast.dev/usestate-vs-useref-re-render-or-not/\" target=\"_blank\" rel=\"noopener\">useRef vs useState: Should we re-render or not?</a><br>\n<img src=\"FE_20190809.png\" alt=\"FE_20190808\"><br>\näºŒã€Hooks ç›‘å¬é”®ç›˜äº‹ä»¶<br>\nkeyCode: <a href=\"https://keycode.info/\" target=\"_blank\" rel=\"noopener\">https://keycode.info/</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function useKeyPress(targetKey) &#123;</span><br><span class=\"line\">  const [keyPressed, setKeyPressed] = useState(false);</span><br><span class=\"line\"></span><br><span class=\"line\">  function downHandler(&#123; key &#125;) &#123;</span><br><span class=\"line\">    if (key === targetKey) &#123;</span><br><span class=\"line\">      setKeyPressed(true);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  const upHandler = (&#123; key &#125;) =&gt; &#123;</span><br><span class=\"line\">    if (key === targetKey) &#123;</span><br><span class=\"line\">      setKeyPressed(false);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    window.addEventListener(&apos;keydown&apos;, downHandler);</span><br><span class=\"line\">    window.addEventListener(&apos;keyup&apos;, upHandler);</span><br><span class=\"line\">    return () =&gt; &#123;</span><br><span class=\"line\">      window.removeEventListener(&apos;keydown&apos;, downHandler);</span><br><span class=\"line\">      window.removeEventListener(&apos;keyup&apos;, upHandler);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  return keyPressed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4>2019/8/8</h4>\n<p>â€ƒâ€ƒå·¥ç¨‹ä¸­ç»å¸¸ä¼šçœ‹åˆ° CI/CD çš„æ¦‚å¿µã€‚CI æŒ‡çš„æ˜¯æŒç»­é›†æˆï¼Œä¾§é‡äºç®€åŒ–å‘å¸ƒå‡†å¤‡å·¥ä½œçš„å®è·µï¼Œæ¯”å¦‚è‡ªåŠ¨æµ‹è¯•ï¼›CD æŒ‡çš„æ˜¯æŒç»­äº¤ä»˜ï¼Œæ„å‘³ç€ä¸ä»…è®©æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œè®©å‘å¸ƒæµç¨‹ä¹Ÿè‡ªåŠ¨åŒ–äº†ã€‚æ›´å¤šæ¦‚å¿µå¯¹æ¯”å¯ä»¥å‚è€ƒï¼š<a href=\"https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment\" target=\"_blank\" rel=\"noopener\">Continuous integration VS continuous delivery VS continuous deployment</a><br>\nâ€ƒâ€ƒä¸‹é¢è¿™ä¸ªå›¾å¾ˆæ¸…æ™°åœ°æè¿°äº†ä¸‰è€…çš„ä¸åŒï¼š<br>\n<img src=\"FE_20190808.png\" alt=\"FE_20190808\"><br>\nâ€ƒâ€ƒåœ¨ gitlab ä¸Šçš„å®è·µå¯ä»¥å‚è€ƒï¼š<a href=\"https://mp.weixin.qq.com/s/z2f1i2FgrVGofQR6nKTd1A\" target=\"_blank\" rel=\"noopener\">åŸºäº GitLab CI/CD çš„è‡ªåŠ¨åŒ–æ„å»ºã€å‘å¸ƒå®è·µ</a></p>\n<h4>2019/8/7</h4>\n<p>Typescript: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" target=\"_blank\" rel=\"noopener\">Discriminated Unions</a><br>\nâ€ƒâ€ƒå½“æˆ‘ä»¬æŸä¸ªå‚æ•°å¯èƒ½æœ‰å¤šä¸ªç±»å‹ï¼Œè€Œè¿™äº›ç±»å‹ä¸­åˆæœ‰å…¬å…±çš„å±æ€§æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼çº¦æŸã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Each interface has a kind property with a different string literal type. </span><br><span class=\"line\">// The kind property is called the discriminant or tag. </span><br><span class=\"line\">interface Square &#123;</span><br><span class=\"line\">    kind: &quot;square&quot;;</span><br><span class=\"line\">    size: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface Rectangle &#123;</span><br><span class=\"line\">    kind: &quot;rectangle&quot;;</span><br><span class=\"line\">    width: number;</span><br><span class=\"line\">    height: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface Circle &#123;</span><br><span class=\"line\">    kind: &quot;circle&quot;;</span><br><span class=\"line\">    radius: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// put the interfaces into a union</span><br><span class=\"line\">type Shape = Square | Rectangle | Circle;</span><br><span class=\"line\"></span><br><span class=\"line\">// use the discriminated union</span><br><span class=\"line\">function area(s: Shape) &#123;</span><br><span class=\"line\">    switch (s.kind) &#123;</span><br><span class=\"line\">        case &quot;square&quot;: return s.size * s.size;</span><br><span class=\"line\">        case &quot;rectangle&quot;: return s.height * s.width;</span><br><span class=\"line\">        case &quot;circle&quot;: return Math.PI * s.radius ** 2;</span><br><span class=\"line\">        default: return assertNever(s); // error here if there are missing cases</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Exhaustiveness checking </span><br><span class=\"line\">function assertNever(x: never): never &#123;</span><br><span class=\"line\">    throw new Error(&quot;Unexpected object: &quot; + x);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4>2019/8/6</h4>\n<p>Stack Overflow: <a href=\"https://stackoverflow.com/questions/54069253/usestate-set-method-not-reflecting-change-immediately\" target=\"_blank\" rel=\"noopener\">useState set method not reflecting change immediately.</a><br>\nâ€ƒâ€ƒä»Šå¤©åœ¨å®è·µä¸­å‘ç°ï¼Œ<code>setState</code> åé©¬ä¸Šæ‰“å°ï¼Œå¹¶ä¸ä¼šå–åˆ°æ›´æ–°åçš„å€¼ã€‚æŸ¥é˜…èµ„æ–™åå‘ç°è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ›´æ–°ï¼Œä½†ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚å¦‚ä¸‹ï¼š<br>\n<img src=\"FE_20190806.png\" alt=\"FE_20190806\"></p>\n<h4>2019/8/1</h4>\n<p>ä¸€ã€<a href=\"https://javascript.info/fetch-api\" target=\"_blank\" rel=\"noopener\">Fetch API</a><br>\nâ€ƒâ€ƒç”¨ fetch æ¥è¯·æ±‚ç½‘ç»œèµ„æºï¼Œå¯ä»¥é…ç½®ä¸åŒçš„å‚æ•°æ¥è§£å†³ç¼“å­˜ã€è·¨åŸŸç­‰é—®é¢˜ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// ä¸ç¼“å­˜è¯·æ±‚ç»“æœ </span><br><span class=\"line\">// https://stackoverflow.com/questions/29246444/fetch-how-do-you-make-a-non-cached-request</span><br><span class=\"line\">const headers = new Headers();</span><br><span class=\"line\">headers.append(&quot;pragma&quot;, &quot;no-cache&quot;);</span><br><span class=\"line\">headers.append(&quot;cache-control&quot;, &quot;no-store&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">// å®Œå…¨å¿½ç•¥ http-cache ï¼Œæ¯æ¬¡éƒ½ä»æœåŠ¡å™¨è¯·æ±‚æ•°æ®</span><br><span class=\"line\">// https://developer.mozilla.org/en-US/docs/Web/API/Request/cache</span><br><span class=\"line\">const cache: RequestCache = &quot;no-store&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">// è¯·æ±‚æ¨¡å¼ï¼Œè‹¥æœ‰çš„è¯·æ±‚ä¼šå› ä¸º cors è€Œå¤±è´¥ï¼Œå¯ä»¥è®¾ç½®ä¸º &quot;no-cors&quot;</span><br><span class=\"line\">// https://developer.mozilla.org/en-US/docs/Web/API/Request/mode</span><br><span class=\"line\">const mode: RequestMode = needCors ? &quot;cors&quot; : &quot;no-cors&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">await fetch(url. &#123;headers, cache, mode&#125;)</span><br><span class=\"line\">  .then(res =&gt; res.blob())</span><br><span class=\"line\">  .then(blob =&gt; &#123;</span><br><span class=\"line\">    // doSomething with blob</span><br><span class=\"line\">    const url = URL.createObjectURL(blob)</span><br><span class=\"line\">    let a = document.createElement(&apos;a&apos;)</span><br><span class=\"line\">    a.download = &apos;example.zip&apos;</span><br><span class=\"line\">    a.href = url</span><br><span class=\"line\">    document.body.appendChild(a)</span><br><span class=\"line\">    a.click()</span><br><span class=\"line\">    document.body.removeChild(a)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(err =&gt; &#123;</span><br><span class=\"line\">    console.log(err)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .finally(() =&gt; &#123;</span><br><span class=\"line\">    // doSomething</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒå…³äº <code>res.blob()</code> ï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹ä¸Š<a href=\"https://zhuanlan.zhihu.com/p/32909043\" target=\"_blank\" rel=\"noopener\">è°ˆä¸€è°ˆ Fetch API ä¸­çš„ â€œres.blob()â€</a>ï¼›ä¹Ÿå¯ä»¥å‚è€ƒ <a href=\"https://github.github.io/fetch/\" target=\"_blank\" rel=\"noopener\">fetch documentation</a> ï¼Œè¿™ä¸€ç¯‡æ¯”è¾ƒè¯¦ç»†ï¼Œä¹Ÿæä¾›äº†è¾ƒå¤šå…¶ä»–çš„ä¾‹å­ã€‚<br>\nå…³äºæµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼ŒMedium ä¸Šè¿™ç¯‡ <a href=\"https://medium.com/@codebyamir/a-web-developers-guide-to-browser-caching-cc41f3b73e7c\" target=\"_blank\" rel=\"noopener\">A Web Developerâ€™s Guide to Browser Caching</a> å†™å¾—ä¸é”™ã€‚å¦‚æœå­˜åœ¨ä»£ç†æœåŠ¡å™¨ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®äº† <code>mode: 'no-store'</code> ï¼Œä»£ç†æœåŠ¡å™¨ä¹Ÿä¼šç¼“å­˜ã€‚ä¸ºäº†é¿å…è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡å‘é€è¯·æ±‚æ—¶æ„é€ æ–°çš„ URL ï¼ŒåŠ ä¸Šæ—¶é—´æˆ³ <code>?t=Date.now()</code> ã€‚ğŸ®ğŸº<br>\näºŒã€Jest<br>\nâ€ƒâ€ƒæˆ‘ä»¬åœ¨ä½¿ç”¨ jest æµ‹è¯•æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å¼•å…¥ä¸€äº›å¤–éƒ¨æ–‡ä»¶/å¤–éƒ¨å˜é‡ï¼Œå¦‚ä» <code>config.json</code> æ–‡ä»¶ä¸­å¼•å…¥æŸä¸ªå˜é‡ã€‚ä¸ºäº†åœ¨æµ‹è¯•æ–‡ä»¶ä¸­å¯ä»¥è®¿é—®åˆ°è¯¥å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>jest.config.js</code> ä¸­é…ç½®å…¨å±€å˜é‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  globals: &#123;</span><br><span class=\"line\">    API_BASE: &quot;&quot;,</span><br><span class=\"line\">    DATA_API: &quot;&quot;,</span><br><span class=\"line\">    TRACK_API: &quot;&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  setupFiles: [&quot;./jestSetup.ts&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒç”±äº <code>globals</code> åªæ”¯æŒ JSON æ ¼å¼çš„å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®šä¹‰å…¨å±€å‡½æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>setupFiles</code>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// jestSetup.ts</span><br><span class=\"line\">(global as any).fn= () =&gt; &#123;&#125;;</span><br><span class=\"line\">(global as any).variable = &quot;XXX&quot;;</span><br></pre></td></tr></table></figure>\n<h4>2019/7/31</h4>\n<p>1ï¼‰<code>position: fixed</code> å’Œ flex å¸ƒå±€æ˜¯ä¸èƒ½åŒæ—¶èµ·ä½œç”¨çš„ã€‚ç»å¯¹å¸ƒå±€è„±ç¦»æ–‡æ¡£æµï¼Œä¸ä¼šå‚ä¸åˆ° flex layout ä¸­ã€‚å¦‚æœæƒ³å®ç°å·¦ä¾§èœå•æ ï¼Œå³ä¾§å†…å®¹ï¼Œä¸¤è€…ä¸åŒæ—¶æ»šåŠ¨ï¼ˆèœå•æ  fixedï¼‰ï¼Œä½†èœå•æ çš„å¤§å°å¯ä»¥æ”¹å˜ï¼ˆflex çˆ¶å¸ƒå±€ï¼‰ã€‚å¯ä»¥è®©çˆ¶å®¹å™¨æ˜¯ flex å¸ƒå±€ï¼Œå·¦ä¾§èœå•æ å’Œå³ä¾§å†…å®¹åŒºåŸŸéƒ½æ˜¯ flex element ï¼Œ èœå•æ å†…éƒ¨å†æœ‰ä¸€ä¸ª <code>position: fixed</code> çš„ div ã€‚<br>\n2ï¼‰å¦‚æœæƒ³è®© <code>position: fixed</code> çš„å…ƒç´ ç›¸å¯¹çˆ¶å®¹å™¨å®šä½ï¼Œå¯ä»¥ç»™çˆ¶å®¹å™¨å¢åŠ  CSS å±æ€§ <code>transform: translate(0,0)</code> ã€‚å‚è€ƒï¼š<a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/position\" target=\"_blank\" rel=\"noopener\">MDN - position</a></p>\n<blockquote>\n<p>fixed: It is positioned relative to the initial containing block established by the viewport, except when one of its ancestors has a transform, perspective, or filter property set to something other than none.</p>\n</blockquote>\n<h4>2019/7/30</h4>\n<p><code>useEffect</code> ä¸­çš„å¼‚æ­¥è¯·æ±‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// é”™è¯¯å†™æ³•ï¼Œ return å¿…é¡»æ˜¯ cleanup function</span><br><span class=\"line\">useEffect(async () =&gt; &#123;</span><br><span class=\"line\">  const newVal = await asyncCall();</span><br><span class=\"line\">  setVal(newVal);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// æ­£ç¡®å†™æ³•</span><br><span class=\"line\">useEffect(() =&gt; &#123;</span><br><span class=\"line\">  asyncCall().then(resp =&gt; setVal(resp.data));</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>å¥½æ–‡å…±äº«ï¼š<a href=\"https://www.robinwieruch.de/react-hooks-fetch-data/\" target=\"_blank\" rel=\"noopener\">How to fetch data with React Hooks?</a>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(() =&gt; &#123;</span><br><span class=\"line\">  async function fetchMyAPI() &#123;</span><br><span class=\"line\">    let url = &apos;http://something/&apos; + productId;</span><br><span class=\"line\">    let config = &#123;&#125;;</span><br><span class=\"line\">    const response = await myFetch(url);</span><br><span class=\"line\">    console.log(response);</span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">  fetchMyAPI();</span><br><span class=\"line\">&#125;, [productId]);</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœè¦ä¿è¯è¯·æ±‚æŒ‰é¡ºåºå‘å‡ºï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹å†™æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(() =&gt; &#123;</span><br><span class=\"line\">  let didCancel = false;</span><br><span class=\"line\"></span><br><span class=\"line\">  async function fetchMyAPI() &#123;</span><br><span class=\"line\">    let url = &apos;http://something/&apos; + productId;</span><br><span class=\"line\">    let config = &#123;&#125;;</span><br><span class=\"line\">    const response = await myFetch(url);</span><br><span class=\"line\">    if (!didCancel) &#123; // Ignore if we started fetching something else</span><br><span class=\"line\">      console.log(response);</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">  fetchMyAPI();</span><br><span class=\"line\">  return () =&gt; &#123; didCancel = true; &#125;; // Remember if we start fetching something else</span><br><span class=\"line\">&#125;, [productId]);</span><br></pre></td></tr></table></figure>\n<h4>2019/7/29</h4>\n<p>ä¸€ã€<a href=\"https://stackoverflow.com/questions/30795525/performance-now-vs-date-now\" target=\"_blank\" rel=\"noopener\">performance.now() vs Date.now()</a><br>\nâ€ƒâ€ƒåœ¨ç¨‹åºä¸­æ‰“å°æ‰§è¡Œæ—¶é—´æ—¶ï¼Œä½¿ç”¨ <code>performance.now(ï¼‰</code> æ›´å‡†ç¡®ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const start = performance.now();</span><br><span class=\"line\">doSomething();</span><br><span class=\"line\">const end = performance.now();</span><br><span class=\"line\">console.log(&quot;Call to doSomething took &quot; + (start - end) + &quot; milliseconds.&quot;);</span><br></pre></td></tr></table></figure>\n<p>äºŒã€<a href=\"https://stackoverflow.com/questions/47738344/does-javascript-slice-method-return-a-shallow-copy\" target=\"_blank\" rel=\"noopener\">Does javascript slice method return a shallow copy?</a><br>\nâ€ƒâ€ƒmdn ä¸Šå¯¹ <code>slice()</code> æ–¹æ³•çš„ä»‹ç»ï¼š</p>\n<blockquote>\n<p>The slice() method returns a shallow copy of a portion of an array into a new array object selected from begin to end (end not included) where begin and end represent the index of items in that array. The original array will not be modified.</p>\n</blockquote>\n<p>â€ƒâ€ƒæ³¨æ„è¿™é‡Œçš„æµ…å¤åˆ¶æŒ‡çš„æ˜¯å¯¹æ•°ç»„ä¸­å€¼çš„æµ…å¤åˆ¶ï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªæ•°ç»„çš„æµ…å¤åˆ¶ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ™ä¿®æ”¹æ–°æ•°ç»„æ—¶ï¼ŒåŸæ•°ç»„ä¸ä¼šæ”¹å˜ï¼›å¦‚æœæ˜¯å¯¹è±¡æ•°ç»„ï¼Œä¿®æ”¹æ–°æ•°ç»„å¯¹è±¡å€¼æ—¶ï¼ŒåŸæ•°ç»„ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const animals = [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;camel&apos;&#125;];</span><br><span class=\"line\">const newAnimals = animals.slice(2);</span><br><span class=\"line\"></span><br><span class=\"line\">newAnimals[0].name = &apos;aaa&apos;;</span><br><span class=\"line\">console.log(newAnimals); // [&#123;name: &apos;aaa&apos;&#125;]</span><br><span class=\"line\">console.log(animals);    // [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;aaa&apos;&#125;]</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæ³¨æ„å¦‚æœæ˜¯é‡æ–°èµ‹å€¼ï¼Œåˆ™ç­‰äºé‡æ–°åˆ†é…ç©ºé—´ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const animals = [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;camel&apos;&#125;];</span><br><span class=\"line\">const newAnimals = animals.slice(2);</span><br><span class=\"line\"></span><br><span class=\"line\">newAnimals[0] = &#123;name: &apos;aaa&apos;&#125;;</span><br><span class=\"line\">console.log(newAnimals); // [&#123;name: &apos;aaa&apos;&#125;]</span><br><span class=\"line\">console.log(animals);    // [&#123;name: &apos;ant&apos;&#125;, &#123;name: &apos;bison&apos;&#125;, &#123;name: &apos;camel&apos;&#125;]</span><br></pre></td></tr></table></figure>\n<h4>2019/7/26</h4>\n<p>â€ƒâ€ƒåº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦è¯·æ±‚å¹¶æ›´æ–°èœå•æ ä¸­ä»»åŠ¡çš„çŠ¶æ€ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚å®Œæˆç«‹é©¬æ›´æ–°ä¼šå¯¼è‡´ React é¢‘ç¹åˆ·æ–°ï¼Œéœ€è¦ç¼“å†²æ‰¹å¤„ç†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; runInAction &#125; from &quot;mobx&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">let handlers: Array&lt;() =&gt; void&gt; = [];</span><br><span class=\"line\">const runHandlers = () =&gt; &#123;</span><br><span class=\"line\">  runInAction(() =&gt; &#123;</span><br><span class=\"line\">    handlers.forEach(f =&gt; f());</span><br><span class=\"line\">    handlers = [];</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">for (const task of tasks) &#123;</span><br><span class=\"line\">  const &#123;data&#125; = await requestFn();</span><br><span class=\"line\">  </span><br><span class=\"line\">  handlers.push(() =&gt; &#123;</span><br><span class=\"line\">    // deal with data, update state</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  if(handlers.length &gt; 30) &#123;</span><br><span class=\"line\">    runHandlers();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">runHandlers();</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒä¸Šè¿°ä»£ç ä¸»è¦æ˜¯åˆ©ç”¨äº†è‡ªå®šä¹‰çš„ <code>handlers</code> æ¥æš‚å­˜çŠ¶æ€æ›´æ–°å‡½æ•°ï¼Œä¹‹åä½¿ç”¨ mobx æä¾›çš„ <code>runInAction</code> æ‰§è¡Œå‡½æ•°å¹¶æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çŠ¶æ€éƒ½éœ€è¦ä½¿ç”¨ <code>action</code> å‡½æ•°ï¼Œ <code>runInAction</code> æ¥å—ä¸€ä¸ªä»£ç å—å¹¶åœ¨ä¸€ä¸ª(åŒ¿å)æ“ä½œä¸­æ‰§è¡Œï¼Œæœ‰åˆ©äºåŠ¨æ€åˆ›å»ºå’Œæ‰§è¡Œæ“ä½œï¼Œ<code>runInAction(f) = action(f)()</code>ã€‚æ­¤å¤–ï¼Œå¿…è¦æ—¶è¿˜å¯åŠ ä¸Š <code>lodash.memoize(func,[resolver])</code>ï¼Œè®°å½•ä¸»å‡½æ•°è¯·æ±‚ç»“æœã€‚</p>\n<blockquote>\n<p>For one-time-actions runInAction(name?, fn) can be used, which is sugar for action(name, fn)()</p>\n</blockquote>\n<h4>2019/7/18</h4>\n<p>ä¸€ã€ç¼–ç¨‹æ¨¡å¼ï¼š<br>\nâ€ƒâ€ƒ é¦–å…ˆå…ˆè®°ä½è¿™å‡ ç§ç¼–ç¨‹æ¨¡å¼çš„ä¸­æ–‡ï¼šImperative Programming æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ï¼ŒDeclarative Programming æ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼ŒReactive Programming æ˜¯å“åº”å¼ç¼–ç¨‹ã€‚ï¼ˆæµä¸‹äº†è‹±æ–‡ä¸å¥½çš„æ³ªæ°´ï¼‰<br>\n1ï¼‰å…ˆçœ‹å‘½ä»¤å¼ç¼–ç¨‹å’Œå£°æ˜å¼ç¼–ç¨‹çš„åŒºåˆ«ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// å‘½ä»¤å¼ç¼–ç¨‹ imperative programming</span><br><span class=\"line\">const array = [0,1,2,3,4,5];</span><br><span class=\"line\">const output = [];</span><br><span class=\"line\">for (let i = 0; i &lt; array.length; i++) &#123;</span><br><span class=\"line\">  const tmp = array[i] * 2;</span><br><span class=\"line\">  output.push(tmp)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">console.log(output) // =&gt; [0,2,4,6,8,10]</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// å£°æ˜å¼ç¼–ç¨‹ declarative programming</span><br><span class=\"line\">const array = [0,1,2,3,4,5];</span><br><span class=\"line\">const output = array.map(item =&gt; item * 2);</span><br><span class=\"line\">console.log(output) // =&gt; [0,2,3,6,8,10]</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒå¾ˆæ˜æ˜¾å¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº how ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥æ­¥å‘Šè¯‰æœºå™¨æ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Œå‘Šè¯‰ä»–æ€ä¹ˆå»éå†ä¸€ä¸ªæ•°ç»„ï¼Œæ€ä¹ˆå»è¿ç®—å¾—åˆ°æœ€åçš„ç»“æœï¼Œæ€ä¹ˆå»è¾“å‡ºï¼›å£°æ˜å¼ç¼–ç¨‹çš„å…³æ³¨ç‚¹åœ¨äº what ï¼Œæˆ‘ä»¬åªå…³æ³¨æœ€åçš„ç»“æœï¼Œç”±æœºå™¨è‡ªå·±å»æ‘¸ç´¢è¿‡ç¨‹ï¼Œå¦‚ç›´æ¥è°ƒç”¨ <code>map</code> å‡½æ•°ï¼Œåªå‘Šè¯‰ç¨‹åºæˆ‘ä»¬éœ€è¦ä¸€ä¸ª2å€è¾“å‡ºã€‚<br>\n2ï¼‰æ¥ç€çœ‹å£°æ˜å¼ç¼–ç¨‹å’Œå“åº”å¼ç¼–ç¨‹çš„å¯¹æ¯”<br>\nâ€ƒâ€ƒå¯ä»¥é˜…è¯»ï¼š<a href=\"https://codepen.io/HunorMarton/post/imperative-vs-reactive\" target=\"_blank\" rel=\"noopener\">Imperative vs Reactive</a>ï¼Œè§£é‡Šå¾ˆæ¸…æ™°ï¼Œæ¯”å–»ä¹Ÿå¾ˆå½¢è±¡ï¼Œä½†æˆ‘è§‰å¾—æ–‡ç« é‡Œçš„ Imperative åº”è¯¥æ”¹æˆ Declarative æ¯”è¾ƒå‡†ç¡®ã€‚ç»§ç»­æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œä¿®æ”¹ä¸€ä¸‹å£°æ˜å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// å£°æ˜å¼ç¼–ç¨‹ declarative programming</span><br><span class=\"line\">const array = [1,2];</span><br><span class=\"line\">const output = array.map(item =&gt; item * 2);</span><br><span class=\"line\">output.forEach(item =&gt; console.log(item)) // =&gt; 2 4</span><br><span class=\"line\">array.push(3);  // =&gt; no output </span><br><span class=\"line\">array.push(4);  // =&gt; no output</span><br></pre></td></tr></table></figure>\n<p>å“åº”å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; Subject &#125; from `rxjs`;</span><br><span class=\"line\">let array = new Subject();</span><br><span class=\"line\">array.next(1);</span><br><span class=\"line\">array.next(2);</span><br><span class=\"line\"></span><br><span class=\"line\">const output = array.map(item =&gt; item * 2);</span><br><span class=\"line\">output.forEach(item =&gt; console.log(item)); // =&gt; 2 4</span><br><span class=\"line\"></span><br><span class=\"line\">array.next(3); // =&gt; 6</span><br><span class=\"line\">array.next(4); // =&gt; 8</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒé¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹å¼ä¸­çš„ <code>map</code> ï¼Œ <code>forEach</code> ç­‰å‡½æ•°å¹¶ä¸æ˜¯ä¸€æ ·çš„ï¼Œå†…éƒ¨å®ç°æœºåˆ¶æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°åŒºåˆ«ï¼šåœ¨å£°æ˜å¼ç¼–ç¨‹ä¸­ï¼Œå¦‚æœåœ¨æœ€åå‘åŸæ•°ç»„æ·»åŠ å€¼ï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºæ¥ï¼Œå› ä¸ºè¿™æ˜¯åœ¨ <code>console.log</code> è¯­å¥æ‰§è¡Œåå‘ç”Ÿçš„ã€‚ä½†åœ¨å“åº”å¼ç¼–ç¨‹é‡Œï¼Œä»»ä½•å˜åŒ–éƒ½å¯ä»¥è¢«ååº”å‡ºæ¥ï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ª<strong>å¼‚æ­¥æ•°æ®æµ</strong>ï¼ˆasynchronous data streamsï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥éšæ—¶åˆ›å»ºã€æ›´æ”¹æˆ–ç»„åˆè¿™äº›æ•°æ®æµï¼Œæ‰€ä»¥æ‰“å°äº‹ä»¶æ˜¯ä¸€ä¸ª continuous observation caseã€‚<br>\näºŒã€ç±»åº“<br>\n<a href=\"https://github.com/bvaughn/react-virtualized\" target=\"_blank\" rel=\"noopener\">react-virtualized</a> çš„è½»é‡çº§ç‰ˆ <a href=\"https://github.com/bvaughn/react-window\" target=\"_blank\" rel=\"noopener\">react-window</a>ï¼Œç”¨äºé«˜æ•ˆæ¸²æŸ“é•¿åˆ—è¡¨ã€‚</p>\n<h4>2019/7/17</h4>\n<p>â€ƒâ€ƒå¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éœ€è¦è¯·æ±‚å¾ˆå¤šå›¾ç‰‡ï¼Œæƒ³è¦å®ç°è¯·æ±‚å‡ºé”™æ—¶ç»§ç»­å‘é€è¯·æ±‚ï¼ŒæˆåŠŸæ—¶è¿”å›æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>Promise</code> ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function fetchURL(url: string):Promise&lt;Blob&gt; &#123;</span><br><span class=\"line\">  return Axios.get(url, &#123;responeType: &quot;blob&quot;&#125;)</span><br><span class=\"line\">              .then( resp =&gt; Promise.resolve(resp.data) )</span><br><span class=\"line\">              .catch( () =&gt; fetchURL(url) )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¹‹åå¯ä»¥ä½¿ç”¨ <code>rxjs</code> ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; mergeMap, bufferTime, takeUntil &#125; from &quot;rxjs/operators&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">[url1,...,url10]</span><br><span class=\"line\">  .pipe(</span><br><span class=\"line\">    mergeMap( url =&gt; fetchURL(url).then( val =&gt; val )),</span><br><span class=\"line\">    bufferTime(10000)</span><br><span class=\"line\">  )</span><br><span class=\"line\">  .subscribe(&#123;</span><br><span class=\"line\">    next: resps =&gt; &#123;</span><br><span class=\"line\">      // do sth with resps:Blob[]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæ¯æ¬¡é‡åˆ° <code>rxjs</code> éƒ½å¾ˆå¤´å¤§ï¼Œç°åœ¨ä¹Ÿæ²¡æœ‰å‘ç°ä¸€ä¸ªæ¯”è¾ƒå®Œå–„æ¸…æ™°çš„æ•™ç¨‹ï¼Œä½†å®ƒåˆçœŸçš„å¾ˆå¼ºå¤§ï¼Œåç»­è¦å¼€ä¸“é¢˜å¥½å¥½å­¦ä¹ è®°å½•è¿™ä¸ªä¸œè¥¿ã€‚</p>\n<h4>2019/7/16</h4>\n<p>ä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback\" target=\"_blank\" rel=\"noopener\">How to read an often-changing value from useCallback?</a><br>\nç›´æ¥ä¸Šå®˜ç½‘ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Form() &#123;</span><br><span class=\"line\">  const [text, updateText] = useState(&apos;&apos;);</span><br><span class=\"line\">  const textRef = useRef();</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    textRef.current = text; // Write it to the ref</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  const handleSubmit = useCallback(() =&gt; &#123;</span><br><span class=\"line\">    const currentText = textRef.current; // Read it from the ref</span><br><span class=\"line\">    alert(currentText);</span><br><span class=\"line\">  &#125;, [textRef]); // Don&apos;t recreate handleSubmit like [text] would do</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input value=&#123;text&#125; onChange=&#123;e =&gt; updateText(e.target.value)&#125; /&gt;</span><br><span class=\"line\">      &lt;ExpensiveTree onSubmit=&#123;handleSubmit&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ <code>text</code> çš„å€¼ç»å¸¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³ä½¿ <code>handleSubmit</code> ç”¨ <code>useCallback</code> åŒ…è£¹äº†ï¼Œè¿˜æ˜¯ä¼šé‡æ–°å£°æ˜ã€‚è§£å†³åŠæ³•æ˜¯ä¼ å…¥ä¸€ä¸ª <code>ref</code> å¯¹è±¡ä»£æ›¿åŸå§‹å€¼ã€‚ä¹Ÿå¯ä»¥å†™ä¸€ä¸ª custom hook ï¼š<br>\n1ï¼‰å®˜ç½‘çš„ç‰ˆæœ¬ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function useEventCallback(fn, dependencies) &#123;</span><br><span class=\"line\">  const ref = useRef(() =&gt; &#123;</span><br><span class=\"line\">    throw new Error(&apos;Cannot call an event handler while rendering.&apos;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    ref.current = fn;</span><br><span class=\"line\">  &#125;, [fn, ...dependencies]);</span><br><span class=\"line\"></span><br><span class=\"line\">  return useCallback(() =&gt; &#123;</span><br><span class=\"line\">    const fn = ref.current;</span><br><span class=\"line\">    return fn();</span><br><span class=\"line\">  &#125;, [ref]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å®é™…ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Form() &#123;</span><br><span class=\"line\">  const [text, updateText] = useState(&apos;&apos;);</span><br><span class=\"line\">  // Will be memoized even if `text` changes:</span><br><span class=\"line\">  const handleSubmit = useEventCallback(() =&gt; &#123;</span><br><span class=\"line\">    alert(text);</span><br><span class=\"line\">  &#125;, [text]);</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input value=&#123;text&#125; onChange=&#123;e =&gt; updateText(e.target.value)&#125; /&gt;</span><br><span class=\"line\">      &lt;ExpensiveTree onSubmit=&#123;handleSubmit&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2ï¼‰å¯¼å¸ˆçš„ç‰ˆæœ¬ï¼šï¼ˆä»–æ¥äº†ï¼Œä»–å¸¦ç€ä»£ç åˆæ¥äº†ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @param callback</span><br><span class=\"line\"> * @param oRefs</span><br><span class=\"line\"> */</span><br><span class=\"line\">export function useCallbackWithRefs&lt;</span><br><span class=\"line\">  Refs,</span><br><span class=\"line\">  Callback extends (...args: any[]) =&gt; void</span><br><span class=\"line\">&gt;(callback: (refs: Refs) =&gt; Callback, oRefs: Refs) &#123;</span><br><span class=\"line\">  const refs = useRef(oRefs);</span><br><span class=\"line\">  useEffect(</span><br><span class=\"line\">    () =&gt; &#123;</span><br><span class=\"line\">      refs.current = oRefs;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    [oRefs]</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  return useCallback(</span><br><span class=\"line\">    (...args: any[]) =&gt; callback(refs.current)(...args),</span><br><span class=\"line\">    []</span><br><span class=\"line\">  ) as Callback;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å®é™…ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Form() &#123;</span><br><span class=\"line\">  const [text, updateText] = useState(&apos;&apos;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // åŸå…ˆçš„ callback ä¹Ÿå¯ä»¥æœ‰å‚æ•°</span><br><span class=\"line\">  const handleSubmit = useCallbackWithRefs(</span><br><span class=\"line\">    refs =&gt; (params: any) =&gt; &#123;</span><br><span class=\"line\">      // è¦æ³¨æ„åœ¨å‡½æ•°å†…å¿…é¡»ä½¿ç”¨ `refs.xxx`ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä»»ä½•å˜é‡ `xxx`</span><br><span class=\"line\">      console.log(refs.text);</span><br><span class=\"line\">  &#125;, &#123;text&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input value=&#123;text&#125; onChange=&#123;e =&gt; updateText(e.target.value)&#125; /&gt;</span><br><span class=\"line\">      &lt;ExpensiveTree onSubmit=&#123;handleSubmit&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæ€»çš„æ¥è¯´ï¼Œå®˜ç½‘çš„å®ç°æ˜¯å°† <code>callback</code> ä½œä¸º <code>ref</code> å¯¹è±¡ï¼Œå¹¶ä½œä¸º <code>useCallback</code> çš„ä¾èµ–ï¼Œä¸ä¼šé¢‘ç¹æ”¹å˜ï¼›å¦‚æœåœ¨å‡½æ•° <code>handleSubmit</code> ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ <code>text</code> ï¼Œç›´æ¥ä½¿ç”¨ <code>test</code> å³å¯ã€‚ç¬¬äºŒç§å®ç°æ–¹å¼æ˜¯æŠŠç»å¸¸å˜åŒ–çš„å€¼ä½œä¸º <code>ref</code> å¯¹è±¡ï¼Œè¿”å›å€¼ <code>useCallback</code> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>refs =&gt; callback</code> ï¼Œä¾èµ–æ˜¯ç©ºæ•°ç»„ï¼›è¿™æ—¶å¦‚æœè¦åœ¨å‡½æ•° <code>handleSubmit</code> ä¸­è¦è®¿é—®å¤–éƒ¨å˜é‡ <code>text</code> ï¼Œå¿…é¡»ä½¿ç”¨ <code>refs.test</code> ï¼Œå¦åˆ™è®¿é—®çš„åªæ˜¯ <code>test</code> çš„åˆå§‹å€¼ã€‚<br>\nâ€ƒâ€ƒReact åšå¤§ç²¾æ·±ï¼Œæ¥ä¸‹æ¥è¦å¥½å¥½ç ”è¯»ä¸€ä¸‹è¿™ä¸ª <a href=\"https://reactjs.org/docs/hooks-faq.html\" target=\"_blank\" rel=\"noopener\">FAQ</a>ã€‚<br>\näºŒã€ä»Šæ—¥ç½‘å€<br>\nâ€ƒâ€ƒä¸€ä¸ª <a href=\"https://www.emojicopy.com/\" target=\"_blank\" rel=\"noopener\">emoji copy</a> ç½‘ç«™ï¼Œæˆ‘ä»¬ ğŸ‘§ å°±æ˜¯å–œæ¬¢è¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ã€‚</p>\n<h4>2019/7/15</h4>\n<p>â€ƒâ€ƒä»Šå¤©åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ React Hooks åˆè¸©å‘äº†ï¼Œçœ‹æ¥è‡ªå·±å¯¹è¿™éƒ¨åˆ†è¿˜æ˜¯æ²¡æœ‰ç†è§£é€å½»ã€‚åœ¨ä½¿ç”¨ <code>useCallback</code> å’Œ <code>useEffect</code> æ—¶ï¼Œè¦æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥çš„ <code>[deps]</code>ã€‚å¦‚æœä½¿ç”¨ <code>useCallback(fn,[deps])</code> ï¼Œ <code>[deps]</code> åº”è¯¥åŒ…å«å‡½æ•° <code>fn</code> æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼›å¦‚æœä½¿ç”¨ <code>useEffect(fn,[deps])</code> ï¼Œ å½“ <code>deps</code> çš„å€¼å˜åŒ–æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ <code>fn</code>ï¼Œå› æ­¤<code>[deps]</code> ä¸ä¸€å®šè¦åŒ…å«å‡½æ•° <code>fn</code> æ‰€æ¶‰åŠçš„æ‰€æœ‰å˜é‡ï¼Œè€Œæ˜¯åº”è¯¥ä¼ å…¥ä¼šå¼•èµ·è¯¥å‡½æ•°æ‰§è¡Œçš„é‚£äº›å‚æ•°ã€‚<br>\nâ€ƒâ€ƒä»Šæ—¥è¸©å‘è®°å½•ï¼šä¸ºäº†ä¼˜åŒ–å­ç»„ä»¶ï¼Œä½œä¸º <code>props</code> çš„å‡½æ•°éƒ½ä½¿ç”¨ <code>useCallback</code> åŒ…è£¹äº†ï¼Œå¹¶ä¼ å…¥äº†ç©ºæ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ã€‚ä½†æ˜¯å‡½æ•°ä¸­çš„è¿ç®—éœ€è¦ç”¨åˆ°ç»„ä»¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœæ²¡æœ‰å°†è¯¥å˜é‡ä½œä¸º <code>deps</code> ï¼Œè¿™ä¸ªå˜é‡å°±ä¼šä¸€ç›´ä¿æŒåˆå§‹å€¼ï¼Œå€¼å¹¶ä¸ä¼šæ”¹å˜ï¼Œè¿è¡Œç»“æœå°±ä¼šä¸é¢„æœŸä¸ç¬¦ã€‚ï¼ˆçœŸçš„å¤ªè ¢äº†ï¼Œç¼“ç¼“èººå€’ï¼‰</p>\n<h4>2019/7/14</h4>\n<p>å‘¨æœ«å½“ç„¶æ˜¯çº¦ä¼šå•¦ã€‚ğŸ˜</p>\n<h4>2019/7/13</h4>\n<p>ä¸€ã€ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://stackoverflow.com/questions/53446020/how-to-compare-oldvalues-and-newvalues-on-react-hooks-useeffect\" target=\"_blank\" rel=\"noopener\">How to compare oldValues and newValues on React Hooks useEffect?</a><br>\nâ€ƒâ€ƒ React class ç»„ä»¶æä¾›äº† <code>ComponentDidUpdate</code> ä¹‹ç±»çš„æ–¹æ³•æ¥è·å–åˆ°å½“å‰ <code>props</code> å’Œå‰ä¸€ä¸ª <code>props</code> ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒï¼Œå†³å®šæ˜¯å¦è¿›è¡Œæ›´æ–°ã€‚å‡½æ•°å¼ç»„ä»¶åªæœ‰ <code>useEffect</code> å‡½æ•°æ¥æ¨¡ä»¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–ç»„ä»¶å…ˆå‰çš„ <code>props</code> æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ custom hook ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function usePrevious(value) &#123;</span><br><span class=\"line\">  const ref = useRef();</span><br><span class=\"line\">  useEffect(() =&gt; &#123;</span><br><span class=\"line\">    ref.current = value;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  return ref.current;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒä¹‹ååœ¨ <code>useEffect</code> ä¸­ä½¿ç”¨ä¸Šé¢çš„å‡½æ•°æ¥æ¨¡æ‹Ÿ <code>ComponentDidUpdate</code> ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const Component = (props) =&gt; &#123;</span><br><span class=\"line\">    const &#123;receiveAmount, sendAmount &#125; = props</span><br><span class=\"line\">    const prevAmount = usePrevious(&#123;receiveAmount, sendAmount&#125;);</span><br><span class=\"line\">    useEffect(() =&gt; &#123;</span><br><span class=\"line\">        if(prevAmount.receiveAmount !== receiveAmount) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         // process here</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if(prevAmount.sendAmount !== sendAmount) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         // process here</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, [receiveAmount, sendAmount])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>â€ƒâ€ƒæœ‰æ—¶å€™åœ¨ debug æ—¶ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ç»„ä»¶ä¸ºä»€ä¹ˆä¼šé‡æ–°æ¸²æŸ“ï¼Œæ˜¯é‚£äº› <code>props</code> æ›´æ–°äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥è·å– <code>prevProps</code>ï¼Œå¹¶åœ¨å‡½æ•°ç»„ä»¶æœ€å¼€å§‹æ—¶å†™ä¸€ä¸ª <code>useEffect</code> å°†å‚æ•°éƒ½æ‰“å°å‡ºæ¥ï¼Œä½¿ç”¨ <code>===</code> æ¯”è¾ƒã€‚</p>\n<h4>2019/7/12</h4>\n<p>ä¸€ã€ä»Šæ—¥æŠ€èƒ½<br>\nâ€ƒâ€ƒé¡¹ç›®ä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ° JSON å­—ç¬¦ä¸²çš„è§£æï¼Œè§£æå‡ºé”™å°±æ‰‘è¡—äº†ï¼Œä¸€èˆ¬æ˜¯ç”¨ <code>try {...} catch {...}</code> åŒ…è£¹ã€‚ä»Šå¤©å¯¼å¸ˆåœ¨ code review æ—¶å»ºè®®æˆ‘ä½¿ç”¨å¦‚ä¸‹å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿå¯ä»¥è¦†ç›–ç©ºå­—ç¬¦ä¸²çš„æ£€æµ‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function safeJsonParse&lt;T&gt;(str): &#123; ok: true, value: T &#125; | &#123; ok: false &#125; &#123;</span><br><span class=\"line\">  try &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      ok: true,</span><br><span class=\"line\">      value: JSON.parse(str)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; catch &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      ok: false</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>äºŒã€ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://imweb.io/topic/5b72d4ef15554e6d3409f817\" target=\"_blank\" rel=\"noopener\">ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†</a>ã€‚<br>\nâ€ƒâ€ƒè¿™ä¸€ç¯‡å¾ˆå¥½åœ°æ¢³ç†äº†è¿›ç¨‹ã€çº¿ç¨‹ã€æµè§ˆå™¨<strong>å¤šè¿›ç¨‹</strong>ã€æµè§ˆå™¨å†…æ ¸<strong>å¤šçº¿ç¨‹</strong>ã€JSå•çº¿ç¨‹ã€JSè¿è¡Œæœºåˆ¶çš„ç›¸å…³çŸ¥è¯†ï¼Œå¾ˆè¿è´¯ï¼Œå»ºè®®æ—¶ä¸æ—¶å›é¡¾ã€‚ç®€å•è®°å½•å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š<br>\n1ï¼‰è¿›ç¨‹æ˜¯CPUèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½ã€‚ï¼ˆæƒ³å½“å¹´è€ƒæ“ä½œç³»ç»Ÿçš„æ—¶å€™è¿˜èƒŒå¾—æ»šç“œçƒ‚ç†Ÿï¼‰<br>\n2ï¼‰<strong>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</strong>ï¼ŒåŒ…æ‹¬çš„ä¸»è¦è¿›ç¨‹æœ‰ï¼š</p>\n<ul>\n<li>Browserè¿›ç¨‹ï¼ˆæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œåªæœ‰ä¸€ä¸ªï¼‰</li>\n<li>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼ŒRendererè¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰ï¼šé»˜è®¤æ¯ä¸ªTabä¸€ä¸ªè¿›ç¨‹</li>\n<li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹</li>\n<li>GPUè¿›ç¨‹ï¼š3Dç»˜åˆ¶</li>\n</ul>\n<p>3ï¼‰é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼Œå®ƒæ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸»è¦å¸¸é©»çº¿ç¨‹æœ‰ï¼š</p>\n<ul>\n<li>GUIæ¸²æŸ“çº¿ç¨‹ï¼šæ¸²æŸ“é¡µé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ï¼Œrepaint å’Œ reflow ç­‰ã€‚</li>\n<li>JSå¼•æ“çº¿ç¨‹ï¼šå¤„ç†ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸ GUI æ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚</li>\n<li>äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šæ§åˆ¶äº‹ä»¶å¾ªç¯ï¼ŒæŠŠäº‹ä»¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æœ«å°¾ã€‚</li>\n<li>å®šæ—¶è§¦å‘çº¿ç¨‹ï¼š<code>setTimeout</code> å’Œ <code>setInterval</code>ï¼ŒåŒæ ·ä¹Ÿæ˜¯è®¡æ—¶å®Œæ¯•åæ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾ã€‚</li>\n<li>å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹</li>\n</ul>\n<p>4ï¼‰Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ä¹‹é—´æ˜¯éœ€è¦é€šä¿¡çš„<br>\n5ï¼‰æ—¶é—´å¾ªç¯æœºåˆ¶ <code>Event Loop</code> ï¼šJSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡éƒ½ä¼šåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼›ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ä¸€ä¸ª<strong>ä»»åŠ¡é˜Ÿåˆ—/äº‹ä»¶é˜Ÿåˆ—</strong>ï¼Œå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œç»“æœä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸­æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°æ‰§è¡Œæ ˆä¸­å¼€å§‹æ‰§è¡Œã€‚<br>\n6ï¼‰è¿›é˜¶ï¼šmacrotask / task å’Œ microtask/ jobã€‚ES6ä¸­çš„ <code>Promise</code> å°±å±äº microtask å¾®ä»»åŠ¡ ï¼Œè€Œä¸»ä»£ç å—ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ—¶é—´å¦‚ <code>setTimeout</code> å’Œ <code>setInterval</code> å°±å±äº macrotask å®ä»»åŠ¡ã€‚æ€»ç»“çš„è¿è¡Œæœºåˆ¶å°±æ˜¯ï¼š</p>\n<ul>\n<li>æ‰§è¡Œå®ä»»åŠ¡ã€‚ï¼ˆä»æ‰§è¡Œæ ˆä¸­è·å–ï¼Œå¦‚æœæ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li>\n<li>æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ— Job Queues ä¸­ã€‚ï¼ˆä½œè€…çŒœæµ‹è¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“çº¿ç¨‹ç»´æŠ¤ï¼Œå› ä¸ºæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰</li>\n<li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³ä¾æ¬¡æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰å¾®ä»»åŠ¡ã€‚</li>\n<li>æ£€æŸ¥æ¸²æŸ“ï¼Œç”± GUI çº¿ç¨‹æ¥ç®¡ã€‚</li>\n<li>æ¸²æŸ“å®Œæ¯•åï¼Œç”± JS å¼•æ“çº¿ç¨‹æ¥ç®¡ï¼Œä»æ—¶é—´é˜Ÿåˆ—ä¸­è·å–å¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚</li>\n</ul>\n<p>7ï¼‰åœ¨ç¬¬å…­ç‚¹ä¸­æåˆ°çš„æ˜¯ä¸€ä¸ªè¿›é˜¶çš„æ¦‚å¿µï¼Œå¯¹åº”ä¸€é“é¢˜ç›®ï¼Œå¦‚æœä»£ç ä¸­ä¾æ¬¡æœ‰ <code>setTimeout</code> å’Œ <code>Promise</code> ï¼Œæ˜¯ä¼šå…ˆæ‰“å°å‡º <code>Promise</code> çš„æ‰§è¡Œç»“æœçš„ã€‚</p>\n<h4>2019/7/11</h4>\n<p>â€ƒâ€ƒ React 16.8 æå‡ºäº† <code>hook</code> çš„æ¦‚å¿µï¼Œå‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ã€‚ç°åœ¨çš„å·¥ä½œé¡¹ç›®å·²ç»æ‘’å¼ƒäº† <code>class</code> ï¼Œæ”¹ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œæ­£åœ¨æ…¢æ…¢æ‘¸ç´¢ä¸­ã€‚ä»Šå¤©åœ¨è…¾è®¯<a href=\"http://imweb.io/\" target=\"_blank\" rel=\"noopener\">IMWebå‰ç«¯åšå®¢</a>ä¸­çœ‹åˆ°äº†ä¸¤ç¯‡ä»‹ç» <code>React hook</code> çš„æ–‡ç« ï¼Œå—ç›ŠåŒªæµ…ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚<br>\nä¸€ã€<a href=\"https://imweb.io/topic/5cd845cadcd62f86299fcd76\" target=\"_blank\" rel=\"noopener\">react hookâ€”â€”ä½ å¯èƒ½ä¸æ˜¯â€œæˆ‘â€æ‰€è®¤è¯†çš„useEffect</a><br>\nâ€ƒâ€ƒè¿™ç¯‡ä»‹ç»äº† <code>useEffect</code> è¿™ä¸ªAPIï¼Œç”¨å®ƒæ¨¡æ‹Ÿäº†classç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚<code>useEffect</code> ç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼Œç›¸å½“äº <code>ComponentDidMount</code> å’Œ <code>ComponentDidUpdate</code>ã€‚è¯¥APIæœ‰ä¸¤ä¸ªå‚æ•°å’Œä¸€ä¸ªè¿”å›å€¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯æ¸…é™¤å‡½æ•°ï¼Œç›¸å½“äº <code>ComponentWillUnmount</code>ï¼Œæ¯ä¸€æ¬¡ <code>render</code> éƒ½ä¼šæ‰§è¡Œå‰¯ä½œç”¨å’Œæ¸…é™¤ä¸Šä¸€æ¬¡å‰¯ä½œç”¨ã€‚<strong>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥çš„æ˜¯å‰¯ä½œç”¨å‡½æ•°æ‰€éœ€è¦çš„ä¾èµ–ï¼Œå½“ä»»ä¸€ä¾èµ–æ›´æ–°æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å‰¯ä½œç”¨å¹¶æ‰§è¡Œï¼›å¦‚æœä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç›¸å½“äº <code>ComponentDidMount</code>ï¼›å¦‚æœä¸ä¼ ï¼Œå°±æ˜¯æ²¡æœ‰è¯´æ˜è‡ªå·±æœ‰æ²¡æœ‰ä¾èµ–ï¼ˆæ³¨æ„æ˜¯ä¸çŸ¥é“æœ‰æ²¡æœ‰ï¼Œä¸æ˜¯æ²¡æœ‰ï¼ï¼‰ï¼Œæ¯æ¬¡ <code>render</code> æ—¶å°±æ‰§è¡Œï¼Œç›¸å½“äº <code>ComponentDidUpdate</code> ã€‚</strong><br>\nâ€ƒâ€ƒ æœ€åè¿˜è®²äº† <code>useEffect</code> å’Œ <code>useLayoutEffect</code> çš„åŒºåˆ«ï¼Œç®€å•æ¥è¯´å‰è€…æ˜¯å¼‚æ­¥çš„ï¼Œåè€…æ˜¯åŒæ­¥çš„ã€‚è¿˜æ²¡å¥½å¥½æ·±å…¥è¿™éƒ¨åˆ†ï¼ŒTODOã€‚<br>\näºŒã€<a href=\"https://imweb.io/topic/5d1e3657f7b5692b080f2651\" target=\"_blank\" rel=\"noopener\">å¯èƒ½ä½ çš„reactå‡½æ•°ç»„ä»¶ä»æ¥æ²¡æœ‰ä¼˜åŒ–è¿‡</a><br>\nâ€ƒâ€ƒä¼˜åŒ–é—®é¢˜çœŸæ˜¯æˆ‘ä¸€ä¸ªç—›ç‚¹ã€‚è¿™ç¯‡æ–‡ç« å¾ˆæ¸…æ¥šåœ°è§£é‡Šäº† <code>Hooks</code> ä¸€äº›å¯ç”¨äºç»„ä»¶ä¼˜åŒ–çš„APIã€‚å¼ºæ¨ï¼<br>\nâ€ƒâ€ƒ ç‰¹åˆ«åœ°ï¼Œæ–‡ç« ä»‹ç»äº†å½“å‡½æ•°ç»„ä»¶ä¸­ä¼ å…¥çš„ <code>props</code> å€¼ä¸ºå‡½æ•°æ—¶ï¼Œç”±äºæ¯ä¸€æ¬¡æ‰§è¡Œæˆ–é‡æ–°æ‰§è¡Œï¼Œä½œç”¨åŸŸé‡Œé¢ä¸€åˆ‡éƒ½æ˜¯é‡æ–°å¼€å§‹ï¼Œå‡½æ•°ä¸æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œä¸èƒ½ç”»ä¸Šç­‰å·ï¼Œå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜æ–‡ç« æå‡ºäº†å‡ ç§è§£å†³åŠæ³•ï¼š<br>\n1ï¼‰ ä½œä¸º <code>props</code> çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å¤–å®šä¹‰ï¼Œå‡½æ•°ç»„ä»¶ç”¨ <code>React.memo()</code> åŒ…è£¹ã€‚<br>\nâ€ƒâ€ƒ <code>React.memo()</code> ç±»ä¼¼äº <code>PureComponent</code> å’Œ <code>ComponentDidUpdate</code> ï¼Œå¦‚æœå‡½æ•°ç»„ä»¶çš„ <code>props</code> å€¼éƒ½ä¸€æ ·ï¼Œå°±ä¼šè·³è¿‡è¯¥ç»„ä»¶çš„æ‰§è¡Œï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œå®ç°æ€§èƒ½ä¼˜åŒ–ã€‚<br>\n2ï¼‰ ä½œä¸º <code>props</code> çš„å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å†…å®šä¹‰ï¼Œä½¿ç”¨<code>useCallBack</code> æˆ– <code>useMemo</code>åŒ…è£¹ï¼Œå‡½æ•°ç»„ä»¶ç”¨ <code>React.memo()</code> åŒ…è£¹ã€‚<br>\nâ€ƒâ€ƒ <code>useCallback(() =&gt; {}, [deps])</code> è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ <code>deps</code> ä¸å˜æ—¶ï¼ˆå¦‚ä¼ å…¥ç©ºæ•°ç»„ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¾èµ–ï¼‰ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚<code>const a = useMemo(() =&gt; memorizeValue, [deps])</code>ï¼Œå½“ <code>deps</code> ä¸å˜æ—¶ï¼Œ<code>a</code> çš„å€¼è¿˜æ˜¯ä¸Šæ¬¡çš„ <code>memorizeValue</code>ï¼Œçœå»äº†é‡æ–°è®¡ç®—çš„è¿‡ç¨‹ã€‚<br>\nâ€ƒâ€ƒ æ³¨æ„å½“ <code>memorizeValue</code> æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ<code>useCallback(fn, inputs) &lt;=&gt; useMemo(() =&gt; fn, inputs)</code>ã€‚</p>\n<h4>2019/7/10</h4>\n<p>â€ƒâ€ƒä»Šå¤©åœ¨é¡¹ç›®ä¸­æ¥è§¦åˆ°äº† <code>symbol</code>ï¼Œé‰´äºä¹‹å‰ä¸€ç›´æ²¡æœ‰æ³¨æ„è¿™ä¸ªæ•°æ®ç±»å‹ï¼Œåœ¨ä»Šå¤©è¡¥ä¸Šã€‚ <code>symbol</code> æ˜¯ ES6 æ–°å¢çš„<strong>åŸºæœ¬</strong>æ•°æ®ç±»å‹ã€‚å®ƒçš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const s1 = Symbol();</span><br><span class=\"line\">const s2 = Symbol();</span><br><span class=\"line\">console.log(s1 === s2); // false</span><br><span class=\"line\"></span><br><span class=\"line\">const s3 = new Symbol() // TypeError: Symbol is not a constructor</span><br><span class=\"line\">Symbol(&quot;foo&quot;) === Symbol(&quot;foo&quot;); // false</span><br></pre></td></tr></table></figure>\n<p><code>Symbol()</code> è¿”å›çš„æ¯ä¸ª <code>symbol</code> å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚å®ƒæœ€å¸¸è¢«ç”¨äºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const obj = &#123;&#125;</span><br><span class=\"line\">const foo = Symbol(&quot;foo&quot;)</span><br><span class=\"line\">obj[foo] = &quot;foo&quot;</span><br><span class=\"line\">obj.bar = &quot;bar&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(obj); // &#123; bar: &quot;bar&quot; , Symbol(foo): &quot;foo&quot;&#125;</span><br><span class=\"line\">console.log(foo in obj); // true</span><br><span class=\"line\">console.log(obj[foo]); // foo</span><br><span class=\"line\">console.log(Object.keys(obj)); // [&quot;bar&quot;]</span><br><span class=\"line\">console.log(Object.getOwnPropertySymbols(obj)) // [Symbol(foo)]</span><br></pre></td></tr></table></figure>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ <code>Object.key()</code> ä¸ä¼šè¿”å› <code>symbol</code> å€¼ï¼ŒåŒç†ï¼Œ<code>Object.getOwnPropertyNames()</code>ã€<code>for..in</code>ã€<code>for...of</code> ä¹Ÿä¸ä¼šè¿”å›ã€‚<code>JSON.stringify()</code> ä¹Ÿä¼šå¿½ç•¥ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JSON.stringify(&#123;[Symbol(&apos;foo&apos;)]: &apos;foo&apos;&#125;);                 </span><br><span class=\"line\">// &apos;&#123;&#125;&apos;</span><br></pre></td></tr></table></figure>\n<p><code>Symbol</code> è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ã€‚ <code>Symbol.for(key)</code> æ˜¯æ ¹æ®æŒ‡å®šçš„ <code>key</code> æœç´¢ç°æœ‰çš„ <code>symbol</code> å¹¶è¿”å›, å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šä½¿ç”¨ <code>key</code> åœ¨å…¨å±€çš„ <code>symbol</code> æ³¨å†Œè¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>symbol</code> ã€‚<code>Symbol.keyFor(sym)</code> æ˜¯åœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­æ£€ç´¢ï¼Œè¿”å›å…±äº«çš„ <code>symbol key</code> ã€‚</p>\n<h4>2019/7/9</h4>\n<p>ä¸€ä¸ªä¸å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼šè®©å‡½æ•°åœ¨å†…éƒ¨è·å–è‡ªå·±æ‰€éœ€çš„ä¾èµ–ã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// ä¸€ä¸ªå¯å¤ç”¨å‡½æ•°</span><br><span class=\"line\">function doSomething(key: string) &#123;</span><br><span class=\"line\">    return (</span><br><span class=\"line\">        &lt;Button</span><br><span class=\"line\">            loading = &#123;key===&quot;str1&quot;? Compoment1 : Compoment2&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">            button</span><br><span class=\"line\">        &lt;/Button&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>lodaing</code> æ‰€éœ€çš„ç»„ä»¶åº”è¯¥æ˜¯ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥çš„ï¼Œä¸ç„¶å¦‚æœæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª <code>key</code>ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥äº†è¯¥åœ°æ–¹çš„ä¿®æ”¹ã€‚è¿™ä¸ªè§‚ç‚¹ç±»ä¼¼äºä¾èµ–åè½¬ã€‚</p>\n"},{"title":"FrontEnd Notes [2020.01]","catalog":true,"date":"2020-01-02T01:57:13.000Z","subtitle":null,"header-img":null,"_content":"#### About\n\nğŸ“… 2020 å¹´ 1 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚\n\næ–°å¹´å¿«ä¹ï¼å¸Œæœ›æ–°çš„ä¸€å¹´èƒ½åšæŒè®°ç¬”è®°ï¼\n\n#### 2020/01/12\nä»Šæ—¥é˜…è¯»ï¼š[Why ['1', '7', '11'].map(parseInt) returns [1, NaN, 3] in Javascript](https://medium.com/dailyjs/parseint-mystery-7c4368ef7b21)\nä¸€ç¯‡éå¸¸æœ‰è¶£çš„æ–‡ç« ï¼Œå¼€ç¯‡ä¸€å¼ å›¾ï¼š\n![image.png](https://i.loli.net/2020/01/12/grShLvH28RDXtYM.png)\nå‡ºç°è¿™ç§ç»“æœçš„åŸå› ï¼Œåœ¨äº `map` å‡½æ•°é»˜è®¤ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šcurrentValueã€currentIndex ä»¥åŠ full array ã€‚è€Œå¯¹äº `parseInt` è€Œè¨€ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåŸºæ•°ï¼Œç”¨æ­¤æ¥è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚'1' ä»¥ 0 ä¸ºåŸºæ•°è¿›è¡Œè§£æï¼Œ0 çš„å¸ƒå°”å€¼ä¸º `false`ï¼Œå› æ­¤ä¼šä»¥é»˜è®¤åŸºæ•° 10 è¿›è¡Œè§£æï¼Œè¾“å‡º 1 ï¼›'7' ä»¥ 1 ä¸ºåŸºæ•° è¿›è¡Œè§£æï¼Œä¼šè¾“å‡º `NaN` ï¼›'11' ä»¥ 2 ä¸ºåŸºæ•°è§£æï¼Œä¼šè¾“å‡º 3ã€‚\n['1'ï¼Œ'7'ï¼Œ'11']ã€‚mapï¼ˆparseIntï¼‰æ— æ³•æŒ‰é¢„æœŸå·¥ä½œï¼Œå› ä¸ºmapæ¯æ¬¡è¿­ä»£éƒ½ä¼šå°†ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™parseIntï¼ˆï¼‰ã€‚ ç¬¬äºŒä¸ªå‚æ•°ç´¢å¼•ä½œä¸ºåŸºæ•°å‚æ•°ä¼ é€’åˆ°parseIntä¸­ã€‚ å› æ­¤ï¼Œä½¿ç”¨ä¸åŒçš„åŸºæ•°è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚ '7'è¢«è§£æä¸ºåŸºæ•°1ï¼Œå³NaNï¼Œ'11'è¢«è§£æä¸ºåŸºæ•°2ï¼Œå³3ã€‚'1'è¢«è§£æä¸ºé»˜è®¤åŸºæ•°10ï¼Œå› ä¸ºå…¶ç´¢å¼•0ä¸ºå‡ã€‚\n\n#### 2020/01/09\nä¸€ã€[How to handle errors in Promise.all](https://stackoverflow.com/questions/30362733/handling-errors-in-promise-all/30378082)\nç®€å•æ¥è¯´å°±æ˜¯ï¼š\n```\nawait Promise.all(vals.map(val => \n  promise(val)\n  .catch(err => {\n    // handle here\n    return err\n  })\n))\n```\näºŒã€[New ES2018 Features](https://css-tricks.com/new-es2018-features-every-javascript-developer-should-know/)\n\n#### 2020/01/05\nä»Šå¤©éœ€è¦å¯¹æŸä¸ªæ•°å€¼è¿›è¡Œç±»å‹æ ¡éªŒï¼Œé¿å…å‡ºç° `NaN`ï¼Œæœ¬æ¥æ˜¯ç”¨ `!typeof value === 'number'`ï¼Œåæ¥å‘ç°ï¼š\n```\ntypeof NaN === 'number'\n```\nå…³äºä¸ºä»€ä¹ˆæ˜¯è¿™ç§è¾“å‡ºï¼Œå¯ä»¥çœ‹ medium ä¸Šè¿™ç¯‡æ–‡ç« ï¼š[NaN and typeof](https://javascriptrefined.io/nan-and-typeof-36cd6e2a4e43)ã€‚\nå¦‚æœéœ€è¦åˆ¤æ–­æŸä¸ªæ•°æ˜¯å¦ä¸º `NaN`ï¼Œå¯ç”¨ `isNaN(value)` åˆ¤æ–­ã€‚\n\n#### 2020/01/04\nä»Šå¤©åœ¨å¤„ç†æ­£åˆ™è¡¨è¾¾å¼æ—¶é‡åˆ°è¿™æ ·çš„ç–‘æƒ‘ï¼š\n```\nconst str = '\\abc';\nconst reg = /\\\\abc/;\nreg.test(str); // false\n```\næˆ‘ä»¬éƒ½çŸ¥é“åæ–œæ  `\\` æ˜¯è½¬ä¹‰çš„ä½œç”¨ï¼Œå¦‚æœè¦è¾“å‡ºæ–œæ ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨ `\\\\` ï¼›åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`reg` åŒ¹é…æ˜¯æ˜¯ `\\abc` ï¼Œä¸ºä»€ä¹ˆè¾“å‡ºç»“æœä¼šæ˜¯ `false` å‘¢ï¼Ÿ\nç»è¿‡æŸ¥é˜…ï¼Œå‘ç°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œ'\\' ä¹Ÿæœ‰è½¬ä¹‰çš„ä½œç”¨ã€‚å¦‚æœåæ–œæ å‡ºç°åœ¨å­—ç¬¦çš„å‰é¢ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚è¯´ '\\n' è¡¨ç¤ºæ¢è¡Œï¼Œå­—ç¬¦ä¸² '\\abc' ä¹Ÿæ¶‰åŠè½¬ä¹‰æ“ä½œï¼Œç”±äº a ä¸æ˜¯æœ‰æ•ˆçš„è½¬ä¹‰ç¬¦ï¼Œæ‰€ä»¥å°±ç›´æ¥è½¬æˆ 'abc' ã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥éªŒè¯è¿™ä¸ªè¯´æ³•ï¼š\n```\nconst str = \"\\abc\";\nconsole.info(str.length); // 3\n\"\\abc\" === \"abc\" //true\n```\nå› æ­¤ï¼Œä¸Šé¢çš„ä»£ç åº”è¯¥æ”¹æˆï¼š\n```\nconst str = '\\\\abc';\nconst reg = /\\\\abc/;\nreg.test(str); // true\n```\n\n#### 2020/01/02\næ”¾å¤§é¢„è§ˆå›¾ç‰‡çš„æŸä¸ªéƒ¨åˆ†ï¼šæ€è·¯æ˜¯è®¡ç®— bbox çš„ scale æ•°å€¼ï¼Œä½¿ä¹‹èƒ½å¡«å……æ»¡æ•´ä¸ª container ï¼›å†è®¡ç®—åŸå§‹å›¾ç‰‡çš„åç§»é‡ï¼Œä½¿ä¹‹åªæ˜¾ç¤º bbox éƒ¨åˆ†ã€‚    \n```\nfunction Preview(props: {\n  imgSrc: string;\n  imgSize: { width: number; height: number };\n  box: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  };\n}) {\n  const [containerSize] = useState({ width: 350, height: 400 });\n\n  const scale = Math.min(\n    containerSize.width / props.box.width,\n    containerSize.height / props.box.height\n  );\n  const boxCenter = {\n    x: props.box.x + props.box.width / 2,\n    y: props.box.y + props.box.height / 2\n  };\n  const containerCenter = {\n    x: containerSize.width / 2,\n    y: containerSize.height / 2\n  };\n  const tr = {\n    x: containerCenter.x - boxCenter.x * scale,\n    y: containerCenter.y - boxCenter.y * scale\n  };\n\n  return (\n    <div style={{ position: \"relative\", ...containerSize, overflow: \"hidden\" }}>\n      <img\n        src={props.imgSrc}\n        style={{\n          ...props.imgSize,\n          objectFit: \"contain\",\n          position: \"absolute\",\n          left: 0,\n          top: 0,\n          transform: `translate(${tr.x}px, ${tr.y}px) scale(${scale})`,\n          transformOrigin: \"top left\",\n          transition: \"all 0.3s\"\n        }}\n      />\n    </div>\n  );\n}\n```","source":"_posts/FrontEnd-Notes-2020-01.md","raw":"---\ntitle: 'FrontEnd Notes [2020.01]'\ncatalog: true\ndate: 2020-01-02 09:57:13\nsubtitle:\nheader-img:\ntags: FE\n---\n#### About\n\nğŸ“… 2020 å¹´ 1 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚\n\næ–°å¹´å¿«ä¹ï¼å¸Œæœ›æ–°çš„ä¸€å¹´èƒ½åšæŒè®°ç¬”è®°ï¼\n\n#### 2020/01/12\nä»Šæ—¥é˜…è¯»ï¼š[Why ['1', '7', '11'].map(parseInt) returns [1, NaN, 3] in Javascript](https://medium.com/dailyjs/parseint-mystery-7c4368ef7b21)\nä¸€ç¯‡éå¸¸æœ‰è¶£çš„æ–‡ç« ï¼Œå¼€ç¯‡ä¸€å¼ å›¾ï¼š\n![image.png](https://i.loli.net/2020/01/12/grShLvH28RDXtYM.png)\nå‡ºç°è¿™ç§ç»“æœçš„åŸå› ï¼Œåœ¨äº `map` å‡½æ•°é»˜è®¤ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šcurrentValueã€currentIndex ä»¥åŠ full array ã€‚è€Œå¯¹äº `parseInt` è€Œè¨€ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåŸºæ•°ï¼Œç”¨æ­¤æ¥è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚'1' ä»¥ 0 ä¸ºåŸºæ•°è¿›è¡Œè§£æï¼Œ0 çš„å¸ƒå°”å€¼ä¸º `false`ï¼Œå› æ­¤ä¼šä»¥é»˜è®¤åŸºæ•° 10 è¿›è¡Œè§£æï¼Œè¾“å‡º 1 ï¼›'7' ä»¥ 1 ä¸ºåŸºæ•° è¿›è¡Œè§£æï¼Œä¼šè¾“å‡º `NaN` ï¼›'11' ä»¥ 2 ä¸ºåŸºæ•°è§£æï¼Œä¼šè¾“å‡º 3ã€‚\n['1'ï¼Œ'7'ï¼Œ'11']ã€‚mapï¼ˆparseIntï¼‰æ— æ³•æŒ‰é¢„æœŸå·¥ä½œï¼Œå› ä¸ºmapæ¯æ¬¡è¿­ä»£éƒ½ä¼šå°†ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™parseIntï¼ˆï¼‰ã€‚ ç¬¬äºŒä¸ªå‚æ•°ç´¢å¼•ä½œä¸ºåŸºæ•°å‚æ•°ä¼ é€’åˆ°parseIntä¸­ã€‚ å› æ­¤ï¼Œä½¿ç”¨ä¸åŒçš„åŸºæ•°è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚ '7'è¢«è§£æä¸ºåŸºæ•°1ï¼Œå³NaNï¼Œ'11'è¢«è§£æä¸ºåŸºæ•°2ï¼Œå³3ã€‚'1'è¢«è§£æä¸ºé»˜è®¤åŸºæ•°10ï¼Œå› ä¸ºå…¶ç´¢å¼•0ä¸ºå‡ã€‚\n\n#### 2020/01/09\nä¸€ã€[How to handle errors in Promise.all](https://stackoverflow.com/questions/30362733/handling-errors-in-promise-all/30378082)\nç®€å•æ¥è¯´å°±æ˜¯ï¼š\n```\nawait Promise.all(vals.map(val => \n  promise(val)\n  .catch(err => {\n    // handle here\n    return err\n  })\n))\n```\näºŒã€[New ES2018 Features](https://css-tricks.com/new-es2018-features-every-javascript-developer-should-know/)\n\n#### 2020/01/05\nä»Šå¤©éœ€è¦å¯¹æŸä¸ªæ•°å€¼è¿›è¡Œç±»å‹æ ¡éªŒï¼Œé¿å…å‡ºç° `NaN`ï¼Œæœ¬æ¥æ˜¯ç”¨ `!typeof value === 'number'`ï¼Œåæ¥å‘ç°ï¼š\n```\ntypeof NaN === 'number'\n```\nå…³äºä¸ºä»€ä¹ˆæ˜¯è¿™ç§è¾“å‡ºï¼Œå¯ä»¥çœ‹ medium ä¸Šè¿™ç¯‡æ–‡ç« ï¼š[NaN and typeof](https://javascriptrefined.io/nan-and-typeof-36cd6e2a4e43)ã€‚\nå¦‚æœéœ€è¦åˆ¤æ–­æŸä¸ªæ•°æ˜¯å¦ä¸º `NaN`ï¼Œå¯ç”¨ `isNaN(value)` åˆ¤æ–­ã€‚\n\n#### 2020/01/04\nä»Šå¤©åœ¨å¤„ç†æ­£åˆ™è¡¨è¾¾å¼æ—¶é‡åˆ°è¿™æ ·çš„ç–‘æƒ‘ï¼š\n```\nconst str = '\\abc';\nconst reg = /\\\\abc/;\nreg.test(str); // false\n```\næˆ‘ä»¬éƒ½çŸ¥é“åæ–œæ  `\\` æ˜¯è½¬ä¹‰çš„ä½œç”¨ï¼Œå¦‚æœè¦è¾“å‡ºæ–œæ ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨ `\\\\` ï¼›åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`reg` åŒ¹é…æ˜¯æ˜¯ `\\abc` ï¼Œä¸ºä»€ä¹ˆè¾“å‡ºç»“æœä¼šæ˜¯ `false` å‘¢ï¼Ÿ\nç»è¿‡æŸ¥é˜…ï¼Œå‘ç°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œ'\\' ä¹Ÿæœ‰è½¬ä¹‰çš„ä½œç”¨ã€‚å¦‚æœåæ–œæ å‡ºç°åœ¨å­—ç¬¦çš„å‰é¢ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚è¯´ '\\n' è¡¨ç¤ºæ¢è¡Œï¼Œå­—ç¬¦ä¸² '\\abc' ä¹Ÿæ¶‰åŠè½¬ä¹‰æ“ä½œï¼Œç”±äº a ä¸æ˜¯æœ‰æ•ˆçš„è½¬ä¹‰ç¬¦ï¼Œæ‰€ä»¥å°±ç›´æ¥è½¬æˆ 'abc' ã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥éªŒè¯è¿™ä¸ªè¯´æ³•ï¼š\n```\nconst str = \"\\abc\";\nconsole.info(str.length); // 3\n\"\\abc\" === \"abc\" //true\n```\nå› æ­¤ï¼Œä¸Šé¢çš„ä»£ç åº”è¯¥æ”¹æˆï¼š\n```\nconst str = '\\\\abc';\nconst reg = /\\\\abc/;\nreg.test(str); // true\n```\n\n#### 2020/01/02\næ”¾å¤§é¢„è§ˆå›¾ç‰‡çš„æŸä¸ªéƒ¨åˆ†ï¼šæ€è·¯æ˜¯è®¡ç®— bbox çš„ scale æ•°å€¼ï¼Œä½¿ä¹‹èƒ½å¡«å……æ»¡æ•´ä¸ª container ï¼›å†è®¡ç®—åŸå§‹å›¾ç‰‡çš„åç§»é‡ï¼Œä½¿ä¹‹åªæ˜¾ç¤º bbox éƒ¨åˆ†ã€‚    \n```\nfunction Preview(props: {\n  imgSrc: string;\n  imgSize: { width: number; height: number };\n  box: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  };\n}) {\n  const [containerSize] = useState({ width: 350, height: 400 });\n\n  const scale = Math.min(\n    containerSize.width / props.box.width,\n    containerSize.height / props.box.height\n  );\n  const boxCenter = {\n    x: props.box.x + props.box.width / 2,\n    y: props.box.y + props.box.height / 2\n  };\n  const containerCenter = {\n    x: containerSize.width / 2,\n    y: containerSize.height / 2\n  };\n  const tr = {\n    x: containerCenter.x - boxCenter.x * scale,\n    y: containerCenter.y - boxCenter.y * scale\n  };\n\n  return (\n    <div style={{ position: \"relative\", ...containerSize, overflow: \"hidden\" }}>\n      <img\n        src={props.imgSrc}\n        style={{\n          ...props.imgSize,\n          objectFit: \"contain\",\n          position: \"absolute\",\n          left: 0,\n          top: 0,\n          transform: `translate(${tr.x}px, ${tr.y}px) scale(${scale})`,\n          transformOrigin: \"top left\",\n          transition: \"all 0.3s\"\n        }}\n      />\n    </div>\n  );\n}\n```","slug":"FrontEnd-Notes-2020-01","published":1,"updated":"2020-01-12T02:46:59.170Z","_id":"ck5393is00007icuegsdu99f2","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"about\"><a href=\"#About\" class=\"headerlink\" title=\"About\"></a>About</h4><p>ğŸ“… 2020 å¹´ 1 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚</p>\n<p>æ–°å¹´å¿«ä¹ï¼å¸Œæœ›æ–°çš„ä¸€å¹´èƒ½åšæŒè®°ç¬”è®°ï¼</p>\n<h4 id=\"20200112\"><a href=\"#2020-01-12\" class=\"headerlink\" title=\"2020/01/12\"></a>2020/01/12</h4><p>ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://medium.com/dailyjs/parseint-mystery-7c4368ef7b21\" target=\"_blank\" rel=\"noopener\">Why [â€˜1â€™, â€˜7â€™, â€˜11â€™].map(parseInt) returns [1, NaN, 3] in Javascript</a><br>ä¸€ç¯‡éå¸¸æœ‰è¶£çš„æ–‡ç« ï¼Œå¼€ç¯‡ä¸€å¼ å›¾ï¼š<br><img src=\"https://i.loli.net/2020/01/12/grShLvH28RDXtYM.png\" alt=\"image.png\"><br>å‡ºç°è¿™ç§ç»“æœçš„åŸå› ï¼Œåœ¨äº <code>map</code> å‡½æ•°é»˜è®¤ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šcurrentValueã€currentIndex ä»¥åŠ full array ã€‚è€Œå¯¹äº <code>parseInt</code> è€Œè¨€ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåŸºæ•°ï¼Œç”¨æ­¤æ¥è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚â€™1â€™ ä»¥ 0 ä¸ºåŸºæ•°è¿›è¡Œè§£æï¼Œ0 çš„å¸ƒå°”å€¼ä¸º <code>false</code>ï¼Œå› æ­¤ä¼šä»¥é»˜è®¤åŸºæ•° 10 è¿›è¡Œè§£æï¼Œè¾“å‡º 1 ï¼›â€™7â€™ ä»¥ 1 ä¸ºåŸºæ•° è¿›è¡Œè§£æï¼Œä¼šè¾“å‡º <code>NaN</code> ï¼›â€™11â€™ ä»¥ 2 ä¸ºåŸºæ•°è§£æï¼Œä¼šè¾“å‡º 3ã€‚<br>[â€˜1â€™ï¼Œâ€™7â€™ï¼Œâ€™11â€™]ã€‚mapï¼ˆparseIntï¼‰æ— æ³•æŒ‰é¢„æœŸå·¥ä½œï¼Œå› ä¸ºmapæ¯æ¬¡è¿­ä»£éƒ½ä¼šå°†ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™parseIntï¼ˆï¼‰ã€‚ ç¬¬äºŒä¸ªå‚æ•°ç´¢å¼•ä½œä¸ºåŸºæ•°å‚æ•°ä¼ é€’åˆ°parseIntä¸­ã€‚ å› æ­¤ï¼Œä½¿ç”¨ä¸åŒçš„åŸºæ•°è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚ â€˜7â€™è¢«è§£æä¸ºåŸºæ•°1ï¼Œå³NaNï¼Œâ€™11â€™è¢«è§£æä¸ºåŸºæ•°2ï¼Œå³3ã€‚â€™1â€™è¢«è§£æä¸ºé»˜è®¤åŸºæ•°10ï¼Œå› ä¸ºå…¶ç´¢å¼•0ä¸ºå‡ã€‚</p>\n<h4 id=\"20200109\"><a href=\"#2020-01-09\" class=\"headerlink\" title=\"2020/01/09\"></a>2020/01/09</h4><p>ä¸€ã€<a href=\"https://stackoverflow.com/questions/30362733/handling-errors-in-promise-all/30378082\" target=\"_blank\" rel=\"noopener\">How to handle errors in Promise.all</a><br>ç®€å•æ¥è¯´å°±æ˜¯ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">await Promise.all(vals.map(val =&gt; </span><br><span class=\"line\">  promise(val)</span><br><span class=\"line\">  .catch(err =&gt; &#123;</span><br><span class=\"line\">    // handle here</span><br><span class=\"line\">    return err</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">))</span><br></pre></td></tr></table></figure></p>\n<p>äºŒã€<a href=\"https://css-tricks.com/new-es2018-features-every-javascript-developer-should-know/\" target=\"_blank\" rel=\"noopener\">New ES2018 Features</a></p>\n<h4 id=\"20200105\"><a href=\"#2020-01-05\" class=\"headerlink\" title=\"2020/01/05\"></a>2020/01/05</h4><p>ä»Šå¤©éœ€è¦å¯¹æŸä¸ªæ•°å€¼è¿›è¡Œç±»å‹æ ¡éªŒï¼Œé¿å…å‡ºç° <code>NaN</code>ï¼Œæœ¬æ¥æ˜¯ç”¨ <code>!typeof value === &#39;number&#39;</code>ï¼Œåæ¥å‘ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeof NaN === &apos;number&apos;</span><br></pre></td></tr></table></figure></p>\n<p>å…³äºä¸ºä»€ä¹ˆæ˜¯è¿™ç§è¾“å‡ºï¼Œå¯ä»¥çœ‹ medium ä¸Šè¿™ç¯‡æ–‡ç« ï¼š<a href=\"https://javascriptrefined.io/nan-and-typeof-36cd6e2a4e43\" target=\"_blank\" rel=\"noopener\">NaN and typeof</a>ã€‚<br>å¦‚æœéœ€è¦åˆ¤æ–­æŸä¸ªæ•°æ˜¯å¦ä¸º <code>NaN</code>ï¼Œå¯ç”¨ <code>isNaN(value)</code> åˆ¤æ–­ã€‚</p>\n<h4 id=\"20200104\"><a href=\"#2020-01-04\" class=\"headerlink\" title=\"2020/01/04\"></a>2020/01/04</h4><p>ä»Šå¤©åœ¨å¤„ç†æ­£åˆ™è¡¨è¾¾å¼æ—¶é‡åˆ°è¿™æ ·çš„ç–‘æƒ‘ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const str = &apos;\\abc&apos;;</span><br><span class=\"line\">const reg = /\\\\abc/;</span><br><span class=\"line\">reg.test(str); // false</span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“åæ–œæ  <code>\\</code> æ˜¯è½¬ä¹‰çš„ä½œç”¨ï¼Œå¦‚æœè¦è¾“å‡ºæ–œæ ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨ <code>\\\\</code> ï¼›åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>reg</code> åŒ¹é…æ˜¯æ˜¯ <code>\\abc</code> ï¼Œä¸ºä»€ä¹ˆè¾“å‡ºç»“æœä¼šæ˜¯ <code>false</code> å‘¢ï¼Ÿ<br>ç»è¿‡æŸ¥é˜…ï¼Œå‘ç°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œâ€™\\â€™ ä¹Ÿæœ‰è½¬ä¹‰çš„ä½œç”¨ã€‚å¦‚æœåæ–œæ å‡ºç°åœ¨å­—ç¬¦çš„å‰é¢ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚è¯´ â€˜\\nâ€™ è¡¨ç¤ºæ¢è¡Œï¼Œå­—ç¬¦ä¸² â€˜\\abcâ€™ ä¹Ÿæ¶‰åŠè½¬ä¹‰æ“ä½œï¼Œç”±äº a ä¸æ˜¯æœ‰æ•ˆçš„è½¬ä¹‰ç¬¦ï¼Œæ‰€ä»¥å°±ç›´æ¥è½¬æˆ â€˜abcâ€™ ã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥éªŒè¯è¿™ä¸ªè¯´æ³•ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const str = &quot;\\abc&quot;;</span><br><span class=\"line\">console.info(str.length); // 3</span><br><span class=\"line\">&quot;\\abc&quot; === &quot;abc&quot; //true</span><br></pre></td></tr></table></figure></p>\n<p>å› æ­¤ï¼Œä¸Šé¢çš„ä»£ç åº”è¯¥æ”¹æˆï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const str = &apos;\\\\abc&apos;;</span><br><span class=\"line\">const reg = /\\\\abc/;</span><br><span class=\"line\">reg.test(str); // true</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"20200102\"><a href=\"#2020-01-02\" class=\"headerlink\" title=\"2020/01/02\"></a>2020/01/02</h4><p>æ”¾å¤§é¢„è§ˆå›¾ç‰‡çš„æŸä¸ªéƒ¨åˆ†ï¼šæ€è·¯æ˜¯è®¡ç®— bbox çš„ scale æ•°å€¼ï¼Œä½¿ä¹‹èƒ½å¡«å……æ»¡æ•´ä¸ª container ï¼›å†è®¡ç®—åŸå§‹å›¾ç‰‡çš„åç§»é‡ï¼Œä½¿ä¹‹åªæ˜¾ç¤º bbox éƒ¨åˆ†ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Preview(props: &#123;</span><br><span class=\"line\">  imgSrc: string;</span><br><span class=\"line\">  imgSize: &#123; width: number; height: number &#125;;</span><br><span class=\"line\">  box: &#123;</span><br><span class=\"line\">    x: number;</span><br><span class=\"line\">    y: number;</span><br><span class=\"line\">    width: number;</span><br><span class=\"line\">    height: number;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;) &#123;</span><br><span class=\"line\">  const [containerSize] = useState(&#123; width: 350, height: 400 &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  const scale = Math.min(</span><br><span class=\"line\">    containerSize.width / props.box.width,</span><br><span class=\"line\">    containerSize.height / props.box.height</span><br><span class=\"line\">  );</span><br><span class=\"line\">  const boxCenter = &#123;</span><br><span class=\"line\">    x: props.box.x + props.box.width / 2,</span><br><span class=\"line\">    y: props.box.y + props.box.height / 2</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  const containerCenter = &#123;</span><br><span class=\"line\">    x: containerSize.width / 2,</span><br><span class=\"line\">    y: containerSize.height / 2</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  const tr = &#123;</span><br><span class=\"line\">    x: containerCenter.x - boxCenter.x * scale,</span><br><span class=\"line\">    y: containerCenter.y - boxCenter.y * scale</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;div style=&#123;&#123; position: &quot;relative&quot;, ...containerSize, overflow: &quot;hidden&quot; &#125;&#125;&gt;</span><br><span class=\"line\">      &lt;img</span><br><span class=\"line\">        src=&#123;props.imgSrc&#125;</span><br><span class=\"line\">        style=&#123;&#123;</span><br><span class=\"line\">          ...props.imgSize,</span><br><span class=\"line\">          objectFit: &quot;contain&quot;,</span><br><span class=\"line\">          position: &quot;absolute&quot;,</span><br><span class=\"line\">          left: 0,</span><br><span class=\"line\">          top: 0,</span><br><span class=\"line\">          transform: `translate($&#123;tr.x&#125;px, $&#123;tr.y&#125;px) scale($&#123;scale&#125;)`,</span><br><span class=\"line\">          transformOrigin: &quot;top left&quot;,</span><br><span class=\"line\">          transition: &quot;all 0.3s&quot;</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"About\"><a href=\"#About\" class=\"headerlink\" title=\"About\"></a>About</h4><p>ğŸ“… 2020 å¹´ 1 æœˆçš„é›¶æ•£å­¦ä¹ è®°å½•ã€‚</p>\n<p>æ–°å¹´å¿«ä¹ï¼å¸Œæœ›æ–°çš„ä¸€å¹´èƒ½åšæŒè®°ç¬”è®°ï¼</p>\n<h4 id=\"2020-01-12\"><a href=\"#2020-01-12\" class=\"headerlink\" title=\"2020/01/12\"></a>2020/01/12</h4><p>ä»Šæ—¥é˜…è¯»ï¼š<a href=\"https://medium.com/dailyjs/parseint-mystery-7c4368ef7b21\" target=\"_blank\" rel=\"noopener\">Why [â€˜1â€™, â€˜7â€™, â€˜11â€™].map(parseInt) returns [1, NaN, 3] in Javascript</a><br>ä¸€ç¯‡éå¸¸æœ‰è¶£çš„æ–‡ç« ï¼Œå¼€ç¯‡ä¸€å¼ å›¾ï¼š<br><img src=\"https://i.loli.net/2020/01/12/grShLvH28RDXtYM.png\" alt=\"image.png\"><br>å‡ºç°è¿™ç§ç»“æœçš„åŸå› ï¼Œåœ¨äº <code>map</code> å‡½æ•°é»˜è®¤ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šcurrentValueã€currentIndex ä»¥åŠ full array ã€‚è€Œå¯¹äº <code>parseInt</code> è€Œè¨€ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåŸºæ•°ï¼Œç”¨æ­¤æ¥è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚â€™1â€™ ä»¥ 0 ä¸ºåŸºæ•°è¿›è¡Œè§£æï¼Œ0 çš„å¸ƒå°”å€¼ä¸º <code>false</code>ï¼Œå› æ­¤ä¼šä»¥é»˜è®¤åŸºæ•° 10 è¿›è¡Œè§£æï¼Œè¾“å‡º 1 ï¼›â€™7â€™ ä»¥ 1 ä¸ºåŸºæ•° è¿›è¡Œè§£æï¼Œä¼šè¾“å‡º <code>NaN</code> ï¼›â€™11â€™ ä»¥ 2 ä¸ºåŸºæ•°è§£æï¼Œä¼šè¾“å‡º 3ã€‚<br>[â€˜1â€™ï¼Œâ€™7â€™ï¼Œâ€™11â€™]ã€‚mapï¼ˆparseIntï¼‰æ— æ³•æŒ‰é¢„æœŸå·¥ä½œï¼Œå› ä¸ºmapæ¯æ¬¡è¿­ä»£éƒ½ä¼šå°†ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™parseIntï¼ˆï¼‰ã€‚ ç¬¬äºŒä¸ªå‚æ•°ç´¢å¼•ä½œä¸ºåŸºæ•°å‚æ•°ä¼ é€’åˆ°parseIntä¸­ã€‚ å› æ­¤ï¼Œä½¿ç”¨ä¸åŒçš„åŸºæ•°è§£ææ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚ â€˜7â€™è¢«è§£æä¸ºåŸºæ•°1ï¼Œå³NaNï¼Œâ€™11â€™è¢«è§£æä¸ºåŸºæ•°2ï¼Œå³3ã€‚â€™1â€™è¢«è§£æä¸ºé»˜è®¤åŸºæ•°10ï¼Œå› ä¸ºå…¶ç´¢å¼•0ä¸ºå‡ã€‚</p>\n<h4 id=\"2020-01-09\"><a href=\"#2020-01-09\" class=\"headerlink\" title=\"2020/01/09\"></a>2020/01/09</h4><p>ä¸€ã€<a href=\"https://stackoverflow.com/questions/30362733/handling-errors-in-promise-all/30378082\" target=\"_blank\" rel=\"noopener\">How to handle errors in Promise.all</a><br>ç®€å•æ¥è¯´å°±æ˜¯ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">await Promise.all(vals.map(val =&gt; </span><br><span class=\"line\">  promise(val)</span><br><span class=\"line\">  .catch(err =&gt; &#123;</span><br><span class=\"line\">    // handle here</span><br><span class=\"line\">    return err</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">))</span><br></pre></td></tr></table></figure></p>\n<p>äºŒã€<a href=\"https://css-tricks.com/new-es2018-features-every-javascript-developer-should-know/\" target=\"_blank\" rel=\"noopener\">New ES2018 Features</a></p>\n<h4 id=\"2020-01-05\"><a href=\"#2020-01-05\" class=\"headerlink\" title=\"2020/01/05\"></a>2020/01/05</h4><p>ä»Šå¤©éœ€è¦å¯¹æŸä¸ªæ•°å€¼è¿›è¡Œç±»å‹æ ¡éªŒï¼Œé¿å…å‡ºç° <code>NaN</code>ï¼Œæœ¬æ¥æ˜¯ç”¨ <code>!typeof value === &#39;number&#39;</code>ï¼Œåæ¥å‘ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeof NaN === &apos;number&apos;</span><br></pre></td></tr></table></figure></p>\n<p>å…³äºä¸ºä»€ä¹ˆæ˜¯è¿™ç§è¾“å‡ºï¼Œå¯ä»¥çœ‹ medium ä¸Šè¿™ç¯‡æ–‡ç« ï¼š<a href=\"https://javascriptrefined.io/nan-and-typeof-36cd6e2a4e43\" target=\"_blank\" rel=\"noopener\">NaN and typeof</a>ã€‚<br>å¦‚æœéœ€è¦åˆ¤æ–­æŸä¸ªæ•°æ˜¯å¦ä¸º <code>NaN</code>ï¼Œå¯ç”¨ <code>isNaN(value)</code> åˆ¤æ–­ã€‚</p>\n<h4 id=\"2020-01-04\"><a href=\"#2020-01-04\" class=\"headerlink\" title=\"2020/01/04\"></a>2020/01/04</h4><p>ä»Šå¤©åœ¨å¤„ç†æ­£åˆ™è¡¨è¾¾å¼æ—¶é‡åˆ°è¿™æ ·çš„ç–‘æƒ‘ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const str = &apos;\\abc&apos;;</span><br><span class=\"line\">const reg = /\\\\abc/;</span><br><span class=\"line\">reg.test(str); // false</span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“åæ–œæ  <code>\\</code> æ˜¯è½¬ä¹‰çš„ä½œç”¨ï¼Œå¦‚æœè¦è¾“å‡ºæ–œæ ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨ <code>\\\\</code> ï¼›åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>reg</code> åŒ¹é…æ˜¯æ˜¯ <code>\\abc</code> ï¼Œä¸ºä»€ä¹ˆè¾“å‡ºç»“æœä¼šæ˜¯ <code>false</code> å‘¢ï¼Ÿ<br>ç»è¿‡æŸ¥é˜…ï¼Œå‘ç°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œâ€™\\â€™ ä¹Ÿæœ‰è½¬ä¹‰çš„ä½œç”¨ã€‚å¦‚æœåæ–œæ å‡ºç°åœ¨å­—ç¬¦çš„å‰é¢ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚è¯´ â€˜\\nâ€™ è¡¨ç¤ºæ¢è¡Œï¼Œå­—ç¬¦ä¸² â€˜\\abcâ€™ ä¹Ÿæ¶‰åŠè½¬ä¹‰æ“ä½œï¼Œç”±äº a ä¸æ˜¯æœ‰æ•ˆçš„è½¬ä¹‰ç¬¦ï¼Œæ‰€ä»¥å°±ç›´æ¥è½¬æˆ â€˜abcâ€™ ã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥éªŒè¯è¿™ä¸ªè¯´æ³•ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const str = &quot;\\abc&quot;;</span><br><span class=\"line\">console.info(str.length); // 3</span><br><span class=\"line\">&quot;\\abc&quot; === &quot;abc&quot; //true</span><br></pre></td></tr></table></figure></p>\n<p>å› æ­¤ï¼Œä¸Šé¢çš„ä»£ç åº”è¯¥æ”¹æˆï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const str = &apos;\\\\abc&apos;;</span><br><span class=\"line\">const reg = /\\\\abc/;</span><br><span class=\"line\">reg.test(str); // true</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"2020-01-02\"><a href=\"#2020-01-02\" class=\"headerlink\" title=\"2020/01/02\"></a>2020/01/02</h4><p>æ”¾å¤§é¢„è§ˆå›¾ç‰‡çš„æŸä¸ªéƒ¨åˆ†ï¼šæ€è·¯æ˜¯è®¡ç®— bbox çš„ scale æ•°å€¼ï¼Œä½¿ä¹‹èƒ½å¡«å……æ»¡æ•´ä¸ª container ï¼›å†è®¡ç®—åŸå§‹å›¾ç‰‡çš„åç§»é‡ï¼Œä½¿ä¹‹åªæ˜¾ç¤º bbox éƒ¨åˆ†ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Preview(props: &#123;</span><br><span class=\"line\">  imgSrc: string;</span><br><span class=\"line\">  imgSize: &#123; width: number; height: number &#125;;</span><br><span class=\"line\">  box: &#123;</span><br><span class=\"line\">    x: number;</span><br><span class=\"line\">    y: number;</span><br><span class=\"line\">    width: number;</span><br><span class=\"line\">    height: number;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;) &#123;</span><br><span class=\"line\">  const [containerSize] = useState(&#123; width: 350, height: 400 &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  const scale = Math.min(</span><br><span class=\"line\">    containerSize.width / props.box.width,</span><br><span class=\"line\">    containerSize.height / props.box.height</span><br><span class=\"line\">  );</span><br><span class=\"line\">  const boxCenter = &#123;</span><br><span class=\"line\">    x: props.box.x + props.box.width / 2,</span><br><span class=\"line\">    y: props.box.y + props.box.height / 2</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  const containerCenter = &#123;</span><br><span class=\"line\">    x: containerSize.width / 2,</span><br><span class=\"line\">    y: containerSize.height / 2</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  const tr = &#123;</span><br><span class=\"line\">    x: containerCenter.x - boxCenter.x * scale,</span><br><span class=\"line\">    y: containerCenter.y - boxCenter.y * scale</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;div style=&#123;&#123; position: &quot;relative&quot;, ...containerSize, overflow: &quot;hidden&quot; &#125;&#125;&gt;</span><br><span class=\"line\">      &lt;img</span><br><span class=\"line\">        src=&#123;props.imgSrc&#125;</span><br><span class=\"line\">        style=&#123;&#123;</span><br><span class=\"line\">          ...props.imgSize,</span><br><span class=\"line\">          objectFit: &quot;contain&quot;,</span><br><span class=\"line\">          position: &quot;absolute&quot;,</span><br><span class=\"line\">          left: 0,</span><br><span class=\"line\">          top: 0,</span><br><span class=\"line\">          transform: `translate($&#123;tr.x&#125;px, $&#123;tr.y&#125;px) scale($&#123;scale&#125;)`,</span><br><span class=\"line\">          transformOrigin: &quot;top left&quot;,</span><br><span class=\"line\">          transition: &quot;all 0.3s&quot;</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"We Are Graduated!","catalog":true,"date":"2019-06-13T09:53:24.000Z","subtitle":null,"header-img":null,"_content":"\nWe Are Graduated ! ğŸ“\n\nReady to move on ! ğŸ’ª","source":"_posts/We Are Graduated!.md","raw":"---\ntitle: We Are Graduated!\ncatalog: true\ndate: 2019-06-13 17:53:24\nsubtitle:\nheader-img:\ntags: Daily\n---\n\nWe Are Graduated ! ğŸ“\n\nReady to move on ! ğŸ’ª","slug":"We Are Graduated!","published":1,"updated":"2019-12-08T06:55:16.892Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck5393is20008icuey4qlqq1b","content":"<p>We Are Graduated ! ğŸ“</p>\n<p>Ready to move on ! ğŸ’ª</p>\n","site":{"data":{}},"excerpt":"","more":"<p>We Are Graduated ! ğŸ“</p>\n<p>Ready to move on ! ğŸ’ª</p>\n"},{"title":"What is Gumbel-Softmax Trickï¼Ÿ","catalog":true,"date":"2019-07-16T12:02:54.000Z","subtitle":null,"header-img":null,"mathjax":true,"_content":"\nGumbel-Softmax trick åœ¨VAEã€GANã€NASç­‰æ·±åº¦å­¦ä¹ é¢†åŸŸç»å¸¸å‡ºç°ï¼Œé‚£å®ƒåˆ°åº•æ˜¯å•¥ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ  \n\n### èƒŒæ™¯é—®é¢˜\né¦–å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹é—®é¢˜çš„èƒŒæ™¯ã€‚å‡è®¾æˆ‘ä»¬åœ¨ç½‘ç»œä¸­æœ‰ä¸€ä¸ªæœ‰ \\\\(n\\\\) ä¸ªå–å€¼çš„ç¦»æ•£åˆ†å¸ƒ\\\\(P(x)\\\\)ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª\\\\(n\\\\)ç»´çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯è¦å¯¹å…¶è¿›è¡Œé‡‡æ ·æˆ–è€…å¾—åˆ°æœ€ç»ˆæ¦‚ç‡æœ€å¤§çš„ä¸€ä¸ªå–å€¼ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥ç›´æ¥é‡‡æ ·æˆ–å–\\\\(arg \\max\\\\)å¾—åˆ°ç»“æœã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯å¯¼çš„ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\n\n### Re-Parameterization Trick\né¦–å…ˆä»‹ç»ä¸€ä¸ªå«é‡å‚æ•°åŒ–(Re-Parameterization)çš„ä¸œè¥¿ï¼ŒRe-Parameterizationè§£å†³äº†ä¸Šé¢æåˆ°çš„é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚è¿™é‡Œç”¨æ²¹ç®¡ä¸Šä¸€ä¸ª[å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨æ•™ç¨‹](https://www.youtube.com/watch?v=9zKuYvjFFS8)ä¸­çš„å›¾ç‰‡æ¥è§£é‡Šã€‚\n![re-paramerise](re-paramerise.png)\né¦–å…ˆå·¦è¾¹æ˜¯é‡å‚æ•°åŒ–ä¹‹å‰çš„å½¢å¼ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡å­¦ä¹ åˆ°äº†æ ‡å‡†å·®\\\\(\\phi\\\\)å’Œå‡å€¼\\\\(x\\\\)ï¼Œé€šè¿‡å¯¹åˆ†å¸ƒ\\\\(q\\\\)è¿›è¡Œé‡‡æ ·å¾—åˆ°\\\\(z\\\\)ï¼Œç„¶åä¼ å…¥ä¸‹ä¸€å±‚ç½‘ç»œã€‚ç„¶è€Œè¿™å°±æœ‰ä¸ªé—®é¢˜ï¼Œé‡‡æ ·è¿‡ç¨‹æ˜¯æ²¡æ³•åä¼ çš„ï¼Œè¿™æ ·åŠ è½½ç½‘ç»œä¸­å°±æ²¡æ³•å­¦ä¹ äº†ï¼Œå› æ­¤å°±æœ‰äº†å³è¾¹çš„å½¢å¼ã€‚  \n\nåœ¨è¿™é‡Œå‘¢ï¼Œå…¶å®å°±æ˜¯åœ¨ç½‘ç»œä¸­åªä¿ç•™å¯ä»¥æ±‚å¯¼çš„éƒ¨åˆ†ï¼ŒæŠŠä¸å¯å¯¼çš„é‡‡æ ·éƒ¨åˆ†æ”¾åˆ°ç½‘ç»œå¤–ç”¨ä¸€ä¸ªæ–°çš„è¾“å…¥èŠ‚ç‚¹\\\\(\\epsilon\\\\)è¡¨ç¤ºã€‚\\\\(\\epsilon\\\\)é‡‡æ ·çš„è¿‡ç¨‹å’Œç½‘ç»œå­¦ä¹ æ˜¯åˆ†ç¦»çš„ï¼Œå› æ­¤ä¸å½±å“ç½‘ç»œåä¼ ã€‚  \n\nå…·ä½“è€Œè¨€ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ ¹æ®å‡å€¼å’Œæ–¹å·®ä»æ­£å¤ªåˆ†å¸ƒ\\\\(N(x,\\phi^2)\\\\)é‡‡æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸ºå…ˆä»\\\\(\\epsilon=N(0,1)\\\\)é‡‡æ ·ï¼Œç„¶åè®¡ç®—\\\\(z=x+\\epsilon\\cdot \\phi\\\\)æ¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„\\\\(z\\\\)ã€‚\n\n### Gumbel-Softmax Trick\né€šè¿‡Re-Parameterization Trickæˆ‘ä»¬å¯ä»¥ä¸€å®šæ¡ä»¶ä¸‹è§£å†³é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚ä½†å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è¿ç»­çš„é«˜æ–¯åˆ†å¸ƒä¸Šé‡‡æ ·ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªç¦»æ•£åˆ†å¸ƒ\\\\(P(x)\\\\)ä¸Šé‡‡æ ·ã€‚ä¸Šé¢çš„é‡å‚æ•°åæ˜¯å¯å¯¼çš„ï¼Œè€Œæ¢æˆç¦»æ•£åˆ†å¸ƒä»¥åï¼Œå°±æ— æ³•æ»¡è¶³äº†ã€‚æ‰€ä»¥ï¼Œå¯¹äºç¦»æ•£åˆ†å¸ƒè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\nç±»ä¼¼ä¸å‰é¢çš„é‡å‚æ•°æŠ€å·§ï¼Œæˆ‘ä»¬å¯¹äºç¦»æ•£å˜é‡æœ‰Gumbel-Max trickçš„é‡‡æ ·æ–¹æ³•ï¼š\n![gumbel-max](gumbel1.png)\nä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å°†ç¦»æ•£å˜é‡\\\\(\\log{\\alpha_1}, \\log{\\alpha_2}, \\log{\\alpha_3}\\\\)åŠ ä¸ŠGumbelå™ªå£°ï¼Œç„¶åå¯¹ç›¸åŠ åçš„éšæœºå˜é‡å–\\\\(\\arg \\max\\\\)åå¾—åˆ°ä¸€ä¸ªonehotå‘é‡ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‡æ ·ç»“æœï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$x_{\\alpha}=\\arg\\max(\\log(\\alpha_i)+G_i)$$\nä½†\\\\(\\arg \\max\\\\)è¿™ä¸ªæ“ä½œæ˜¯æ²¡æ³•æ±‚å¯¼çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨softmaxæ¥å¯¹\\\\(\\arg \\max\\\\)è¿›è¡Œæ¾å¼›ï¼Œè¿™å°±å¾—åˆ°äº†æˆ‘ä»¬çš„Gumbel-Softmax Trick:\n![gumbel-back](gumbel2.png)\nå…¶ä¸­ï¼Œ\\\\(\\lambda\\\\)æ˜¯softmaxå‡½æ•°çš„temperatureå‚æ•°ï¼Œç”¨äºæ§åˆ¶é‡‡æ · å½“\\\\(\\lambda \\to \\infty\\\\)æ—¶ï¼Œæ‰€æœ‰çš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡è¶‹è¿‘äºç›¸åŒï¼ˆæ¿€æ´»æ¦‚ç‡å·®å¼‚æ€§è¾ƒå°ï¼‰ï¼›è€Œå½“\\\\(\\lambda \\to 0\\\\)ï¼Œä¸åŒçš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡å·®å¼‚ä¹Ÿå°±è¶Šå¤§ï¼Œä¹Ÿå°±è¶Šè¶‹å‘äºonehotå‘é‡ã€‚ï¼ˆæ¸©åº¦è¿™ä¸ªè¯ä¸»è¦æ¥è‡ªäºç‰©ç†å­¦ä¸­çš„æ¸©åº¦ï¼Œå½“æ¸©åº¦é«˜çš„æ—¶å€™ï¼Œåˆ†å­çš„è¿åŠ¨å°±è¶Šå‰§çƒˆï¼Œéšæœºæ€§å°±è¶Šå¤§ï¼Œåä¹‹åˆ™è¶Šç¨³å®šï¼Œéšæœºæ€§è¶Šå°ï¼‰  \nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å¯¹åˆ†å¸ƒè¿›è¡Œé‡‡æ ·ï¼Œåˆèƒ½å¤Ÿæ»¡è¶³åœ¨ç½‘ç»œä¸­å¯ä»¥åå‘ä¼ æ’­å­¦ä¹ ã€‚  \nä½†æˆ‘ä»¬å¯èƒ½è¿˜ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å°±ç”¨softmaxå‡½æ•°å‘¢ï¼Œè¿™æ ·ä¸æ˜¯ä¹Ÿèƒ½åœ¨ç½‘ç»œä¸­å­¦ä¹ ä¹ˆï¼Ÿæˆ‘ä»¬å†å›é¡¾ä¸‹æˆ‘ä»¬çš„é—®é¢˜å°±èƒ½å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦é‡‡æ ·+èƒ½åä¼ ï¼Œsoftmaxæ»¡è¶³èƒ½åä¼ ä½†æ˜¯å®ƒä¸èƒ½è¾¾åˆ°æˆ‘ä»¬æ ¹æ®æ¦‚ç‡åˆ†å¸ƒé‡‡æ ·çš„ç›®çš„ï¼Œè€ŒGumbel-Max Trickå°±æ˜¯ç”¨æ¥è¿‘ä¼¼åˆ†å¸ƒç„¶åé‡‡æ ·çš„ã€‚  \nå¦å¤–ï¼Œæˆ‘ä»¬åœ¨æ­¤ç”¨åˆ°äº†Gumbel Distribution--\\\\(G\\\\)ï¼Œæ˜¯ä¸€ä¸ªæå€¼åˆ†å¸ƒï¼Œé€šä¿—æ¥è®²å°±æ˜¯åˆ†å¸ƒçš„æå€¼çš„åˆ†å¸ƒï¼Œå…·ä½“å¯å‚è€ƒï¼š\n[Gumbel distribution](https://en.wikipedia.org/wiki/Gumbel_distribution)\n\n### å‚è€ƒ\n[Gumbel-Softmax Trickå’ŒGumbelåˆ†å¸ƒ](https://www.cnblogs.com/initial-h/p/9468974.html)\n[The Gumbel-Softmax Trick for Inference of Discrete Variables](https://casmls.github.io/general/2017/02/01/GumbelSoftmax.html)\n[Variational Autoencoders](https://www.youtube.com/watch?v=9zKuYvjFFS8)\n[å¸¦ä½ è®¤è¯†ç¥å¥‡çš„Gumbel trick](https://blog.csdn.net/a358463121/article/details/80820878)\n[Talk: Categorical Reparameterization with Gumbel-Softmax & The Concrete Distribution](https://www.youtube.com/watch?v=wVkLM2KKHp8)","source":"_posts/What-is-Gumbel-Softmax-Trick.md","raw":"---\ntitle: What is Gumbel-Softmax Trickï¼Ÿ\ncatalog: true\ndate: 2019-07-16 20:02:54\nsubtitle:\nheader-img:\nmathjax: true\ntags: ML\n---\n\nGumbel-Softmax trick åœ¨VAEã€GANã€NASç­‰æ·±åº¦å­¦ä¹ é¢†åŸŸç»å¸¸å‡ºç°ï¼Œé‚£å®ƒåˆ°åº•æ˜¯å•¥ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ  \n\n### èƒŒæ™¯é—®é¢˜\né¦–å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹é—®é¢˜çš„èƒŒæ™¯ã€‚å‡è®¾æˆ‘ä»¬åœ¨ç½‘ç»œä¸­æœ‰ä¸€ä¸ªæœ‰ \\\\(n\\\\) ä¸ªå–å€¼çš„ç¦»æ•£åˆ†å¸ƒ\\\\(P(x)\\\\)ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª\\\\(n\\\\)ç»´çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯è¦å¯¹å…¶è¿›è¡Œé‡‡æ ·æˆ–è€…å¾—åˆ°æœ€ç»ˆæ¦‚ç‡æœ€å¤§çš„ä¸€ä¸ªå–å€¼ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥ç›´æ¥é‡‡æ ·æˆ–å–\\\\(arg \\max\\\\)å¾—åˆ°ç»“æœã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯å¯¼çš„ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\n\n### Re-Parameterization Trick\né¦–å…ˆä»‹ç»ä¸€ä¸ªå«é‡å‚æ•°åŒ–(Re-Parameterization)çš„ä¸œè¥¿ï¼ŒRe-Parameterizationè§£å†³äº†ä¸Šé¢æåˆ°çš„é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚è¿™é‡Œç”¨æ²¹ç®¡ä¸Šä¸€ä¸ª[å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨æ•™ç¨‹](https://www.youtube.com/watch?v=9zKuYvjFFS8)ä¸­çš„å›¾ç‰‡æ¥è§£é‡Šã€‚\n![re-paramerise](re-paramerise.png)\né¦–å…ˆå·¦è¾¹æ˜¯é‡å‚æ•°åŒ–ä¹‹å‰çš„å½¢å¼ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡å­¦ä¹ åˆ°äº†æ ‡å‡†å·®\\\\(\\phi\\\\)å’Œå‡å€¼\\\\(x\\\\)ï¼Œé€šè¿‡å¯¹åˆ†å¸ƒ\\\\(q\\\\)è¿›è¡Œé‡‡æ ·å¾—åˆ°\\\\(z\\\\)ï¼Œç„¶åä¼ å…¥ä¸‹ä¸€å±‚ç½‘ç»œã€‚ç„¶è€Œè¿™å°±æœ‰ä¸ªé—®é¢˜ï¼Œé‡‡æ ·è¿‡ç¨‹æ˜¯æ²¡æ³•åä¼ çš„ï¼Œè¿™æ ·åŠ è½½ç½‘ç»œä¸­å°±æ²¡æ³•å­¦ä¹ äº†ï¼Œå› æ­¤å°±æœ‰äº†å³è¾¹çš„å½¢å¼ã€‚  \n\nåœ¨è¿™é‡Œå‘¢ï¼Œå…¶å®å°±æ˜¯åœ¨ç½‘ç»œä¸­åªä¿ç•™å¯ä»¥æ±‚å¯¼çš„éƒ¨åˆ†ï¼ŒæŠŠä¸å¯å¯¼çš„é‡‡æ ·éƒ¨åˆ†æ”¾åˆ°ç½‘ç»œå¤–ç”¨ä¸€ä¸ªæ–°çš„è¾“å…¥èŠ‚ç‚¹\\\\(\\epsilon\\\\)è¡¨ç¤ºã€‚\\\\(\\epsilon\\\\)é‡‡æ ·çš„è¿‡ç¨‹å’Œç½‘ç»œå­¦ä¹ æ˜¯åˆ†ç¦»çš„ï¼Œå› æ­¤ä¸å½±å“ç½‘ç»œåä¼ ã€‚  \n\nå…·ä½“è€Œè¨€ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ ¹æ®å‡å€¼å’Œæ–¹å·®ä»æ­£å¤ªåˆ†å¸ƒ\\\\(N(x,\\phi^2)\\\\)é‡‡æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸ºå…ˆä»\\\\(\\epsilon=N(0,1)\\\\)é‡‡æ ·ï¼Œç„¶åè®¡ç®—\\\\(z=x+\\epsilon\\cdot \\phi\\\\)æ¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„\\\\(z\\\\)ã€‚\n\n### Gumbel-Softmax Trick\né€šè¿‡Re-Parameterization Trickæˆ‘ä»¬å¯ä»¥ä¸€å®šæ¡ä»¶ä¸‹è§£å†³é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚ä½†å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è¿ç»­çš„é«˜æ–¯åˆ†å¸ƒä¸Šé‡‡æ ·ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªç¦»æ•£åˆ†å¸ƒ\\\\(P(x)\\\\)ä¸Šé‡‡æ ·ã€‚ä¸Šé¢çš„é‡å‚æ•°åæ˜¯å¯å¯¼çš„ï¼Œè€Œæ¢æˆç¦»æ•£åˆ†å¸ƒä»¥åï¼Œå°±æ— æ³•æ»¡è¶³äº†ã€‚æ‰€ä»¥ï¼Œå¯¹äºç¦»æ•£åˆ†å¸ƒè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\nç±»ä¼¼ä¸å‰é¢çš„é‡å‚æ•°æŠ€å·§ï¼Œæˆ‘ä»¬å¯¹äºç¦»æ•£å˜é‡æœ‰Gumbel-Max trickçš„é‡‡æ ·æ–¹æ³•ï¼š\n![gumbel-max](gumbel1.png)\nä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å°†ç¦»æ•£å˜é‡\\\\(\\log{\\alpha_1}, \\log{\\alpha_2}, \\log{\\alpha_3}\\\\)åŠ ä¸ŠGumbelå™ªå£°ï¼Œç„¶åå¯¹ç›¸åŠ åçš„éšæœºå˜é‡å–\\\\(\\arg \\max\\\\)åå¾—åˆ°ä¸€ä¸ªonehotå‘é‡ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‡æ ·ç»“æœï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$x_{\\alpha}=\\arg\\max(\\log(\\alpha_i)+G_i)$$\nä½†\\\\(\\arg \\max\\\\)è¿™ä¸ªæ“ä½œæ˜¯æ²¡æ³•æ±‚å¯¼çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨softmaxæ¥å¯¹\\\\(\\arg \\max\\\\)è¿›è¡Œæ¾å¼›ï¼Œè¿™å°±å¾—åˆ°äº†æˆ‘ä»¬çš„Gumbel-Softmax Trick:\n![gumbel-back](gumbel2.png)\nå…¶ä¸­ï¼Œ\\\\(\\lambda\\\\)æ˜¯softmaxå‡½æ•°çš„temperatureå‚æ•°ï¼Œç”¨äºæ§åˆ¶é‡‡æ · å½“\\\\(\\lambda \\to \\infty\\\\)æ—¶ï¼Œæ‰€æœ‰çš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡è¶‹è¿‘äºç›¸åŒï¼ˆæ¿€æ´»æ¦‚ç‡å·®å¼‚æ€§è¾ƒå°ï¼‰ï¼›è€Œå½“\\\\(\\lambda \\to 0\\\\)ï¼Œä¸åŒçš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡å·®å¼‚ä¹Ÿå°±è¶Šå¤§ï¼Œä¹Ÿå°±è¶Šè¶‹å‘äºonehotå‘é‡ã€‚ï¼ˆæ¸©åº¦è¿™ä¸ªè¯ä¸»è¦æ¥è‡ªäºç‰©ç†å­¦ä¸­çš„æ¸©åº¦ï¼Œå½“æ¸©åº¦é«˜çš„æ—¶å€™ï¼Œåˆ†å­çš„è¿åŠ¨å°±è¶Šå‰§çƒˆï¼Œéšæœºæ€§å°±è¶Šå¤§ï¼Œåä¹‹åˆ™è¶Šç¨³å®šï¼Œéšæœºæ€§è¶Šå°ï¼‰  \nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å¯¹åˆ†å¸ƒè¿›è¡Œé‡‡æ ·ï¼Œåˆèƒ½å¤Ÿæ»¡è¶³åœ¨ç½‘ç»œä¸­å¯ä»¥åå‘ä¼ æ’­å­¦ä¹ ã€‚  \nä½†æˆ‘ä»¬å¯èƒ½è¿˜ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å°±ç”¨softmaxå‡½æ•°å‘¢ï¼Œè¿™æ ·ä¸æ˜¯ä¹Ÿèƒ½åœ¨ç½‘ç»œä¸­å­¦ä¹ ä¹ˆï¼Ÿæˆ‘ä»¬å†å›é¡¾ä¸‹æˆ‘ä»¬çš„é—®é¢˜å°±èƒ½å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦é‡‡æ ·+èƒ½åä¼ ï¼Œsoftmaxæ»¡è¶³èƒ½åä¼ ä½†æ˜¯å®ƒä¸èƒ½è¾¾åˆ°æˆ‘ä»¬æ ¹æ®æ¦‚ç‡åˆ†å¸ƒé‡‡æ ·çš„ç›®çš„ï¼Œè€ŒGumbel-Max Trickå°±æ˜¯ç”¨æ¥è¿‘ä¼¼åˆ†å¸ƒç„¶åé‡‡æ ·çš„ã€‚  \nå¦å¤–ï¼Œæˆ‘ä»¬åœ¨æ­¤ç”¨åˆ°äº†Gumbel Distribution--\\\\(G\\\\)ï¼Œæ˜¯ä¸€ä¸ªæå€¼åˆ†å¸ƒï¼Œé€šä¿—æ¥è®²å°±æ˜¯åˆ†å¸ƒçš„æå€¼çš„åˆ†å¸ƒï¼Œå…·ä½“å¯å‚è€ƒï¼š\n[Gumbel distribution](https://en.wikipedia.org/wiki/Gumbel_distribution)\n\n### å‚è€ƒ\n[Gumbel-Softmax Trickå’ŒGumbelåˆ†å¸ƒ](https://www.cnblogs.com/initial-h/p/9468974.html)\n[The Gumbel-Softmax Trick for Inference of Discrete Variables](https://casmls.github.io/general/2017/02/01/GumbelSoftmax.html)\n[Variational Autoencoders](https://www.youtube.com/watch?v=9zKuYvjFFS8)\n[å¸¦ä½ è®¤è¯†ç¥å¥‡çš„Gumbel trick](https://blog.csdn.net/a358463121/article/details/80820878)\n[Talk: Categorical Reparameterization with Gumbel-Softmax & The Concrete Distribution](https://www.youtube.com/watch?v=wVkLM2KKHp8)","slug":"What-is-Gumbel-Softmax-Trick","published":1,"updated":"2019-12-09T16:09:11.836Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck5393is6000bicueedtn9hph","content":"<p>Gumbel-Softmax trick åœ¨VAEã€GANã€NASç­‰æ·±åº¦å­¦ä¹ é¢†åŸŸç»å¸¸å‡ºç°ï¼Œé‚£å®ƒåˆ°åº•æ˜¯å•¥ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>\n<h3 id=\"èƒŒæ™¯é—®é¢˜\">èƒŒæ™¯é—®é¢˜</h3>\n<p>é¦–å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹é—®é¢˜çš„èƒŒæ™¯ã€‚å‡è®¾æˆ‘ä»¬åœ¨ç½‘ç»œä¸­æœ‰ä¸€ä¸ªæœ‰ \\(n\\) ä¸ªå–å€¼çš„ç¦»æ•£åˆ†å¸ƒ\\(P(x)\\)ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª\\(n\\)ç»´çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯è¦å¯¹å…¶è¿›è¡Œé‡‡æ ·æˆ–è€…å¾—åˆ°æœ€ç»ˆæ¦‚ç‡æœ€å¤§çš„ä¸€ä¸ªå–å€¼ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥ç›´æ¥é‡‡æ ·æˆ–å–\\(arg \\max\\)å¾—åˆ°ç»“æœã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯å¯¼çš„ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n<h3 id=\"re-parameterization-trick\">Re-Parameterization Trick</h3>\n<p>é¦–å…ˆä»‹ç»ä¸€ä¸ªå«é‡å‚æ•°åŒ–(Re-Parameterization)çš„ä¸œè¥¿ï¼ŒRe-Parameterizationè§£å†³äº†ä¸Šé¢æåˆ°çš„é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚è¿™é‡Œç”¨æ²¹ç®¡ä¸Šä¸€ä¸ª<a href=\"https://www.youtube.com/watch?v=9zKuYvjFFS8\" target=\"_blank\" rel=\"noopener\">å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨æ•™ç¨‹</a>ä¸­çš„å›¾ç‰‡æ¥è§£é‡Šã€‚<br>\n<img src=\"re-paramerise.png\" alt=\"re-paramerise\"><br>\né¦–å…ˆå·¦è¾¹æ˜¯é‡å‚æ•°åŒ–ä¹‹å‰çš„å½¢å¼ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡å­¦ä¹ åˆ°äº†æ ‡å‡†å·®\\(\\phi\\)å’Œå‡å€¼\\(x\\)ï¼Œé€šè¿‡å¯¹åˆ†å¸ƒ\\(q\\)è¿›è¡Œé‡‡æ ·å¾—åˆ°\\(z\\)ï¼Œç„¶åä¼ å…¥ä¸‹ä¸€å±‚ç½‘ç»œã€‚ç„¶è€Œè¿™å°±æœ‰ä¸ªé—®é¢˜ï¼Œé‡‡æ ·è¿‡ç¨‹æ˜¯æ²¡æ³•åä¼ çš„ï¼Œè¿™æ ·åŠ è½½ç½‘ç»œä¸­å°±æ²¡æ³•å­¦ä¹ äº†ï¼Œå› æ­¤å°±æœ‰äº†å³è¾¹çš„å½¢å¼ã€‚</p>\n<p>åœ¨è¿™é‡Œå‘¢ï¼Œå…¶å®å°±æ˜¯åœ¨ç½‘ç»œä¸­åªä¿ç•™å¯ä»¥æ±‚å¯¼çš„éƒ¨åˆ†ï¼ŒæŠŠä¸å¯å¯¼çš„é‡‡æ ·éƒ¨åˆ†æ”¾åˆ°ç½‘ç»œå¤–ç”¨ä¸€ä¸ªæ–°çš„è¾“å…¥èŠ‚ç‚¹\\(\\epsilon\\)è¡¨ç¤ºã€‚\\(\\epsilon\\)é‡‡æ ·çš„è¿‡ç¨‹å’Œç½‘ç»œå­¦ä¹ æ˜¯åˆ†ç¦»çš„ï¼Œå› æ­¤ä¸å½±å“ç½‘ç»œåä¼ ã€‚</p>\n<p>å…·ä½“è€Œè¨€ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ ¹æ®å‡å€¼å’Œæ–¹å·®ä»æ­£å¤ªåˆ†å¸ƒ\\(N(x,\\phi^2)\\)é‡‡æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸ºå…ˆä»\\(\\epsilon=N(0,1)\\)é‡‡æ ·ï¼Œç„¶åè®¡ç®—\\(z=x+\\epsilon\\cdot \\phi\\)æ¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„\\(z\\)ã€‚</p>\n<h3 id=\"gumbel-softmax-trick\">Gumbel-Softmax Trick</h3>\n<p>é€šè¿‡Re-Parameterization Trickæˆ‘ä»¬å¯ä»¥ä¸€å®šæ¡ä»¶ä¸‹è§£å†³é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚ä½†å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è¿ç»­çš„é«˜æ–¯åˆ†å¸ƒä¸Šé‡‡æ ·ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªç¦»æ•£åˆ†å¸ƒ\\(P(x)\\)ä¸Šé‡‡æ ·ã€‚ä¸Šé¢çš„é‡å‚æ•°åæ˜¯å¯å¯¼çš„ï¼Œè€Œæ¢æˆç¦»æ•£åˆ†å¸ƒä»¥åï¼Œå°±æ— æ³•æ»¡è¶³äº†ã€‚æ‰€ä»¥ï¼Œå¯¹äºç¦»æ•£åˆ†å¸ƒè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br>\nç±»ä¼¼ä¸å‰é¢çš„é‡å‚æ•°æŠ€å·§ï¼Œæˆ‘ä»¬å¯¹äºç¦»æ•£å˜é‡æœ‰Gumbel-Max trickçš„é‡‡æ ·æ–¹æ³•ï¼š<br>\n<img src=\"gumbel1.png\" alt=\"gumbel-max\"><br>\nä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å°†ç¦»æ•£å˜é‡\\(\\log{\\alpha_1}, \\log{\\alpha_2}, \\log{\\alpha_3}\\)åŠ ä¸ŠGumbelå™ªå£°ï¼Œç„¶åå¯¹ç›¸åŠ åçš„éšæœºå˜é‡å–\\(\\arg \\max\\)åå¾—åˆ°ä¸€ä¸ªonehotå‘é‡ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‡æ ·ç»“æœï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>\n$$x_{\\alpha}=\\arg\\max(\\log(\\alpha_i)+G_i)$$<br>\nä½†\\(\\arg \\max\\)è¿™ä¸ªæ“ä½œæ˜¯æ²¡æ³•æ±‚å¯¼çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨softmaxæ¥å¯¹\\(\\arg \\max\\)è¿›è¡Œæ¾å¼›ï¼Œè¿™å°±å¾—åˆ°äº†æˆ‘ä»¬çš„Gumbel-Softmax Trick:<br>\n<img src=\"gumbel2.png\" alt=\"gumbel-back\"><br>\nå…¶ä¸­ï¼Œ\\(\\lambda\\)æ˜¯softmaxå‡½æ•°çš„temperatureå‚æ•°ï¼Œç”¨äºæ§åˆ¶é‡‡æ · å½“\\(\\lambda \\to \\infty\\)æ—¶ï¼Œæ‰€æœ‰çš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡è¶‹è¿‘äºç›¸åŒï¼ˆæ¿€æ´»æ¦‚ç‡å·®å¼‚æ€§è¾ƒå°ï¼‰ï¼›è€Œå½“\\(\\lambda \\to 0\\)ï¼Œä¸åŒçš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡å·®å¼‚ä¹Ÿå°±è¶Šå¤§ï¼Œä¹Ÿå°±è¶Šè¶‹å‘äºonehotå‘é‡ã€‚ï¼ˆæ¸©åº¦è¿™ä¸ªè¯ä¸»è¦æ¥è‡ªäºç‰©ç†å­¦ä¸­çš„æ¸©åº¦ï¼Œå½“æ¸©åº¦é«˜çš„æ—¶å€™ï¼Œåˆ†å­çš„è¿åŠ¨å°±è¶Šå‰§çƒˆï¼Œéšæœºæ€§å°±è¶Šå¤§ï¼Œåä¹‹åˆ™è¶Šç¨³å®šï¼Œéšæœºæ€§è¶Šå°ï¼‰<br>\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å¯¹åˆ†å¸ƒè¿›è¡Œé‡‡æ ·ï¼Œåˆèƒ½å¤Ÿæ»¡è¶³åœ¨ç½‘ç»œä¸­å¯ä»¥åå‘ä¼ æ’­å­¦ä¹ ã€‚<br>\nä½†æˆ‘ä»¬å¯èƒ½è¿˜ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å°±ç”¨softmaxå‡½æ•°å‘¢ï¼Œè¿™æ ·ä¸æ˜¯ä¹Ÿèƒ½åœ¨ç½‘ç»œä¸­å­¦ä¹ ä¹ˆï¼Ÿæˆ‘ä»¬å†å›é¡¾ä¸‹æˆ‘ä»¬çš„é—®é¢˜å°±èƒ½å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦é‡‡æ ·+èƒ½åä¼ ï¼Œsoftmaxæ»¡è¶³èƒ½åä¼ ä½†æ˜¯å®ƒä¸èƒ½è¾¾åˆ°æˆ‘ä»¬æ ¹æ®æ¦‚ç‡åˆ†å¸ƒé‡‡æ ·çš„ç›®çš„ï¼Œè€ŒGumbel-Max Trickå°±æ˜¯ç”¨æ¥è¿‘ä¼¼åˆ†å¸ƒç„¶åé‡‡æ ·çš„ã€‚<br>\nå¦å¤–ï¼Œæˆ‘ä»¬åœ¨æ­¤ç”¨åˆ°äº†Gumbel Distributionâ€“\\(G\\)ï¼Œæ˜¯ä¸€ä¸ªæå€¼åˆ†å¸ƒï¼Œé€šä¿—æ¥è®²å°±æ˜¯åˆ†å¸ƒçš„æå€¼çš„åˆ†å¸ƒï¼Œå…·ä½“å¯å‚è€ƒï¼š<br>\n<a href=\"https://en.wikipedia.org/wiki/Gumbel_distribution\" target=\"_blank\" rel=\"noopener\">Gumbel distribution</a></p>\n<h3 id=\"å‚è€ƒ\">å‚è€ƒ</h3>\n<p><a href=\"https://www.cnblogs.com/initial-h/p/9468974.html\" target=\"_blank\" rel=\"noopener\">Gumbel-Softmax Trickå’ŒGumbelåˆ†å¸ƒ</a><br>\n<a href=\"https://casmls.github.io/general/2017/02/01/GumbelSoftmax.html\" target=\"_blank\" rel=\"noopener\">The Gumbel-Softmax Trick for Inference of Discrete Variables</a><br>\n<a href=\"https://www.youtube.com/watch?v=9zKuYvjFFS8\" target=\"_blank\" rel=\"noopener\">Variational Autoencoders</a><br>\n<a href=\"https://blog.csdn.net/a358463121/article/details/80820878\" target=\"_blank\" rel=\"noopener\">å¸¦ä½ è®¤è¯†ç¥å¥‡çš„Gumbel trick</a><br>\n<a href=\"https://www.youtube.com/watch?v=wVkLM2KKHp8\" target=\"_blank\" rel=\"noopener\">Talk: Categorical Reparameterization with Gumbel-Softmax &amp; The Concrete Distribution</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Gumbel-Softmax trick åœ¨VAEã€GANã€NASç­‰æ·±åº¦å­¦ä¹ é¢†åŸŸç»å¸¸å‡ºç°ï¼Œé‚£å®ƒåˆ°åº•æ˜¯å•¥ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>\n<h3>èƒŒæ™¯é—®é¢˜</h3>\n<p>é¦–å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹é—®é¢˜çš„èƒŒæ™¯ã€‚å‡è®¾æˆ‘ä»¬åœ¨ç½‘ç»œä¸­æœ‰ä¸€ä¸ªæœ‰ \\(n\\) ä¸ªå–å€¼çš„ç¦»æ•£åˆ†å¸ƒ\\(P(x)\\)ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª\\(n\\)ç»´çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯è¦å¯¹å…¶è¿›è¡Œé‡‡æ ·æˆ–è€…å¾—åˆ°æœ€ç»ˆæ¦‚ç‡æœ€å¤§çš„ä¸€ä¸ªå–å€¼ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥ç›´æ¥é‡‡æ ·æˆ–å–\\(arg \\max\\)å¾—åˆ°ç»“æœã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯å¯¼çš„ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n<h3>Re-Parameterization Trick</h3>\n<p>é¦–å…ˆä»‹ç»ä¸€ä¸ªå«é‡å‚æ•°åŒ–(Re-Parameterization)çš„ä¸œè¥¿ï¼ŒRe-Parameterizationè§£å†³äº†ä¸Šé¢æåˆ°çš„é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚è¿™é‡Œç”¨æ²¹ç®¡ä¸Šä¸€ä¸ª<a href=\"https://www.youtube.com/watch?v=9zKuYvjFFS8\" target=\"_blank\" rel=\"noopener\">å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨æ•™ç¨‹</a>ä¸­çš„å›¾ç‰‡æ¥è§£é‡Šã€‚<br>\n<img src=\"re-paramerise.png\" alt=\"re-paramerise\"><br>\né¦–å…ˆå·¦è¾¹æ˜¯é‡å‚æ•°åŒ–ä¹‹å‰çš„å½¢å¼ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡å­¦ä¹ åˆ°äº†æ ‡å‡†å·®\\(\\phi\\)å’Œå‡å€¼\\(x\\)ï¼Œé€šè¿‡å¯¹åˆ†å¸ƒ\\(q\\)è¿›è¡Œé‡‡æ ·å¾—åˆ°\\(z\\)ï¼Œç„¶åä¼ å…¥ä¸‹ä¸€å±‚ç½‘ç»œã€‚ç„¶è€Œè¿™å°±æœ‰ä¸ªé—®é¢˜ï¼Œé‡‡æ ·è¿‡ç¨‹æ˜¯æ²¡æ³•åä¼ çš„ï¼Œè¿™æ ·åŠ è½½ç½‘ç»œä¸­å°±æ²¡æ³•å­¦ä¹ äº†ï¼Œå› æ­¤å°±æœ‰äº†å³è¾¹çš„å½¢å¼ã€‚</p>\n<p>åœ¨è¿™é‡Œå‘¢ï¼Œå…¶å®å°±æ˜¯åœ¨ç½‘ç»œä¸­åªä¿ç•™å¯ä»¥æ±‚å¯¼çš„éƒ¨åˆ†ï¼ŒæŠŠä¸å¯å¯¼çš„é‡‡æ ·éƒ¨åˆ†æ”¾åˆ°ç½‘ç»œå¤–ç”¨ä¸€ä¸ªæ–°çš„è¾“å…¥èŠ‚ç‚¹\\(\\epsilon\\)è¡¨ç¤ºã€‚\\(\\epsilon\\)é‡‡æ ·çš„è¿‡ç¨‹å’Œç½‘ç»œå­¦ä¹ æ˜¯åˆ†ç¦»çš„ï¼Œå› æ­¤ä¸å½±å“ç½‘ç»œåä¼ ã€‚</p>\n<p>å…·ä½“è€Œè¨€ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ ¹æ®å‡å€¼å’Œæ–¹å·®ä»æ­£å¤ªåˆ†å¸ƒ\\(N(x,\\phi^2)\\)é‡‡æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸ºå…ˆä»\\(\\epsilon=N(0,1)\\)é‡‡æ ·ï¼Œç„¶åè®¡ç®—\\(z=x+\\epsilon\\cdot \\phi\\)æ¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„\\(z\\)ã€‚</p>\n<h3>Gumbel-Softmax Trick</h3>\n<p>é€šè¿‡Re-Parameterization Trickæˆ‘ä»¬å¯ä»¥ä¸€å®šæ¡ä»¶ä¸‹è§£å†³é‡‡æ ·ä¸å¯å¯¼çš„é—®é¢˜ã€‚ä½†å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è¿ç»­çš„é«˜æ–¯åˆ†å¸ƒä¸Šé‡‡æ ·ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªç¦»æ•£åˆ†å¸ƒ\\(P(x)\\)ä¸Šé‡‡æ ·ã€‚ä¸Šé¢çš„é‡å‚æ•°åæ˜¯å¯å¯¼çš„ï¼Œè€Œæ¢æˆç¦»æ•£åˆ†å¸ƒä»¥åï¼Œå°±æ— æ³•æ»¡è¶³äº†ã€‚æ‰€ä»¥ï¼Œå¯¹äºç¦»æ•£åˆ†å¸ƒè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br>\nç±»ä¼¼ä¸å‰é¢çš„é‡å‚æ•°æŠ€å·§ï¼Œæˆ‘ä»¬å¯¹äºç¦»æ•£å˜é‡æœ‰Gumbel-Max trickçš„é‡‡æ ·æ–¹æ³•ï¼š<br>\n<img src=\"gumbel1.png\" alt=\"gumbel-max\"><br>\nä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å°†ç¦»æ•£å˜é‡\\(\\log{\\alpha_1}, \\log{\\alpha_2}, \\log{\\alpha_3}\\)åŠ ä¸ŠGumbelå™ªå£°ï¼Œç„¶åå¯¹ç›¸åŠ åçš„éšæœºå˜é‡å–\\(\\arg \\max\\)åå¾—åˆ°ä¸€ä¸ªonehotå‘é‡ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‡æ ·ç»“æœï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>\n$$x_{\\alpha}=\\arg\\max(\\log(\\alpha_i)+G_i)$$<br>\nä½†\\(\\arg \\max\\)è¿™ä¸ªæ“ä½œæ˜¯æ²¡æ³•æ±‚å¯¼çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨softmaxæ¥å¯¹\\(\\arg \\max\\)è¿›è¡Œæ¾å¼›ï¼Œè¿™å°±å¾—åˆ°äº†æˆ‘ä»¬çš„Gumbel-Softmax Trick:<br>\n<img src=\"gumbel2.png\" alt=\"gumbel-back\"><br>\nå…¶ä¸­ï¼Œ\\(\\lambda\\)æ˜¯softmaxå‡½æ•°çš„temperatureå‚æ•°ï¼Œç”¨äºæ§åˆ¶é‡‡æ · å½“\\(\\lambda \\to \\infty\\)æ—¶ï¼Œæ‰€æœ‰çš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡è¶‹è¿‘äºç›¸åŒï¼ˆæ¿€æ´»æ¦‚ç‡å·®å¼‚æ€§è¾ƒå°ï¼‰ï¼›è€Œå½“\\(\\lambda \\to 0\\)ï¼Œä¸åŒçš„æ¿€æ´»å€¼å¯¹åº”çš„æ¿€æ´»æ¦‚ç‡å·®å¼‚ä¹Ÿå°±è¶Šå¤§ï¼Œä¹Ÿå°±è¶Šè¶‹å‘äºonehotå‘é‡ã€‚ï¼ˆæ¸©åº¦è¿™ä¸ªè¯ä¸»è¦æ¥è‡ªäºç‰©ç†å­¦ä¸­çš„æ¸©åº¦ï¼Œå½“æ¸©åº¦é«˜çš„æ—¶å€™ï¼Œåˆ†å­çš„è¿åŠ¨å°±è¶Šå‰§çƒˆï¼Œéšæœºæ€§å°±è¶Šå¤§ï¼Œåä¹‹åˆ™è¶Šç¨³å®šï¼Œéšæœºæ€§è¶Šå°ï¼‰<br>\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å¯¹åˆ†å¸ƒè¿›è¡Œé‡‡æ ·ï¼Œåˆèƒ½å¤Ÿæ»¡è¶³åœ¨ç½‘ç»œä¸­å¯ä»¥åå‘ä¼ æ’­å­¦ä¹ ã€‚<br>\nä½†æˆ‘ä»¬å¯èƒ½è¿˜ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å°±ç”¨softmaxå‡½æ•°å‘¢ï¼Œè¿™æ ·ä¸æ˜¯ä¹Ÿèƒ½åœ¨ç½‘ç»œä¸­å­¦ä¹ ä¹ˆï¼Ÿæˆ‘ä»¬å†å›é¡¾ä¸‹æˆ‘ä»¬çš„é—®é¢˜å°±èƒ½å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦é‡‡æ ·+èƒ½åä¼ ï¼Œsoftmaxæ»¡è¶³èƒ½åä¼ ä½†æ˜¯å®ƒä¸èƒ½è¾¾åˆ°æˆ‘ä»¬æ ¹æ®æ¦‚ç‡åˆ†å¸ƒé‡‡æ ·çš„ç›®çš„ï¼Œè€ŒGumbel-Max Trickå°±æ˜¯ç”¨æ¥è¿‘ä¼¼åˆ†å¸ƒç„¶åé‡‡æ ·çš„ã€‚<br>\nå¦å¤–ï¼Œæˆ‘ä»¬åœ¨æ­¤ç”¨åˆ°äº†Gumbel Distributionâ€“\\(G\\)ï¼Œæ˜¯ä¸€ä¸ªæå€¼åˆ†å¸ƒï¼Œé€šä¿—æ¥è®²å°±æ˜¯åˆ†å¸ƒçš„æå€¼çš„åˆ†å¸ƒï¼Œå…·ä½“å¯å‚è€ƒï¼š<br>\n<a href=\"https://en.wikipedia.org/wiki/Gumbel_distribution\" target=\"_blank\" rel=\"noopener\">Gumbel distribution</a></p>\n<h3>å‚è€ƒ</h3>\n<p><a href=\"https://www.cnblogs.com/initial-h/p/9468974.html\" target=\"_blank\" rel=\"noopener\">Gumbel-Softmax Trickå’ŒGumbelåˆ†å¸ƒ</a><br>\n<a href=\"https://casmls.github.io/general/2017/02/01/GumbelSoftmax.html\" target=\"_blank\" rel=\"noopener\">The Gumbel-Softmax Trick for Inference of Discrete Variables</a><br>\n<a href=\"https://www.youtube.com/watch?v=9zKuYvjFFS8\" target=\"_blank\" rel=\"noopener\">Variational Autoencoders</a><br>\n<a href=\"https://blog.csdn.net/a358463121/article/details/80820878\" target=\"_blank\" rel=\"noopener\">å¸¦ä½ è®¤è¯†ç¥å¥‡çš„Gumbel trick</a><br>\n<a href=\"https://www.youtube.com/watch?v=wVkLM2KKHp8\" target=\"_blank\" rel=\"noopener\">Talk: Categorical Reparameterization with Gumbel-Softmax &amp; The Concrete Distribution</a></p>\n"},{"title":"ML Resources Collection","catalog":true,"date":"2019-10-06T09:52:54.000Z","subtitle":null,"header-img":null,"mathjax":true,"_content":"\n## Tools\n\n1. Loss Landscape Visualization \nA tools for visualizing the Loss Landscape of Neural Nets.  \nNote: Support PyTorch 0.4 and 0.4+ is not evaluated.\nLink: [Github](https://github.com/tomgoldstein/loss-landscape)  \n2. Wasabi: A lightweight console printing and formatting toolkit\nNote: Work in progress but no updates since May 2019.\nLink: [Github](https://github.com/ines/wasabi)\n\n\n## Writing Guide\n1. [Research Proposal Guide](https://www.monash.edu/rlo/graduate-research-writing/write-the-thesis/writing-a-research-proposal)\n2. [How to write research paper](https://m.v.qq.com/play.html?&vid=k07751x7n6y&ptag=v_qq_com%23v.play.adaptor%233), çŸ­çŸ­16åˆ†é’Ÿï¼Œé’ˆé’ˆè§è¡€ï¼Œè¿™ä¸ªçœ‹äº†æŒºå¥½çš„\n\n## Blog\n1. [Tim Dettmers](https://timdettmers.com/): UW çš„ML PhDï¼Œå†™äº†äº›å­¦æœ¯æ€è€ƒ\n2. [Marvin Petersen\n](https://vinpetersen.github.io/): Dlå…¥é—¨çš„æ–‡ç« ","source":"_posts/Resources.md","raw":"---\ntitle: ML Resources Collection\ncatalog: true\ndate: 2019-10-06 17:52:54\nsubtitle:\nheader-img:\nmathjax: true\ntags: ML\n---\n\n## Tools\n\n1. Loss Landscape Visualization \nA tools for visualizing the Loss Landscape of Neural Nets.  \nNote: Support PyTorch 0.4 and 0.4+ is not evaluated.\nLink: [Github](https://github.com/tomgoldstein/loss-landscape)  \n2. Wasabi: A lightweight console printing and formatting toolkit\nNote: Work in progress but no updates since May 2019.\nLink: [Github](https://github.com/ines/wasabi)\n\n\n## Writing Guide\n1. [Research Proposal Guide](https://www.monash.edu/rlo/graduate-research-writing/write-the-thesis/writing-a-research-proposal)\n2. [How to write research paper](https://m.v.qq.com/play.html?&vid=k07751x7n6y&ptag=v_qq_com%23v.play.adaptor%233), çŸ­çŸ­16åˆ†é’Ÿï¼Œé’ˆé’ˆè§è¡€ï¼Œè¿™ä¸ªçœ‹äº†æŒºå¥½çš„\n\n## Blog\n1. [Tim Dettmers](https://timdettmers.com/): UW çš„ML PhDï¼Œå†™äº†äº›å­¦æœ¯æ€è€ƒ\n2. [Marvin Petersen\n](https://vinpetersen.github.io/): Dlå…¥é—¨çš„æ–‡ç« ","slug":"Resources","published":1,"updated":"2020-01-02T02:00:52.567Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck5393is8000dicuen7paidkt","content":"<h2 id=\"tools\">Tools</h2>\n<ol>\n<li>Loss Landscape Visualization<br>\nA tools for visualizing the Loss Landscape of Neural Nets.<br>\nNote: Support PyTorch 0.4 and 0.4+ is not evaluated.<br>\nLink: <a href=\"https://github.com/tomgoldstein/loss-landscape\" target=\"_blank\" rel=\"noopener\">Github</a></li>\n<li>Wasabi: A lightweight console printing and formatting toolkit<br>\nNote: Work in progress but no updates since May 2019.<br>\nLink: <a href=\"https://github.com/ines/wasabi\" target=\"_blank\" rel=\"noopener\">Github</a></li>\n</ol>\n<h2 id=\"writing-guide\">Writing Guide</h2>\n<ol>\n<li><a href=\"https://www.monash.edu/rlo/graduate-research-writing/write-the-thesis/writing-a-research-proposal\" target=\"_blank\" rel=\"noopener\">Research Proposal Guide</a></li>\n<li><a href=\"https://m.v.qq.com/play.html?&amp;vid=k07751x7n6y&amp;ptag=v_qq_com%23v.play.adaptor%233\" target=\"_blank\" rel=\"noopener\">How to write research paper</a>, çŸ­çŸ­16åˆ†é’Ÿï¼Œé’ˆé’ˆè§è¡€ï¼Œè¿™ä¸ªçœ‹äº†æŒºå¥½çš„</li>\n</ol>\n<h2 id=\"blog\">Blog</h2>\n<ol>\n<li><a href=\"https://timdettmers.com/\" target=\"_blank\" rel=\"noopener\">Tim Dettmers</a>: UW çš„ML PhDï¼Œå†™äº†äº›å­¦æœ¯æ€è€ƒ</li>\n<li><a href=\"https://vinpetersen.github.io/\" target=\"_blank\" rel=\"noopener\">Marvin Petersen<br>\n</a>: Dlå…¥é—¨çš„æ–‡ç« </li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2>Tools</h2>\n<ol>\n<li>Loss Landscape Visualization<br>\nA tools for visualizing the Loss Landscape of Neural Nets.<br>\nNote: Support PyTorch 0.4 and 0.4+ is not evaluated.<br>\nLink: <a href=\"https://github.com/tomgoldstein/loss-landscape\" target=\"_blank\" rel=\"noopener\">Github</a></li>\n<li>Wasabi: A lightweight console printing and formatting toolkit<br>\nNote: Work in progress but no updates since May 2019.<br>\nLink: <a href=\"https://github.com/ines/wasabi\" target=\"_blank\" rel=\"noopener\">Github</a></li>\n</ol>\n<h2>Writing Guide</h2>\n<ol>\n<li><a href=\"https://www.monash.edu/rlo/graduate-research-writing/write-the-thesis/writing-a-research-proposal\" target=\"_blank\" rel=\"noopener\">Research Proposal Guide</a></li>\n<li><a href=\"https://m.v.qq.com/play.html?&amp;vid=k07751x7n6y&amp;ptag=v_qq_com%23v.play.adaptor%233\" target=\"_blank\" rel=\"noopener\">How to write research paper</a>, çŸ­çŸ­16åˆ†é’Ÿï¼Œé’ˆé’ˆè§è¡€ï¼Œè¿™ä¸ªçœ‹äº†æŒºå¥½çš„</li>\n</ol>\n<h2>Blog</h2>\n<ol>\n<li><a href=\"https://timdettmers.com/\" target=\"_blank\" rel=\"noopener\">Tim Dettmers</a>: UW çš„ML PhDï¼Œå†™äº†äº›å­¦æœ¯æ€è€ƒ</li>\n<li><a href=\"https://vinpetersen.github.io/\" target=\"_blank\" rel=\"noopener\">Marvin Petersen<br>\n</a>: Dlå…¥é—¨çš„æ–‡ç« </li>\n</ol>\n"},{"title":"Technical Docs Collection involved in FE work","catalog":true,"date":"2020-01-07T02:24:22.000Z","subtitle":null,"header-img":null,"_content":"#### Docker\n- [å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)\n\n#### Sentry\n- [å®˜æ–¹æ–‡æ¡£](https://docs.sentry.io/)\n\n#### JWT\n- [Introduction to JSON Web Tokens](https://jwt.io/introduction/)\n\n#### JEST\n- [å®˜æ–¹æ–‡æ¡£](https://jestjs.io/docs/en/getting-started)\n\n#### Enzyme\n- [API introduction](https://airbnb.io/enzyme/)\n\n#### Rxjs\n- [å®˜æ–¹æ–‡æ¡£](https://rxjs-dev.firebaseapp.com/guide/overview)\n- [Learn RxJS](https://www.learnrxjs.io/)\n- [RxJS Marbles: Interactive diagrams of Rx Observables](https://rxmarbles.com/)\n\n#### Protocol Buffers\n- [google docs](https://developers.google.com/protocol-buffers)","source":"_posts/ä¸€äº›å·¥ä½œä¸­æ¶‰åŠåˆ°çš„æŠ€æœ¯æ–‡æ¡£é›†åˆ.md","raw":"---\ntitle: Technical Docs Collection involved in FE work\ncatalog: true\ndate: 2020-01-07 10:24:22\nsubtitle:\nheader-img:\ntags: FE\n---\n#### Docker\n- [å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)\n\n#### Sentry\n- [å®˜æ–¹æ–‡æ¡£](https://docs.sentry.io/)\n\n#### JWT\n- [Introduction to JSON Web Tokens](https://jwt.io/introduction/)\n\n#### JEST\n- [å®˜æ–¹æ–‡æ¡£](https://jestjs.io/docs/en/getting-started)\n\n#### Enzyme\n- [API introduction](https://airbnb.io/enzyme/)\n\n#### Rxjs\n- [å®˜æ–¹æ–‡æ¡£](https://rxjs-dev.firebaseapp.com/guide/overview)\n- [Learn RxJS](https://www.learnrxjs.io/)\n- [RxJS Marbles: Interactive diagrams of Rx Observables](https://rxmarbles.com/)\n\n#### Protocol Buffers\n- [google docs](https://developers.google.com/protocol-buffers)","slug":"ä¸€äº›å·¥ä½œä¸­æ¶‰åŠåˆ°çš„æŠ€æœ¯æ–‡æ¡£é›†åˆ","published":1,"updated":"2020-01-09T01:40:30.731Z","_id":"ck5393isc000gicuekop03fij","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><ul>\n<li><a href=\"https://docs.docker.com/\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h4 id=\"sentry\"><a href=\"#Sentry\" class=\"headerlink\" title=\"Sentry\"></a>Sentry</h4><ul>\n<li><a href=\"https://docs.sentry.io/\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h4 id=\"jwt\"><a href=\"#JWT\" class=\"headerlink\" title=\"JWT\"></a>JWT</h4><ul>\n<li><a href=\"https://jwt.io/introduction/\" target=\"_blank\" rel=\"noopener\">Introduction to JSON Web Tokens</a></li>\n</ul>\n<h4 id=\"jest\"><a href=\"#JEST\" class=\"headerlink\" title=\"JEST\"></a>JEST</h4><ul>\n<li><a href=\"https://jestjs.io/docs/en/getting-started\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h4 id=\"enzyme\"><a href=\"#Enzyme\" class=\"headerlink\" title=\"Enzyme\"></a>Enzyme</h4><ul>\n<li><a href=\"https://airbnb.io/enzyme/\" target=\"_blank\" rel=\"noopener\">API introduction</a></li>\n</ul>\n<h4 id=\"rxjs\"><a href=\"#Rxjs\" class=\"headerlink\" title=\"Rxjs\"></a>Rxjs</h4><ul>\n<li><a href=\"https://rxjs-dev.firebaseapp.com/guide/overview\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li><a href=\"https://www.learnrxjs.io/\" target=\"_blank\" rel=\"noopener\">Learn RxJS</a></li>\n<li><a href=\"https://rxmarbles.com/\" target=\"_blank\" rel=\"noopener\">RxJS Marbles: Interactive diagrams of Rx Observables</a></li>\n</ul>\n<h4 id=\"protocol-buffers\"><a href=\"#Protocol-Buffers\" class=\"headerlink\" title=\"Protocol Buffers\"></a>Protocol Buffers</h4><ul>\n<li><a href=\"https://developers.google.com/protocol-buffers\" target=\"_blank\" rel=\"noopener\">google docs</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><ul>\n<li><a href=\"https://docs.docker.com/\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h4 id=\"Sentry\"><a href=\"#Sentry\" class=\"headerlink\" title=\"Sentry\"></a>Sentry</h4><ul>\n<li><a href=\"https://docs.sentry.io/\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h4 id=\"JWT\"><a href=\"#JWT\" class=\"headerlink\" title=\"JWT\"></a>JWT</h4><ul>\n<li><a href=\"https://jwt.io/introduction/\" target=\"_blank\" rel=\"noopener\">Introduction to JSON Web Tokens</a></li>\n</ul>\n<h4 id=\"JEST\"><a href=\"#JEST\" class=\"headerlink\" title=\"JEST\"></a>JEST</h4><ul>\n<li><a href=\"https://jestjs.io/docs/en/getting-started\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h4 id=\"Enzyme\"><a href=\"#Enzyme\" class=\"headerlink\" title=\"Enzyme\"></a>Enzyme</h4><ul>\n<li><a href=\"https://airbnb.io/enzyme/\" target=\"_blank\" rel=\"noopener\">API introduction</a></li>\n</ul>\n<h4 id=\"Rxjs\"><a href=\"#Rxjs\" class=\"headerlink\" title=\"Rxjs\"></a>Rxjs</h4><ul>\n<li><a href=\"https://rxjs-dev.firebaseapp.com/guide/overview\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li><a href=\"https://www.learnrxjs.io/\" target=\"_blank\" rel=\"noopener\">Learn RxJS</a></li>\n<li><a href=\"https://rxmarbles.com/\" target=\"_blank\" rel=\"noopener\">RxJS Marbles: Interactive diagrams of Rx Observables</a></li>\n</ul>\n<h4 id=\"Protocol-Buffers\"><a href=\"#Protocol-Buffers\" class=\"headerlink\" title=\"Protocol Buffers\"></a>Protocol Buffers</h4><ul>\n<li><a href=\"https://developers.google.com/protocol-buffers\" target=\"_blank\" rel=\"noopener\">google docs</a></li>\n</ul>\n"}],"PostAsset":[{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick/re-paramerise.png","slug":"re-paramerise.png","post":"ck5393is6000bicueedtn9hph","modified":0,"renderable":0},{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick/gumbel2.png","slug":"gumbel2.png","post":"ck5393is6000bicueedtn9hph","modified":0,"renderable":0},{"_id":"source/_posts/FrontEnd-Daily-Learning/FE_20190806.png","slug":"FE_20190806.png","post":"ck5393irz0006icuer01dr8er","modified":0,"renderable":0},{"_id":"source/_posts/FrontEnd-Daily-Learning/FE_20190808.png","slug":"FE_20190808.png","post":"ck5393irz0006icuer01dr8er","modified":0,"renderable":0},{"_id":"source/_posts/FrontEnd-Daily-Learning/FE_20190809.png","slug":"FE_20190809.png","post":"ck5393irz0006icuer01dr8er","modified":0,"renderable":0},{"_id":"source/_posts/What-is-Gumbel-Softmax-Trick/gumbel1.png","slug":"gumbel1.png","post":"ck5393is6000bicueedtn9hph","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"ck5393is00007icuegsdu99f2","tag_id":"ck5393irx0005icuev2tgrh5u","_id":"ck5393is5000aicuemydbki7i"},{"post_id":"ck5393irp0001icue4956j72g","tag_id":"ck5393irx0005icuev2tgrh5u","_id":"ck5393is7000cicue86rm2tyh"},{"post_id":"ck5393iru0003icuef84ro4rr","tag_id":"ck5393irx0005icuev2tgrh5u","_id":"ck5393isc000ficueh7cwsjja"},{"post_id":"ck5393irz0006icuer01dr8er","tag_id":"ck5393irx0005icuev2tgrh5u","_id":"ck5393ise000iicuezmku4bta"},{"post_id":"ck5393is20008icuey4qlqq1b","tag_id":"ck5393isd000hicuepco5afvk","_id":"ck5393isg000kicue71uj0bsl"},{"post_id":"ck5393is6000bicueedtn9hph","tag_id":"ck5393ise000jicue5vj2aphk","_id":"ck5393isg000micueqs29sggh"},{"post_id":"ck5393is8000dicuen7paidkt","tag_id":"ck5393ise000jicue5vj2aphk","_id":"ck5393ish000nicueltzvei88"},{"post_id":"ck5393isc000gicuekop03fij","tag_id":"ck5393irx0005icuev2tgrh5u","_id":"ck56710zr0000okuets7zxuoz"}],"Tag":[{"name":"FE","_id":"ck5393irx0005icuev2tgrh5u"},{"name":"Daily","_id":"ck5393isd000hicuepco5afvk"},{"name":"ML","_id":"ck5393ise000jicue5vj2aphk"}]}}